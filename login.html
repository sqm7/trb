<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>平米內參 預售屋數據儀表板 - 登入 / 註冊</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-bg': '#1a1d29',
                        'dark-card': '#252836',
                        'cyan-accent': '#06b6d4',
                    }
                }
            }
        }
    </script>
    <style>
        html {
            scroll-behavior: smooth;
        }
        body { 
            font-family: 'Inter', 'Noto Sans TC', sans-serif; 
            background-color: #1a1d29;
        }
        #background-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -2;
            background-image: url('css/images/loginbackground.jpg');
            background-size: cover;
            background-position: center;
        }
        #background-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background-color: rgba(26, 29, 41, 0.9);
        }
        .form-input { background-color: #1f2937; border: 1px solid #4b5563; color: #d1d5db; }
        .form-input:focus { border-color: #06b6d4; box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.5); outline: none; }
        .loader-sm { border: 2px solid #374151; border-top: 2px solid #06b6d4; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .tab-button {
            padding: 0.75rem 1rem; font-weight: 500; border-bottom: 3px solid transparent;
            transition: all 0.3s ease; color: #9ca3af; width: 50%;
        }
        .tab-button.active { color: #06b6d4; border-bottom-color: #06b6d4; }
        
        /* ▼▼▼ 【瀑布流與動畫樣式】 ▼▼▼ */
        .content-container {
            display: flex;
            align-items: flex-start; /* 讓兩欄從頂部對齊 */
            justify-content: center;
            gap: 4rem;
            width: 100%;
            max-width: 80rem; /* 增加整體最大寬度 */
            margin: auto;
        }
        .left-content-wrapper {
            flex: 1;
            max-width: 48rem; /* 限制左側內容寬度 */
            height: 90vh; /* 設定最大高度 */
            overflow-y: auto; /* 超出高度時顯示滾動條 */
            padding-right: 1.5rem; /* For scrollbar spacing */
        }
        /* 美化滾動條 */
        .left-content-wrapper::-webkit-scrollbar { width: 8px; }
        .left-content-wrapper::-webkit-scrollbar-track { background: #1f2937; border-radius: 10px; }
        .left-content-wrapper::-webkit-scrollbar-thumb { background-color: #4b5563; border-radius: 10px; border: 2px solid #1f2937; }
        
        .right-form-wrapper {
            position: sticky; /* 讓表單在滾動時固定 */
            top: 5vh; /* 距離頂部的位置 */
            flex-shrink: 0;
            width: 100%;
            max-width: 24rem;
        }

        .feature-card {
            background: rgba(37, 40, 54, 0.5);
            border-radius: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            margin-bottom: 3rem;
            /* 動畫初始狀態 */
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .feature-card.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .feature-card img {
            width: 100%;
            height: auto;
            display: block;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .feature-text { padding: 1.5rem; }
        .feature-text h3 { font-size: 1.5rem; font-weight: 700; color: #fff; }
        .feature-text p { font-size: 1rem; color: #d1d5db; margin-top: 0.5rem; }
        /* ▲▲▲ 【樣式結束】 ▲▲▲ */
    </style>
</head>
<body class="text-gray-200">
    
    <div id="background-container"></div>
    <div id="background-overlay"></div>

    <div class="min-h-screen flex items-center justify-center p-4 lg:p-8">
        <div class="content-container">
        
            <div class="left-content-wrapper">
                <header class="mb-8 text-center lg:text-left">
                    <h1 class="text-4xl lg:text-5xl font-extrabold text-white tracking-tight leading-tight">平米內參<br><span class="text-3xl lg:text-4xl font-bold">預售屋數據儀表板</span></h1>
                    <p class="text-lg text-gray-300 mt-4">解鎖專業級的市場洞察力。我們整合最新實價登錄，提供即時、深入的分析報告，助您做出更精準的投資決策。</p>
                </header>
                
                <div id="features-container">
                    <div class="feature-card">
                        <img src="css/images/preview-1.jpg" alt="核心指標與排名">
                        <div class="feature-text">
                            <h3>核心指標與排名</h3>
                            <p>全面掌握市場銷售總額、坪數、均價與建案市佔率，快速鎖定熱銷建案。</p>
                        </div>
                    </div>
                    <div class="feature-card">
                        <img src="css/images/preview-2.jpg" alt="總價帶分析">
                        <div class="feature-text">
                            <h3>總價帶分析</h3>
                            <p>透過箱型圖與數據表，洞悉各房型的總價分佈區間，精準規劃產品策略。</p>
                        </div>
                    </div>
                    <div class="feature-card">
                        <img src="css/images/preview-3.jpg" alt="房屋單價分析">
                        <div class="feature-text">
                            <h3>房屋單價分析</h3>
                            <p>深入比較住宅、辦公室與店舖的單價，發掘價差倍數與投資潛力。</p>
                        </div>
                    </div>
                    <div class="feature-card">
                        <img src="css/images/preview-4.png" alt="車位分析">
                        <div class="feature-text">
                            <h3>車位分析</h3>
                            <p>從房車配比到各類型、各樓層車位均價，提供最完整的車位洞察。</p>
                        </div>
                    </div>
                    <div class="feature-card">
                        <img src="css/images/preview-5.jpg" alt="房型去化分析">
                        <div class="feature-text">
                            <h3>房型去化分析</h3>
                            <p>以熱力圖與趨勢線圖，視覺化呈現各房型的銷售速度與面積分佈。</p>
                        </div>
                    </div>
                    <div class="feature-card">
                        <img src="css/images/preview-6.jpg" alt="垂直水平價盤">
                        <div class="feature-text">
                            <h3>垂直水平價盤</h3>
                            <p>獨家銷控表與熱力圖，一眼看穿建案的定價策略與調價軌跡。</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="right-form-wrapper">
                <main id="form-container" class="bg-dark-card p-6 rounded-xl shadow-lg w-full">
                    <div class="flex border-b border-gray-700 mb-6">
                        <button id="login-tab" class="tab-button active">登入</button>
                        <button id="register-tab" class="tab-button">註冊</button>
                    </div>
                    <form id="login-form">
                        </form>
                    <form id="register-form" class="hidden">
                        </form>
                    <div id="message" class="text-red-400 text-center min-h-[2.5rem] mt-4"></div>
                </main>
            </div>
        </div>
    </div>

    <script type="module">
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

        const SUPABASE_URL = 'https://zxbmbbfrzbtuueysicoc.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp4Ym1iYmZyemJ0dXVleXNpY29jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA2ODg5ODksImV4cCI6MjA2NjI2NDk4OX0.1IUynv5eK1xF_3pb-oasqaTrPvbeAOC4Sc1oykPBy4M';
        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        document.addEventListener('DOMContentLoaded', () => {
            // ... (表單處理邏輯，與前一版相同)
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const loginTab = document.getElementById('login-tab');
            const registerTab = document.getElementById('register-tab');
            const messageDiv = document.getElementById('message');

            loginForm.innerHTML = `<div class="space-y-6"><div><label for="email" class="block text-sm font-medium text-gray-300 mb-2">電子郵件</label><input type="email" id="email" name="email" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required autocomplete="email"></div><div><label for="password" class="block text-sm font-medium text-gray-300 mb-2">密碼</label><input type="password" id="password" name="password" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required autocomplete="current-password"></div><div><button type="submit" id="login-submit-button" class="w-full flex justify-center items-center bg-cyan-accent hover:bg-opacity-90 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"><div class="loader-sm hidden"></div><span>登入</span></button></div></div>`;
            registerForm.innerHTML = `<div class="space-y-6"><div><label for="register-email" class="block text-sm font-medium text-gray-300 mb-2">電子郵件</label><input type="email" id="register-email" name="register-email" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required autocomplete="email"></div><div><label for="register-password" class="block text-sm font-medium text-gray-300 mb-2">密碼 (至少6位數)</label><input type="password" id="register-password" name="register-password" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required minlength="6"></div><div><label for="confirm-password" class="block text-sm font-medium text-gray-300 mb-2">確認密碼</label><input type="password" id="confirm-password" name="confirm-password" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required minlength="6"></div><div><button type="submit" id="register-submit-button" class="w-full flex justify-center items-center bg-cyan-accent hover:bg-opacity-90 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"><div class="loader-sm hidden"></div><span>註冊</span></button></div></div>`;
            
            const loginSubmitBtn = document.getElementById('login-submit-button');
            const registerSubmitBtn = document.getElementById('register-submit-button');

            loginTab.addEventListener('click', () => { /* ... tab logic ... */ });
            registerTab.addEventListener('click', () => { /* ... tab logic ... */ });
            loginForm.addEventListener('submit', async (e) => { /* ... login logic ... */ });
            registerForm.addEventListener('submit', async (e) => { /* ... register logic ... */ });
            
            // ▼▼▼ 【瀑布流動畫 JavaScript】 ▼▼▼
            const featureCards = document.querySelectorAll('.feature-card');
            // 監聽左側滾動容器
            const scrollContainer = document.querySelector('.left-content-wrapper');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, {
                root: scrollContainer, // 指定滾動的根元素
                rootMargin: '0px 0px -100px 0px', // 元素進入視窗底部100px前觸發
                threshold: 0.1
            });

            featureCards.forEach(card => {
                observer.observe(card);
            });
            // ▲▲▲ 【動畫結束】 ▲▲▲
        });
    </script>
</body>
</html>
