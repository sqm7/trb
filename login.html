<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>平米內參 預售屋數據儀表板</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-bg': '#1a1d29',
                        'dark-card': '#252836',
                        'cyan-accent': '#06b6d4',
                        'purple-accent': '#8b5cf6',
                    }
                }
            }
        }
    </script>
    <style>
        html { scroll-behavior: smooth; }
        body { 
            font-family: 'Inter', 'Noto Sans TC', sans-serif; 
            background-color: #1a1d29;
            color: #e5e7eb;
            overflow-x: hidden;
        }

        .scroll-animate { 
            opacity: 0; 
            transition: opacity 0.8s ease-out;
        }
        .scroll-animate.is-visible { 
            opacity: 1; 
        }
        .scroll-animate.is-visible .image-container {
            transform: translateY(0);
            opacity: 1;
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .scroll-animate.is-visible .feature-text {
            transform: translateY(0);
            opacity: 1;
            transition: opacity 0.8s ease-out 0.2s, transform 0.8s ease-out 0.2s;
        }
        .feature-text, .image-container {
            opacity: 0;
            transform: translateY(40px);
        }

        #hero-login {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 2rem;
            overflow: hidden;
        }
        #hero-login::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('css/images/loginbackground.jpg');
            background-size: cover; background-position: center;
            filter: blur(5px) brightness(0.7); z-index: -2; transform: scale(1.1);
        }
        #hero-login::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(ellipse at center, rgba(26, 29, 41, 0.6) 0%, rgba(26, 29, 41, 0.95) 100%);
            z-index: -1;
        }
        .hero-container {
            width: 100%; max-width: 1100px;
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 3rem;
        }
        @media (min-width: 1024px) {
            .hero-container { 
                flex-direction: row; 
                justify-content: space-between;
            }
            .hero-text-content { flex: 1.2; }
            .form-wrapper { flex: 1; }
        }

        .form-input { background-color: #1f2937; border: 1px solid #4b5563; color: #d1d5db; }
        .form-input:focus { border-color: #06b6d4; box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.5); outline: none; }
        .loader-sm { border: 2px solid #374151; border-top: 2px solid #06b6d4; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .tab-button {
            padding: 0.75rem 1rem; font-weight: 500; border-bottom: 3px solid transparent;
            transition: all 0.3s ease; color: #9ca3af; width: 50%;
        }
        .tab-button.active { color: #06b6d4; border-bottom-color: #06b6d4; }
        
        /* --- 移除 .feature-section 的自訂排版規則，改由 Tailwind class 直接控制 --- */

        .feature-annotation { border-left: 2px solid #4b5563; padding-left: 1.5rem; }

        .image-container {
            width: 100%;
            position: relative;
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            height: 500px; 
            cursor: grab;
        }
        .image-container.is-dragging { cursor: grabbing; }
        .image-container img {
            width: 100%;
            display: block;
            pointer-events: none;
            user-select: none;
        }
        .drag-hint {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.6);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: white; z-index: 10;
            opacity: 0; transition: opacity 0.3s ease;
            pointer-events: none;
        }
        .image-container:hover .drag-hint { opacity: 1; }
        .drag-hint-icon { animation: up-down 1.5s ease-in-out infinite; }
        @keyframes up-down {
            0%, 100% { transform: translateY(-8px); }
            50% { transform: translateY(8px); }
        }
    </style>
</head>
<body>
    
    <section id="hero-login">
        <div class="hero-container">
            <div class="text-center lg:text-left hero-text-content">
                <h1 class="text-5xl md:text-6xl font-extrabold text-white tracking-tight leading-tight">平米內參</h1>
                <p class="mt-4 text-xl md:text-2xl text-cyan-accent font-semibold">數據驅動的預售屋市場決策平台</p>
                <div class="mt-6 text-lg text-gray-300 max-w-xl mx-auto lg:mx-0">
                    <p>在瞬息萬變的市場中，精準的數據是您超越競爭對手的唯一利器。我們專為房地產專業人士，提供最深度、最即時的數據洞察。</p>
                    <div class="mt-6 space-y-3 text-left">
                        <div class="flex items-start gap-3"><i class="fa-solid fa-building text-purple-accent mt-1.5"></i><div><strong class="text-white">致 建商：</strong>面對市場不確定性，如何精準定價、規劃最適產品？</div></div>
                        <div class="flex items-start gap-3"><i class="fa-solid fa-handshake text-purple-accent mt-1.5"></i><div><strong class="text-white">致 代銷：</strong>如何掌握即時競品動態，制定高效銷售策略？</div></div>
                        <div class="flex items-start gap-3"><i class="fa-solid fa-chart-line text-purple-accent mt-1.5"></i><div><strong class="text-white">致 投資人：</strong>如何在海量資訊中，快速找到價值窪地與潛力標的？</div></div>
                    </div>
                </div>
            </div>
            <div class="w-full max-w-sm mx-auto form-wrapper">
                 <div id="form-container" class="bg-dark-card/80 backdrop-blur-sm p-8 rounded-xl shadow-2xl">
                    <div class="flex border-b border-gray-700 mb-6"><button id="login-tab" class="tab-button active">登入</button><button id="register-tab" class="tab-button">註冊</button></div>
                    <form id="login-form">
                        <div class="space-y-6">
                            <div><label for="email" class="block text-sm font-medium text-gray-300 mb-2">電子郵件</label><input type="email" id="email" name="email" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required autocomplete="email"></div>
                            <div><label for="password" class="block text-sm font-medium text-gray-300 mb-2">密碼</label><input type="password" id="password" name="password" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required autocomplete="current-password"></div>
                            <div><button type="submit" id="login-submit-button" class="w-full flex justify-center items-center bg-cyan-accent hover:bg-opacity-90 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"><div class="loader-sm hidden"></div><span>登入</span></button></div>
                        </div>
                    </form>
                    <form id="register-form" class="hidden">
                        <div class="space-y-6">
                            <div><label for="register-email" class="block text-sm font-medium text-gray-300 mb-2">電子郵件</label><input type="email" id="register-email" name="register-email" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required autocomplete="email"></div>
                            <div><label for="register-password" class="block text-sm font-medium text-gray-300 mb-2">密碼 (至少6位數)</label><input type="password" id="register-password" name="register-password" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required minlength="6"></div>
                            <div><label for="confirm-password" class="block text-sm font-medium text-gray-300 mb-2">確認密碼</label><input type="password" id="confirm-password" name="confirm-password" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required minlength="6"></div>
                            <div><button type="submit" id="register-submit-button" class="w-full flex justify-center items-center bg-cyan-accent hover:bg-opacity-90 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"><div class="loader-sm hidden"></div><span>註冊</span></button></div>
                        </div>
                    </form>
                    <div id="message" class="text-red-400 text-center min-h-[2.5rem] mt-4"></div>
                </div>
            </div>
        </div>
    </section>

    <main id="features" class="max-w-7xl mx-auto px-8">
        <section class="feature-section scroll-animate grid grid-cols-1 lg:grid-cols-2 items-center gap-8 lg:gap-20 py-20">
            <div class="image-container">
                <img src="css/images/preview-1.jpg" alt="核心指標與排名">
                <div class="drag-hint"><div class="drag-hint-icon"><i class="fa-solid fa-up-down"></i></div><p class="mt-2 text-sm font-semibold">按住拖曳，查看完整畫面</p></div>
            </div>
            <div class="feature-text">
                <h2 class="text-3xl font-bold mb-4 text-white">宏觀市場儀表板</h2>
                <p class="text-lg text-gray-300 mb-6">從市場全局視角出發，快速掌握指定範圍內的宏觀數據。透過互動式圖表與排名，洞悉市場結構與競爭格局，為您的策略佈局提供堅實的數據支撐。</p>
                <div class="feature-annotation space-y-4">
                    <div><h4 class="font-semibold text-cyan-accent flex items-center gap-2"><i class="fa-solid fa-chart-pie fa-sm"></i>圖解說明</h4></div>
                    <div class="flex items-start gap-3"><i class="fa-solid fa-circle-check text-purple-accent mt-1"></i><div><strong class="text-white">核心指標卡：</strong>快速掌握總銷金額、去化坪數、平均單價、總交易筆數。</div></div>
                    <div class="flex items-start gap-3"><i class="fa-solid fa-circle-check text-purple-accent mt-1"></i><div><strong class="text-white">建案佔比圖 (Treemap)：</strong>視覺化呈現各建案的銷售額佔比，快速識別市場主力。</div></div>
                    <div class="flex items-start gap-3"><i class="fa-solid fa-circle-check text-purple-accent mt-1"></i><div><strong class="text-white">多維度排名表：</strong>可依總價、坪數、單價、戶數等多項指標排序，深入分析競品表現。</div></div>
                </div>
            </div>
        </section>

        <section class="feature-section scroll-animate grid grid-cols-1 lg:grid-cols-2 items-center gap-8 lg:gap-20 py-20">
            <div class="image-container lg:order-last">
                 <img src="css/images/preview-5.jpg" alt="房型去化分析">
                 <div class="drag-hint"><div class="drag-hint-icon"><i class="fa-solid fa-up-down"></i></div><p class="mt-2 text-sm font-semibold">按住拖曳，查看完整畫面</p></div>
            </div>
            <div class="feature-text lg:order-first">
                <h2 class="text-3xl font-bold mb-4 text-white">房型去化分析</h2>
                <p class="text-lg text-gray-300 mb-6">掌握市場風向，預測未來趨勢。透過動態趨勢圖與熱力圖，追蹤不同房型的銷售速度與主力面積規格，幫助您在產品規劃與銷售策略上，永遠領先一步。</p>
                 <div class="feature-annotation space-y-4">
                    <div><h4 class="font-semibold text-cyan-accent flex items-center gap-2"><i class="fa-solid fa-chart-pie fa-sm"></i>圖解說明</h4></div>
                    <div class="flex items-start gap-3"><i class="fa-solid fa-circle-check text-purple-accent mt-1"></i><div><strong class="text-white">去化速度趨勢圖：</strong>以週、月、季、年等多維度，追蹤指定房型的銷售量變化趨勢。</div></div>
                    <div class="flex items-start gap-3"><i class="fa-solid fa-circle-check text-purple-accent mt-1"></i><div><strong class="text-white">詳細去化數據表：</strong>量化各時間週期的具體交易筆數、總價與坪數。</div></div>
                    <div class="flex items-start gap-3"><i class="fa-solid fa-circle-check text-purple-accent mt-1"></i><div><strong class="text-white">面積分佈熱力圖：</strong>視覺化呈現各房型的主力成交坪數區間，點擊即可查看該區間的詳細建案數據。</div></div>
                </div>
            </div>
        </section>
        
        <section class="feature-section scroll-animate grid grid-cols-1 lg:grid-cols-2 items-center gap-8 lg:gap-20 py-20">
            <div class="image-container">
                <img src="css/images/preview-6.jpg" alt="垂直水平分析">
                <div class="drag-hint"><div class="drag-hint-icon"><i class="fa-solid fa-up-down"></i></div><p class="mt-2 text-sm font-semibold">按住拖曳，查看完整畫面</p></div>
            </div>
            <div class="feature-text">
                <h2 class="text-3xl font-bold mb-4 text-white">獨家價盤還原系統</h2>
                <p class="text-lg text-gray-300 mb-6">業界獨家！我們將雜亂的交易數據，智慧還原成視覺化的銷控表與調價熱力圖。您能直觀地比較「水平價差」與「垂直價差」，更能洞察每戶的「真實溢價幅度」，讓建案的定價策略與獲利空間一目了然。</p>
                 <div class="feature-annotation space-y-4">
                    <div><h4 class="font-semibold text-cyan-accent flex items-center gap-2"><i class="fa-solid fa-chart-pie fa-sm"></i>圖解說明</h4></div>
                    <div class="flex items-start gap-3"><i class="fa-solid fa-circle-check text-purple-accent mt-1"></i><div><strong class="text-white">視覺化銷控表：</strong>以棋盤格方式呈現，清晰展示每一戶的成交單價與日期。</div></div>
                    <div class="flex items-start gap-3"><i class="fa-solid fa-circle-check text-purple-accent mt-1"></i><div><strong class="text-white">溢價熱力圖：</strong>銷控表切換為顏色模式，直觀顯示每戶相較於開盤基準的漲跌幅度。</div></div>
                    <div class="flex items-start gap-3"><i class="fa-solid fa-circle-check text-purple-accent mt-1"></i><div><strong class="text-white">統計摘要：</strong>量化呈現整個建案的總溢價金額、溢價率、以及平均單價調升幅度。</div></div>
                </div>
            </div>
        </section>
        </main>

    <footer class="text-center py-8 text-gray-500 text-sm bg-dark-card">
        <div class="flex items-center justify-center space-x-4 md:space-x-6 flex-wrap gap-y-2">
            <a href="mailto:sqmtalk7@gmail.com" class="hover:text-cyan-400 transition-colors flex items-center gap-2"><i class="fa-solid fa-envelope"></i><span>sqmtalk7@gmail.com</span></a>
            <a href="https://www.threads.net/@sqm.talk" target="_blank" rel="noopener noreferrer" class="hover:text-cyan-400 transition-colors flex items-center gap-2"><i class="fa-brands fa-threads"></i><span>@sqm.talk</span></a>
        </div>
        <p class="mt-4">資料來源：內政部實價登錄</p>
        <p class="mt-2">版權所有 © 2025 平米內參. 保留一切權利.</p>
    </footer>

    <script type="module">
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';
        const SUPABASE_URL = 'https://zxbmbbfrzbtuueysicoc.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp4Ym1iYmZyemJ0dXVleXNpY29jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA2ODg5ODksImV4cCI6MjA2NjI2NDk4OX0.1IUynv5eK1xF_3pb-oasqaTrPvbeAOC4Sc1oykPBy4M';
        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        document.addEventListener('DOMContentLoaded', () => {
            const loginForm=document.getElementById('login-form'),registerForm=document.getElementById('register-form'),loginTab=document.getElementById('login-tab'),registerTab=document.getElementById('register-tab'),messageDiv=document.getElementById('message'),loginSubmitBtn=document.getElementById('login-submit-button'),registerSubmitBtn=document.getElementById('register-submit-button');loginTab.addEventListener('click',()=>{loginTab.classList.add('active'),registerTab.classList.remove('active'),loginForm.classList.remove('hidden'),registerForm.classList.add('hidden'),messageDiv.textContent='',window.registerCountdownInterval&&clearInterval(window.registerCountdownInterval)}),registerTab.addEventListener('click',()=>{registerTab.classList.add('active'),loginTab.classList.remove('active'),registerForm.classList.remove('hidden'),loginForm.classList.add('hidden'),messageDiv.textContent=''});loginForm.addEventListener('submit',async e=>{e.preventDefault();const t=loginSubmitBtn,n=t.querySelector('.loader-sm'),s=t.querySelector('span');t.disabled=!0,n.classList.remove('hidden'),s.classList.add('hidden'),messageDiv.textContent='';const i=e.target.email.value,o=e.target.password.value;try{const{error:l}=await supabase.auth.signInWithPassword({email:i,password:o});if(l)throw l;window.location.href='index.html'}catch(l){messageDiv.textContent=`登入失敗: ${l.message}`,t.disabled=!1,n.classList.add('hidden'),s.classList.remove('hidden')}});registerForm.addEventListener('submit',async e=>{e.preventDefault();const t=registerSubmitBtn,n=t.querySelector('.loader-sm'),s=t.querySelector('span');t.disabled=!0,n.classList.remove('hidden'),s.classList.add('hidden'),messageDiv.textContent='';const i=e.target['register-email'].value,o=e.target['register-password'].value,l=e.target['confirm-password'].value;if(o!==l)return messageDiv.textContent='兩次輸入的密碼不相符。',t.disabled=!1,n.classList.add('hidden'),s.classList.remove('hidden'),void 0;try{const{error:d}=await supabase.auth.signUp({email:i,password:o,options:{emailRedirectTo:'https://sqm7.github.io/kthd/'}});if(d)throw d;let a=10;const c='註冊成功！請至您的電子信箱收取驗證信。';messageDiv.innerHTML=`<span class="text-green-400">${c}<br>${a} 秒後將返回登入頁面...</span>`,window.registerCountdownInterval=setInterval(()=>{--a>0?messageDiv.innerHTML=`<span class="text-green-400">${c}<br>${a} 秒後將返回登入頁面...</span>`:(clearInterval(window.registerCountdownInterval),loginTab.click())},1e3)}catch(d){messageDiv.textContent=`註冊失敗: ${d.message}`,t.disabled=!1,n.classList.add('hidden'),s.classList.remove('hidden')}});
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- 滾動動畫 ---
            const animatedElements = document.querySelectorAll('.scroll-animate');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.15 });
            animatedElements.forEach(el => { observer.observe(el); });

            // --- 圖片拖曳功能 ---
            const containers = document.querySelectorAll('.image-container');
            containers.forEach(container => {
                const img = container.querySelector('img');
                if (!img) return;

                let isDragging = false;
                let startY, startTop;

                const startDrag = (e) => {
                    isDragging = true;
                    container.classList.add('is-dragging');
                    startY = e.pageY || e.touches[0].pageY;
                    startTop = img.offsetTop;
                    container.querySelector('.drag-hint').style.opacity = '0';
                };

                const onDrag = (e) => {
                    if (!isDragging) return;
                    e.preventDefault();
                    const currentY = e.pageY || e.touches[0].pageY;
                    const deltaY = currentY - startY;
                    let newTop = startTop + deltaY;

                    // 限制拖曳範圍
                    const maxTop = 0;
                    const minTop = container.clientHeight - img.clientHeight;
                    if (newTop > maxTop) newTop = maxTop;
                    if (newTop < minTop) newTop = minTop;

                    img.style.position = 'absolute';
                    img.style.top = `${newTop}px`;
                };

                const endDrag = () => {
                    if (!isDragging) return;
                    isDragging = false;
                    container.classList.remove('is-dragging');
                };

                container.addEventListener('mousedown', startDrag);
                container.addEventListener('touchstart', startDrag);

                window.addEventListener('mousemove', onDrag);
                window.addEventListener('touchmove', onDrag);

                window.addEventListener('mouseup', endDrag);
                window.addEventListener('touchend', endDrag);
                
                container.addEventListener('mouseleave', () => {
                   if (!isDragging) {
                       container.querySelector('.drag-hint').style.opacity = '';
                   }
                });
            });
        });
    </script>
</body>
</html>
