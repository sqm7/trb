<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>平米內參 預售屋數據儀表板</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-bg': '#1a1d29',
                        'dark-card': '#252836',
                        'cyan-accent': '#06b6d4',
                        'purple-accent': '#8b5cf6',
                    }
                }
            }
        }
    </script>
    <style>
        /* --- 基礎設定 --- */
        html { scroll-behavior: smooth; }
        body { 
            font-family: 'Inter', 'Noto Sans TC', sans-serif; 
            background-color: #1a1d29;
            color: #e5e7eb;
            overflow-x: hidden;
        }

        /* --- 特效：滾動觸發動畫 --- */
        .scroll-animate {
            opacity: 0;
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .scroll-animate.fade-in {
            transform: translateY(30px);
        }
        .scroll-animate.slide-in-left {
            transform: translateX(-50px);
        }
        .scroll-animate.slide-in-right {
            transform: translateX(50px);
        }
        .scroll-animate.is-visible {
            opacity: 1;
            transform: none;
        }

        /* --- Hero 英雄區塊樣式 --- */
        #hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            text-align: center;
            padding: 1rem;
        }
        #hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('css/images/loginbackground.jpg');
            background-size: cover;
            background-position: center;
            filter: blur(4px);
            z-index: -2;
            transform: scale(1.1);
        }
        #hero::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(ellipse at center, rgba(26, 29, 41, 0.7) 0%, rgba(26, 29, 41, 0.95) 100%);
            z-index: -1;
        }
        .scroll-down-indicator {
            position: absolute;
            bottom: 2rem;
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-15px); }
            60% { transform: translateY(-5px); }
        }

        /* --- 功能展示區塊樣式 --- */
        .feature-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4rem;
            padding: 6rem 2rem;
            min-height: 80vh;
        }
        .feature-section:nth-child(even) {
            flex-direction: row-reverse;
            background-color: #252836;
        }
        .feature-image {
            flex-basis: 50%;
            max-width: 50%;
        }
        .feature-image img {
            width: 100%;
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }
        .feature-text {
            flex-basis: 40%;
            max-width: 40%;
        }
        .feature-text ul { list-style-position: inside; }

        /* --- 登入表單區域 --- */
        .form-input { background-color: #1f2937; border: 1px solid #4b5563; color: #d1d5db; }
        .form-input:focus { border-color: #06b6d4; box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.5); outline: none; }
        .loader-sm { border: 2px solid #374151; border-top: 2px solid #06b6d4; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .tab-button {
            padding: 0.75rem 1rem;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            color: #9ca3af;
            width: 50%;
        }
        .tab-button.active { color: #06b6d4; border-bottom-color: #06b6d4; }
        
        /* --- 響應式設計 --- */
        @media (max-width: 1024px) {
            .feature-section {
                flex-direction: column !important;
                gap: 2rem;
                padding: 4rem 1.5rem;
            }
            .feature-image, .feature-text {
                max-width: 90%;
                flex-basis: auto;
                text-align: center;
            }
            .feature-text ul { text-align: left; }
        }
    </style>
</head>
<body>
    
    <section id="hero">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-5xl md:text-7xl font-extrabold text-white tracking-tight leading-tight">
                平米內參
            </h1>
            <p class="mt-4 text-xl md:text-2xl text-gray-300">
                您的 AI 驅動預售屋市場決策引擎
            </p>
            <div class="mt-8 border-t border-b border-cyan-accent/20 py-4">
                <p class="text-sm uppercase tracking-widest text-cyan-accent font-semibold">專為以下專業人士打造</p>
                <div class="mt-3 flex justify-center items-center gap-6 md:gap-10 text-lg text-gray-200">
                    <div class="flex items-center gap-2"><i class="fa-solid fa-building text-purple-accent"></i><span>建商</span></div>
                    <div class="flex items-center gap-2"><i class="fa-solid fa-handshake text-purple-accent"></i><span>代銷</span></div>
                    <div class="flex items-center gap-2"><i class="fa-solid fa-chart-line text-purple-accent"></i><span>投資人</span></div>
                </div>
            </div>
             <a href="#login-section" class="mt-10 inline-block bg-cyan-accent text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-opacity-90 transition-all text-lg">
                立即登入
            </a>
        </div>
        <a href="#features" class="scroll-down-indicator text-white/50">
            <i class="fa-solid fa-chevron-down fa-2x"></i>
        </a>
    </section>

    <main id="features">
        <section class="feature-section">
            <div class="feature-image scroll-animate slide-in-left">
                <img src="css/images/preview-1.jpg" alt="核心指標與排名">
            </div>
            <div class="feature-text scroll-animate slide-in-right">
                <h2 class="text-3xl font-bold mb-4 text-white">宏觀市場儀表板</h2>
                <p class="text-lg text-gray-300 mb-6">快速掌握市場脈動。本儀表板提供「核心指標與建案排名」分析，一眼看穿市場總銷金額、去化坪數、平均單價與交易量。更能透過「總價帶分析」了解各房型的價格分佈與主力成交區間，助您從宏觀角度做出最佳判斷。</p>
            </div>
        </section>

        <section class="feature-section">
            <div class="feature-image scroll-animate slide-in-right">
                 <img src="css/images/preview-3.jpg" alt="多維度單價分析">
            </div>
            <div class="feature-text scroll-animate slide-in-left">
                <h2 class="text-3xl font-bold mb-4 text-white">多維度單價分析</h2>
                <p class="text-lg text-gray-300 mb-6">深入價格的每一個細節。提供「房屋單價分析」，可切換算術平均與加權平均，比較住宅、店舖、辦公室之間的價差倍數。同時包含完整的「車位單價分析」，從房車配比、各類型車位均價，到坡道平面的分層價差，無一遺漏。</p>
            </div>
        </section>
        
        <section class="feature-section">
            <div class="feature-image scroll-animate slide-in-left">
                <img src="css/images/preview-5.jpg" alt="動態去化追蹤">
            </div>
            <div class="feature-text scroll-animate slide-in-right">
                <h2 class="text-3xl font-bold mb-4 text-white">動態去化追蹤</h2>
                 <p class="text-lg text-gray-300 mb-6">「房型去化分析」是您的市場風向標。以週、月、季、年等多時間維度，追蹤不同房型的銷售速度與趨勢變化。搭配「房型面積分佈熱力圖」，視覺化呈現市場上最熱銷的產品規格，助您提前佈局，搶佔先機。</p>
            </div>
        </section>

        <section class="feature-section">
            <div class="feature-image scroll-animate slide-in-right">
                <img src="css/images/preview-6.jpg" alt="獨家價盤還原系統">
            </div>
            <div class="feature-text scroll-animate slide-in-left">
                <h2 class="text-3xl font-bold mb-4 text-white">獨家價盤還原系統</h2>
                <p class="text-lg text-gray-300 mb-6">業界獨家！我們的「垂直水平分析」功能，能將雜亂的數據還原成視覺化的銷控表，清晰呈現水平與垂直價差。更可啟用「調價熱力圖」模式，透過演算法錨定開盤基準價，精準計算每戶的真實溢價幅度，讓建案的調價策略與利潤空間一目了然。</p>
            </div>
        </section>
    </main>

    <section id="login-section" class="py-20 bg-dark-bg">
        <div id="form-container" class="bg-dark-card p-8 rounded-xl shadow-2xl w-full max-w-sm mx-auto">
            <div class="flex border-b border-gray-700 mb-6">
                <button id="login-tab" class="tab-button active">登入</button>
                <button id="register-tab" class="tab-button">註冊</button>
            </div>

            <form id="login-form">
                <div class="space-y-6">
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-300 mb-2">電子郵件</label>
                        <input type="email" id="email" name="email" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required autocomplete="email">
                    </div>
                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-300 mb-2">密碼</label>
                        <input type="password" id="password" name="password" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required autocomplete="current-password">
                    </div>
                    <div>
                        <button type="submit" id="login-submit-button" class="w-full flex justify-center items-center bg-cyan-accent hover:bg-opacity-90 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                            <div class="loader-sm hidden"></div>
                            <span>登入</span>
                        </button>
                    </div>
                </div>
            </form>

            <form id="register-form" class="hidden">
                <div class="space-y-6">
                    <div>
                        <label for="register-email" class="block text-sm font-medium text-gray-300 mb-2">電子郵件</label>
                        <input type="email" id="register-email" name="register-email" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required autocomplete="email">
                    </div>
                    <div>
                        <label for="register-password" class="block text-sm font-medium text-gray-300 mb-2">密碼 (至少6位數)</label>
                        <input type="password" id="register-password" name="register-password" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required minlength="6">
                    </div>
                    <div>
                        <label for="confirm-password" class="block text-sm font-medium text-gray-300 mb-2">確認密碼</label>
                        <input type="password" id="confirm-password" name="confirm-password" class="form-input block w-full pl-3 pr-10 py-3 text-base rounded-md" required minlength="6">
                    </div>
                    <div>
                        <button type="submit" id="register-submit-button" class="w-full flex justify-center items-center bg-cyan-accent hover:bg-opacity-90 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                            <div class="loader-sm hidden"></div>
                            <span>註冊</span>
                        </button>
                    </div>
                </div>
            </form>

            <div id="message" class="text-red-400 text-center min-h-[2.5rem] mt-4"></div>
        </div>
    </section>

    <footer class="text-center py-8 text-gray-500 text-sm bg-dark-card">
        <div class="flex items-center justify-center space-x-4 md:space-x-6 flex-wrap gap-y-2">
            <a href="mailto:sqmtalk7@gmail.com" class="hover:text-cyan-400 transition-colors flex items-center gap-2">
                <i class="fa-solid fa-envelope"></i>
                <span>sqmtalk7@gmail.com</span>
            </a>
            <a href="https://www.threads.net/@sqm.talk" target="_blank" rel="noopener noreferrer" class="hover:text-cyan-400 transition-colors flex items-center gap-2">
                <i class="fa-brands fa-threads"></i>
                <span>@sqm.talk</span>
            </a>
        </div>
        <p class="mt-4">資料來源：內政部實價登錄</p>
        <p class="mt-2">版權所有 © 2025 平米內參. 保留一切權利.</p>
    </footer>

    <script type="module">
        // Supabase and form logic
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';
        const SUPABASE_URL = 'https://zxbmbbfrzbtuueysicoc.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp4Ym1iYmZyemJ0dXVleXNpY29jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA2ODg5ODksImV4cCI6MjA2NjI2NDk4OX0.1IUynv5eK1xF_3pb-oasqaTrPvbeAOC4Sc1oykPBy4M';
        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        // ... (The rest of the form handling JS is identical to previous versions)
        document.addEventListener('DOMContentLoaded', () => {
            const loginForm=document.getElementById('login-form'),registerForm=document.getElementById('register-form'),loginTab=document.getElementById('login-tab'),registerTab=document.getElementById('register-tab'),messageDiv=document.getElementById('message'),loginSubmitBtn=document.getElementById('login-submit-button'),registerSubmitBtn=document.getElementById('register-submit-button');loginTab.addEventListener('click',()=>{loginTab.classList.add('active'),registerTab.classList.remove('active'),loginForm.classList.remove('hidden'),registerForm.classList.add('hidden'),messageDiv.textContent='',window.registerCountdownInterval&&clearInterval(window.registerCountdownInterval)}),registerTab.addEventListener('click',()=>{registerTab.classList.add('active'),loginTab.classList.remove('active'),registerForm.classList.remove('hidden'),loginForm.classList.add('hidden'),messageDiv.textContent=''});loginForm.addEventListener('submit',async e=>{e.preventDefault();const t=loginSubmitBtn,n=t.querySelector('.loader-sm'),s=t.querySelector('span');t.disabled=!0,n.classList.remove('hidden'),s.classList.add('hidden'),messageDiv.textContent='';const i=e.target.email.value,o=e.target.password.value;try{const{error:l}=await supabase.auth.signInWithPassword({email:i,password:o});if(l)throw l;window.location.href='index.html'}catch(l){messageDiv.textContent=`登入失敗: ${l.message}`,t.disabled=!1,n.classList.add('hidden'),s.classList.remove('hidden')}});registerForm.addEventListener('submit',async e=>{e.preventDefault();const t=registerSubmitBtn,n=t.querySelector('.loader-sm'),s=t.querySelector('span');t.disabled=!0,n.classList.remove('hidden'),s.classList.add('hidden'),messageDiv.textContent='';const i=e.target['register-email'].value,o=e.target['register-password'].value,l=e.target['confirm-password'].value;if(o!==l)return messageDiv.textContent='兩次輸入的密碼不相符。',t.disabled=!1,n.classList.add('hidden'),s.classList.remove('hidden'),void 0;try{const{error:d}=await supabase.auth.signUp({email:i,password:o,options:{emailRedirectTo:'https://sqm7.github.io/kthd/'}});if(d)throw d;let a=10;const c='註冊成功！請至您的電子信箱收取驗證信。';messageDiv.innerHTML=`<span class="text-green-400">${c}<br>${a} 秒後將返回登入頁面...</span>`,window.registerCountdownInterval=setInterval(()=>{--a>0?messageDiv.innerHTML=`<span class="text-green-400">${c}<br>${a} 秒後將返回登入頁面...</span>`:(clearInterval(window.registerCountdownInterval),loginTab.click())},1e3)}catch(d){messageDiv.textContent=`註冊失敗: ${d.message}`,t.disabled=!1,n.classList.add('hidden'),s.classList.remove('hidden')}});
        });
    </script>
    <script>
        // Scroll animation logic
        document.addEventListener('DOMContentLoaded', () => {
            const animatedElements = document.querySelectorAll('.scroll-animate');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.1 // 元素進入視窗 10% 時觸發
            });

            animatedElements.forEach(el => {
                observer.observe(el);
            });
        });
    </script>
</body>
</html>
