"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3290,5778],{29991:(e,t,r)=>{r.d(t,{l:()=>i});var n=r(95155),o=r(12115),l=r(40980),s=r(66088);let i=o.forwardRef(({className:e,children:t,...r},o)=>(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("select",{className:(0,l.cn)("flex h-10 w-full appearance-none rounded-md border border-input bg-zinc-950/50 px-3 py-2 text-sm text-zinc-100 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pr-8",e),ref:o,...r,children:t}),(0,n.jsx)(s.A,{className:"absolute right-3 top-2.5 h-4 w-4 opacity-50 pointer-events-none"})]}));i.displayName="Select"},38346:(e,t,r)=>{r.d(t,{h:()=>l});var n=r(12115),o=r(16385);function l(){let[e,t]=(0,n.useState)(null),[r,l]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=!0,r=async()=>{try{let{data:{session:r}}=await o.N.auth.getSession();if(!r?.user){e&&(t(null),l(!1));return}let{data:n,error:s}=await o.N.from("profiles").select("role").eq("id",r.user.id).single();e&&(n?t(n.role):t("user"),l(!1))}catch(r){console.error("Error fetching user role:",r),e&&(t("user"),l(!1))}};r();let{data:{subscription:n}}=o.N.auth.onAuthStateChange((e,n)=>{n?r():t(null)});return()=>{e=!1,n.unsubscribe()}},[]),{role:e,isLoading:r}}},48551:(e,t,r)=>{r.d(t,{K:()=>d});var n=r(95155),o=r(12115),l=r(88743),s=r(80642),i=r(39430),a=r(40980);function d(){let{selectedRoomTypes:e,setSelectedRoomTypes:t}=(0,l.P)(),[r,d]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=()=>{let e=document.getElementById("room-type-filter-anchor");e&&d(e.getBoundingClientRect().bottom<80)};return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[]),(0,o.useEffect)(()=>{let e=document.querySelector("aside");if(!e)return;let t=()=>u(!0),r=()=>u(!1);return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",r),()=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",r)}},[]),(0,n.jsx)(s.N,{children:r&&!c&&(0,n.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},"data-report-control":"always-hide",className:(0,a.cn)("fixed z-[90] flex gap-1.5 p-1.5 bg-zinc-900/95 backdrop-blur-md border border-white/10 rounded-xl shadow-xl","flex-row bottom-8 left-1/2 -translate-x-1/2 items-center max-w-[90vw]","md:flex-col md:left-20 md:top-1/2 md:-translate-y-1/2 md:bottom-auto md:translate-x-0 md:items-stretch md:max-w-none"),children:[(0,n.jsx)("div",{className:(0,a.cn)("text-[9px] text-zinc-500 font-medium overflow-hidden","md:writing-mode-vertical md:text-center md:mb-0.5","whitespace-nowrap px-1"),children:"房型"}),(0,n.jsx)("div",{className:"flex md:flex-col gap-1.5 overflow-x-auto md:overflow-visible max-w-full md:max-w-none pb-2 md:pb-0 scrollbar-thumb-zinc-600 pr-8 md:pr-0",children:l.M.map(r=>(0,n.jsx)("button",{onClick:()=>{t(e.includes(r)?e.filter(e=>e!==r):[...e,r])},className:(0,a.cn)("px-2 py-1 text-[10px] font-medium rounded-lg transition-all hover:scale-105 active:scale-95 whitespace-nowrap",e.includes(r)?"bg-violet-500 text-white shadow-lg shadow-violet-500/20":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-700 hover:text-white"),children:r},r))}),e.length>0&&e.length<l.M.length&&(0,n.jsx)("button",{onClick:()=>t([]),className:(0,a.cn)("text-[9px] text-cyan-400 hover:text-cyan-300 transition-colors whitespace-nowrap px-1","md:mt-1 md:border-t md:border-white/5 md:pt-1 md:text-center md:px-0","border-l border-white/5 pl-1 md:border-l-0 md:pl-0"),children:"清除"})]})})}},60529:(e,t,r)=>{r.d(t,{p:()=>s});var n=r(95155),o=r(12115),l=r(40980);let s=o.forwardRef(({className:e,type:t,...r},o)=>(0,n.jsx)("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-zinc-950/50 px-3 py-2 text-sm text-zinc-100 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...r}));s.displayName="Input"},80642:(e,t,r)=>{r.d(t,{N:()=>v});var n=r(95155),o=r(12115),l=r(39551),s=r(28819),i=r(4524),a=r(15131),d=r(78757),c=r(24866);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class f extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,d.s)(e)&&e.offsetWidth||0,n=(0,d.s)(e)&&e.offsetHeight||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=r-o.width-o.left,o.bottom=n-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function p({children:e,isPresent:t,anchorX:r,anchorY:l,root:s}){let i=(0,o.useId)(),a=(0,o.useRef)(null),d=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:p}=(0,o.useContext)(c.Q),h=function(...e){return o.useCallback(function(...e){return t=>{let r=!1,n=e.map(e=>{let n=u(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():u(e[t],null)}}}}(...e),e)}(a,e.props?.ref??e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:n,top:o,left:c,right:u,bottom:f}=d.current;if(t||!a.current||!e||!n)return;let h="left"===r?`left: ${c}`:`right: ${u}`,m="bottom"===l?`bottom: ${f}`:`top: ${o}`;a.current.dataset.motionPopId=i;let x=document.createElement("style");p&&(x.nonce=p);let b=s??document.head;return b.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${n}px !important;
            ${h}px !important;
            ${m}px !important;
          }
        `),()=>{b.contains(x)&&b.removeChild(x)}},[t]),(0,n.jsx)(f,{isPresent:t,childRef:a,sizeRef:d,children:o.cloneElement(e,{ref:h})})}let h=({children:e,initial:t,isPresent:r,onExitComplete:l,custom:i,presenceAffectsLayout:d,mode:c,anchorX:u,anchorY:f,root:h})=>{let x=(0,s.M)(m),b=(0,o.useId)(),g=!0,v=(0,o.useMemo)(()=>(g=!1,{id:b,initial:t,isPresent:r,custom:i,onExitComplete:e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;l&&l()},register:e=>(x.set(e,!1),()=>x.delete(e))}),[r,x,l]);return d&&g&&(v={...v}),(0,o.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[r]),o.useEffect(()=>{r||x.size||!l||l()},[r]),"popLayout"===c&&(e=(0,n.jsx)(p,{isPresent:r,anchorX:u,anchorY:f,root:h,children:e})),(0,n.jsx)(a.t.Provider,{value:v,children:e})};function m(){return new Map}var x=r(79196);let b=e=>e.key||"";function g(e){let t=[];return o.Children.forEach(e,e=>{(0,o.isValidElement)(e)&&t.push(e)}),t}let v=({children:e,custom:t,initial:r=!0,onExitComplete:a,presenceAffectsLayout:d=!0,mode:c="sync",propagate:u=!1,anchorX:f="left",anchorY:p="top",root:m})=>{let[v,w]=(0,x.xQ)(u),y=(0,o.useMemo)(()=>g(e),[e]),j=u&&!v?[]:y.map(b),E=(0,o.useRef)(!0),N=(0,o.useRef)(y),k=(0,s.M)(()=>new Map),C=(0,o.useRef)(new Set),[z,R]=(0,o.useState)(y),[S,M]=(0,o.useState)(y);(0,i.E)(()=>{E.current=!1,N.current=y;for(let e=0;e<S.length;e++){let t=b(S[e]);j.includes(t)?(k.delete(t),C.current.delete(t)):!0!==k.get(t)&&k.set(t,!1)}},[S,j.length,j.join("-")]);let L=[];if(y!==z){let e=[...y];for(let t=0;t<S.length;t++){let r=S[t],n=b(r);j.includes(n)||(e.splice(t,0,r),L.push(r))}return"wait"===c&&L.length&&(e=L),M(g(e)),R(y),null}let{forceRender:P}=(0,o.useContext)(l.L);return(0,n.jsx)(n.Fragment,{children:S.map(e=>{let o=b(e),l=(!u||!!v)&&(y===S||j.includes(o));return(0,n.jsx)(h,{isPresent:l,initial:(!E.current||!!r)&&void 0,custom:t,presenceAffectsLayout:d,mode:c,root:m,onExitComplete:l?void 0:()=>{if(C.current.has(o)||(C.current.add(o),!k.has(o)))return;k.set(o,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(P?.(),M(N.current),u&&w?.(),a&&a())},anchorX:f,anchorY:p,children:e},o)})})}},97085:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(95155);r(12115);var o=r(37206),l=r(81477),s=r(37717);let i=(0,o.default)(()=>Promise.all([r.e(7776),r.e(4822)]).then(r.bind(r,44822)),{loadableGenerated:{webpack:()=>[null]},ssr:!1});function a({type:e,series:t,options:r,height:o=350,title:a,description:d,className:c,loading:u}){let f=(0,s.A)(),p={chart:{background:"transparent",foreColor:f.text,toolbar:{show:!1}},theme:{mode:"dark",palette:"palette1"},dataLabels:{enabled:!1,style:{colors:[f.text]}},grid:{borderColor:f.grid,strokeDashArray:4},xaxis:{labels:{style:{colors:f.textMuted}},axisBorder:{color:f.border},axisTicks:{color:f.border}},yaxis:{labels:{style:{colors:f.textMuted}}},tooltip:{theme:"dark",style:{fontSize:"12px"},x:{show:!0}},legend:{labels:{colors:f.textMuted}}},h={...p,...r,chart:{...p.chart,...r.chart}};return(0,n.jsxs)(l.Zp,{className:`p-4 ${c}`,children:[(a||d)&&(0,n.jsxs)("div",{className:"mb-4",children:[a&&(0,n.jsx)("h3",{className:"text-lg font-bold text-text-primary mb-1",children:a}),d&&(0,n.jsx)("p",{className:"text-sm text-text-secondary",children:d})]}),u?(0,n.jsx)("div",{className:"flex items-center justify-center",style:{height:o},children:(0,n.jsx)("div",{className:"loader"})}):(0,n.jsx)(i,{options:h,series:t,type:e,height:o,width:"100%"})]})}}}]);