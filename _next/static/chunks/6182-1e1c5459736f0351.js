"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6182],{3083:(e,t,r)=>{r.d(t,{M:()=>l});var n=r(95155),i=r(12115),s=r(97085),a=r(37717);function l({data:e,selectedRooms:t,metric:r,chartId:l}){let o=(0,a.A)(),c=(0,i.useMemo)(()=>({count:{label:"交易筆數",unit:"筆",decimals:0},priceSum:{label:"產權總價",unit:"萬",decimals:0},areaSum:{label:"房屋坪數",unit:"坪",decimals:2}})[r],[r]),d=(0,i.useMemo)(()=>{if(!e||0===t.length)return[];let n=Object.keys(e).sort();return 0===n.length?[]:t.map(t=>({name:t,data:n.map(n=>e[n]?.[t]?.[r]||0)}))},[e,t,r]),x=(0,i.useMemo)(()=>{let t=e?Object.keys(e).sort():[];return{chart:{type:"line",height:350,background:"transparent",toolbar:{show:!1},zoom:{enabled:!1},foreColor:o.text,id:l},colors:o.chartPalette,stroke:{curve:"smooth",width:2},dataLabels:{enabled:!1},xaxis:{categories:t,labels:{style:{colors:o.textMuted}}},yaxis:{title:{text:c.label,style:{color:o.textMuted}},labels:{style:{colors:o.textMuted},formatter:e=>e.toLocaleString("zh-TW",{minimumFractionDigits:0,maximumFractionDigits:0})}},legend:{position:"top",horizontalAlign:"right"},tooltip:{theme:"dark",y:{formatter:e=>`${e.toLocaleString("zh-TW",{minimumFractionDigits:c.decimals,maximumFractionDigits:c.decimals})} ${c.unit}`}},grid:{borderColor:o.grid}}},[e,c,l,o]);return e&&0!==Object.keys(e).length&&0!==t.length?(0,n.jsx)(s.A,{type:"line",series:d,options:x,height:350,className:"w-full"}):(0,n.jsx)("div",{className:"text-zinc-500 text-center p-8",children:"請選擇房型以顯示銷售趨勢"})}},4439:(e,t,r)=>{r.d(t,{m:()=>l});var n=r(95155),i=r(12115),s=r(97085),a=r(37717);function l({data:e,selectedRooms:t,minArea:r,maxArea:l,interval:o,onDataPointClick:c,height:d,chartId:x}){let m=(0,a.A)(),u=(0,i.useMemo)(()=>[{from:0,to:0,color:m.surface||"#27272a",name:"0 戶"},{from:1,to:5,color:"#facc15",name:"1-5 戶"},{from:6,to:20,color:"#fbbf24",name:"6-20 戶"},{from:21,to:50,color:"#f97316",name:"21-50 戶"},{from:51,to:1e4,color:"#dc2626",name:"> 50 戶"}],[m]),{series:h,maxValue:p}=(0,i.useMemo)(()=>{if(!e||0===t.length)return{series:[],maxValue:0};let n=[];for(let e=r;e<l;e+=o){let t=Number.isInteger(o)&&Number.isInteger(r),i=t?e.toFixed(0):e.toFixed(1),s=t?(e+o).toFixed(0):(e+o).toFixed(1);n.push(`${i}-${s}`)}let i=0;return{series:n.map(n=>{let[s,a]=n.split("-").map(parseFloat);return{name:n,data:t.map(t=>{let n=(e[t]||[]).filter(e=>e>=s&&e<a&&e>=r&&e<=l).length;return n>i&&(i=n),n})}}),maxValue:i}},[e,t,r,l,o]),b=(0,i.useMemo)(()=>({chart:{type:"heatmap",height:d||Math.max(400,22*h.length),background:"transparent",toolbar:{show:!1},foreColor:m.text,id:x,events:{dataPointSelection:(e,r,n)=>{if(c){let{seriesIndex:e,dataPointIndex:r}=n,i=n.w.globals.seriesNames[e];c(t[r],i)}}}},plotOptions:{heatmap:{radius:0,useFillColorAsStroke:!0,enableShades:!1,colorScale:{ranges:u}}},dataLabels:{enabled:!0,style:{colors:[({value:e})=>0===e?"transparent":m.text]},formatter:function(e){return 0===e?"":e}},xaxis:{type:"category",categories:t},title:{text:"房型面積分佈熱力圖",align:"center",style:{color:m.text,fontSize:"16px"}},grid:{borderColor:m.grid},tooltip:{theme:"dark",y:{formatter:e=>0===e?"無成交紀錄":`${e} 戶`}}}),[h,t,u,c,m,x,d]);return e&&0!==h.length?(0,n.jsx)(s.A,{type:"heatmap",series:h,options:b,height:b.chart?.height||400,className:"w-full h-full"}):(0,n.jsx)("div",{className:"text-zinc-500 text-center p-8",children:"無面積分佈資料"})}},91156:(e,t,r)=>{r.d(t,{A:()=>n});function n(e){let t=e=>e?String(e).normalize("NFKC").toUpperCase().replace(/\s+/g,""):"",r=t(e["建物型態"]||e.buildingType),n=t(e["主要用途"]||e.mainPurpose),i=t(e["戶別"]||e.unit),s=void 0!==e["房數"]?e["房數"]:e.rooms,a=void 0!==e["房屋面積(坪)"]?parseFloat(e["房屋面積(坪)"]):parseFloat(e.houseArea||0);if(r.includes("住宅大樓")&&i.includes("S")||i.includes("店舖")||i.includes("店面")||i.includes("店鋪"))return"店舖";if(i.includes("事務所")||i.includes("辦公"))return"辦公/事務所";if(r.includes("店舖")||r.includes("店面")||r.includes("店鋪"))return"店舖";if(r.includes("工廠")||r.includes("倉庫")||r.includes("廠辦"))return"廠辦/工廠";if(n.includes("商業")||r.includes("辦公")||r.includes("事務所"))return"辦公/事務所";if((r.includes("住宅大樓")||r.includes("華廈"))&&0===s){if(a>35)return"毛胚";if(a<=35)return"套房"}if("number"==typeof s&&!isNaN(s)){if(1===s)return"1房";if(2===s)return"2房";if(3===s)return"3房";if(4===s)return"4房";if(s>=5)return"5房以上"}return"其他"}},91703:(e,t,r)=>{r.d(t,{I:()=>a});var n=r(95155),i=r(12115),s=r(40980);function a({data:e,viewType:t,selectedRooms:r}){if(!e||0===Object.keys(e).length)return(0,n.jsx)("div",{className:"text-zinc-500 text-center p-8",children:"無銷售速度資料"});let a=Object.keys(e).sort().reverse();return(0,n.jsx)("div",{className:"overflow-x-auto max-h-[600px] border border-white/5 rounded-lg",children:(0,n.jsxs)("table",{className:"w-full text-sm text-left border-collapse",children:[(0,n.jsxs)("thead",{className:"bg-zinc-900 sticky top-0 z-20 shadow-md",children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{rowSpan:2,className:"px-4 py-3 sticky left-0 z-30 bg-zinc-900 border-r border-white/10 font-medium text-white min-w-[120px]",children:"時間"}),r.map(e=>(0,n.jsx)("th",{colSpan:3,className:"px-2 py-2 text-center border-l border-white/5 text-zinc-300 font-medium bg-zinc-900/90",children:e},e)),(0,n.jsx)("th",{colSpan:3,className:"px-2 py-2 text-center border-l-2 border-white/10 text-cyan-400 font-bold bg-zinc-900/90",children:"總計"})]}),(0,n.jsxs)("tr",{children:[r.map((e,t)=>(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)("th",{className:(0,s.cn)("px-2 py-2 text-center text-xs text-zinc-500 font-normal bg-zinc-900/90 border-b border-white/10",0===t&&"border-l border-white/5"),children:"筆數"}),(0,n.jsx)("th",{className:"px-2 py-2 text-center text-xs text-zinc-500 font-normal bg-zinc-900/90 border-b border-white/10",children:"總價(萬)"}),(0,n.jsx)("th",{className:"px-2 py-2 text-center text-xs text-zinc-500 font-normal bg-zinc-900/90 border-b border-white/10",children:"坪數"})]},e)),(0,n.jsx)("th",{className:"px-2 py-2 text-center text-xs text-zinc-400 font-medium bg-zinc-900/90 border-b border-white/10 border-l-2 border-white/10",children:"筆數"}),(0,n.jsx)("th",{className:"px-2 py-2 text-center text-xs text-zinc-400 font-medium bg-zinc-900/90 border-b border-white/10",children:"總價(萬)"}),(0,n.jsx)("th",{className:"px-2 py-2 text-center text-xs text-zinc-400 font-medium bg-zinc-900/90 border-b border-white/10",children:"坪數"})]})]}),(0,n.jsx)("tbody",{className:"divide-y divide-white/5",children:a.map(a=>{let l=e[a]||{},o={count:0,priceSum:0,areaSum:0};return(0,n.jsxs)("tr",{className:"hover:bg-zinc-800/30 transition-colors",children:[(0,n.jsx)("td",{className:"px-4 py-2 sticky left-0 z-10 bg-zinc-950/90 border-r border-white/10 font-mono text-xs text-zinc-400",children:(e=>{if("weekly"===t){let t=e.match(/^(\d{4})-W(\d{1,2})$/);if(t){let r=((e,t)=>{if(!Number.isFinite(e)||!Number.isFinite(t))return"";let r=new Date(Date.UTC(e,0,4)),n=r.getUTCDay()||7,i=new Date(r);i.setUTCDate(r.getUTCDate()-(n-1));let s=new Date(i);s.setUTCDate(i.getUTCDate()+(t-1)*7);let a=new Date(s);a.setUTCDate(s.getUTCDate()+6);let l=`${s.getUTCMonth()+1}/${s.getUTCDate()}`,o=`${a.getUTCMonth()+1}/${a.getUTCDate()}`;return`${l}-${o}`})(parseInt(t[1],10),parseInt(t[2],10));return(0,n.jsxs)("div",{className:"flex flex-col leading-tight text-xs",children:[(0,n.jsx)("span",{children:e}),r&&(0,n.jsx)("span",{className:"text-[9px] text-zinc-500 whitespace-nowrap",children:r})]})}}return e})(a)}),r.map((e,t)=>{let r=l[e];return r?(o.count+=r.count,o.priceSum+=r.priceSum,o.areaSum+=r.areaSum,(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)("td",{className:(0,s.cn)("px-2 py-2 text-center text-zinc-300",0===t&&"border-l border-white/5"),children:r.count>0?r.count.toLocaleString():"-"}),(0,n.jsx)("td",{className:"px-2 py-2 text-center text-zinc-500 font-mono text-xs",children:r.count>0?(0,s.Z)(r.priceSum,0):"-"}),(0,n.jsx)("td",{className:"px-2 py-2 text-center text-zinc-500 font-mono text-xs",children:r.count>0?(0,s.Z)(r.areaSum,1):"-"})]},e)):(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)("td",{className:(0,s.cn)("px-2 py-2 text-center text-zinc-700",0===t&&"border-l border-white/5"),children:"-"}),(0,n.jsx)("td",{className:"px-2 py-2 text-center text-zinc-700",children:"-"}),(0,n.jsx)("td",{className:"px-2 py-2 text-center text-zinc-700",children:"-"})]},e)}),(0,n.jsx)("td",{className:"px-2 py-2 text-center font-bold text-cyan-400 border-l-2 border-white/10",children:o.count.toLocaleString()}),(0,n.jsx)("td",{className:"px-2 py-2 text-center font-bold text-zinc-300 font-mono text-xs",children:(0,s.Z)(o.priceSum,0)}),(0,n.jsx)("td",{className:"px-2 py-2 text-center font-bold text-zinc-300 font-mono text-xs",children:(0,s.Z)(o.areaSum,1)})]},a)})})]})})}}}]);