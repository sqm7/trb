(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4986],{4538:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(95155),l=r(12115),a=r(73321),n=r(5772),i=r(92564),c=r(21628),o=r(18965);function d(){let e=(0,a.useRouter)(),[t,d]=(0,l.useState)(!0),[u,h]=(0,l.useState)(!1),[f,m]=(0,l.useState)(null);return((0,l.useEffect)(()=>{(async()=>{try{let t=(await Promise.all([r.e(9585),r.e(9303)]).then(r.bind(r,39585))).default,s=(0,o.f)();if(await t.init({liffId:s}),!t.isLoggedIn())return void e.push("/");(await t.getFriendship()).friendFlag?(h(!0),setTimeout(()=>e.push("/dashboard"),1500)):(h(!1),d(!1))}catch(e){console.error("LIFF Error:",e),m(e.message),d(!1)}})()},[e]),t)?(0,s.jsxs)("div",{className:"min-h-screen bg-dark-bg flex flex-col items-center justify-center p-6 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-cyan-500/30 border-t-cyan-500 rounded-full animate-spin mb-6"}),(0,s.jsx)("h2",{className:"text-xl text-white font-bold",children:"正在驗證好友狀態..."}),(0,s.jsx)("p",{className:"text-zinc-500 mt-2",children:"請稍候"})]}):u?(0,s.jsxs)("div",{className:"min-h-screen bg-dark-bg flex flex-col items-center justify-center p-6 text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mb-6 ring-1 ring-green-500/50",children:(0,s.jsx)(i.A,{className:"w-10 h-10 text-green-500"})}),(0,s.jsx)("h2",{className:"text-2xl text-white font-bold mb-2",children:"驗證成功！"}),(0,s.jsx)("p",{className:"text-zinc-400",children:"正在進入系統..."})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-dark-bg flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,s.jsx)(n.default,{src:"/images/loginbackground.jpg",alt:"Background",fill:!0,className:"object-cover opacity-10 blur-sm"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-zinc-950/80 via-zinc-950 to-zinc-950"})]}),(0,s.jsxs)("div",{className:"relative z-10 max-w-md w-full bg-zinc-900/80 backdrop-blur-xl border border-white/10 p-8 rounded-3xl shadow-2xl text-center space-y-8 animate-in zoom-in-95 fade-in duration-500",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"relative inline-flex items-center justify-center w-20 h-20 rounded-full bg-[#06C755]/10 border border-[#06C755]/20 mb-4 overflow-hidden",children:(0,s.jsx)(n.default,{src:"/trb/logo-type-a.jpg",alt:"Logo",fill:!0,className:"object-cover"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"啟用您的帳號"}),(0,s.jsxs)("p",{className:"text-zinc-400 leading-relaxed",children:["為了提供更完整的即時通知與客服支援，",(0,s.jsx)("br",{}),"請先加入我們的 LINE 官方帳號。"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("a",{href:"https://line.me/R/ti/p/@425ohbmf",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-4 px-6 bg-[#06C755] hover:bg-[#05b34c] text-white font-bold rounded-xl shadow-lg shadow-green-900/20 transition-all transform hover:-translate-y-1 flex items-center justify-center gap-3",onClick:()=>{setTimeout(()=>{window.location.reload()},3e3)},children:[(0,s.jsx)(i.A,{className:"w-6 h-6 fill-current"}),"加入好友並啟用"]}),(0,s.jsxs)("div",{className:"text-xs text-zinc-500 pt-2 space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{children:"手機版將直接開啟 App，電腦版請掃描 QR Code 驗證"}),(0,s.jsx)("p",{className:"opacity-70",children:"加入後請點擊上方按鈕或重新整理頁面"})]}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsxs)("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 text-zinc-400 hover:text-white hover:bg-white/10 transition-all text-xs",children:[(0,s.jsx)(c.A,{className:"w-3 h-3"}),"我已加入好友，立即驗證"]})})]})]})]})]})}},18965:(e,t,r)=>{"use strict";r.d(t,{f:()=>s});function s(){let e=window.location.hostname;return"sqm7.github.io"===e&&window.location.pathname.startsWith("/trb")||"localhost"===e||"127.0.0.1"===e?"2008934556-oxSVZdHU":"2008934556-Ud86tczR"}},21172:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return l}});let s=r(12115);function l(e,t){let r=(0,s.useRef)(null),l=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(r.current=a(e,s)),t&&(l.current=a(t,s))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},21628:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(78340).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},50219:(e,t,r)=>{Promise.resolve().then(r.bind(r,4538))},73321:(e,t,r)=>{"use strict";var s=r(74645);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},78340:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(12115);let l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:i="",children:c,iconNode:o,...d},u)=>(0,s.createElement)("svg",{ref:u,...n,width:t,height:t,stroke:e,strokeWidth:l?24*Number(r)/Number(t):r,className:a("lucide",i),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"},...d},[...o.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(c)?c:[c]])),c=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...n},c)=>(0,s.createElement)(i,{ref:c,iconNode:t,className:a(`lucide-${l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...n}));return r.displayName=l(e),r}},92564:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(78340).A)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]])}},e=>{e.O(0,[5772,8441,3794,7358],()=>e(e.s=50219)),_N_E=e.O()}]);