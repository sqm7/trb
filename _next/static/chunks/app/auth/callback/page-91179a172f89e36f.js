(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6769],{13022:(e,s,t)=>{Promise.resolve().then(t.bind(t,69757))},16385:(e,s,t)=>{"use strict";t.d(s,{N:()=>n});var c=t(36228);let r="https://zxbmbbfrzbtuueysicoc.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp4Ym1iYmZyemJ0dXVleXNpY29jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA2ODg5ODksImV4cCI6MjA2NjI2NDk4OX0.1IUynv5eK1xF_3pb-oasqaTrPvbeAOC4Sc1oykPBy4M";r&&i||console.error("Missing Supabase URL or Key");let n=(0,c.UU)(r,i)},69757:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var c=t(95155),r=t(12115),i=t(73321),n=t(16385);function a(){let e=(0,i.useRouter)(),s=(0,i.useSearchParams)(),[t,a]=(0,r.useState)(null),[l,o]=(0,r.useState)("loading");return((0,r.useEffect)(()=>{let c=s.get("code"),r=s.get("next")??"/settings",i=s.get("error_description");if(i){a(i),o("error");return}c?(async()=>{try{let{data:s,error:t}=await n.N.auth.exchangeCodeForSession(c);if(t)throw t;console.log("Auth callback success:",s.user?.email);let{data:i,error:a}=await n.N.auth.getSession();a&&console.warn("Session refresh warning:",a),o("success"),setTimeout(()=>{e.replace(r)},2e3)}catch(e){console.error("Auth callback error:",e),a(e.message||"Verification failed"),o("error")}})():t||e.push("/")},[s,e]),"error"===l)?(0,c.jsxs)("div",{className:"text-center space-y-4 pt-20",children:[(0,c.jsx)("div",{className:"text-red-500 text-xl font-bold",children:"驗證失敗"}),(0,c.jsx)("p",{className:"text-zinc-400",children:t}),(0,c.jsx)("div",{className:"p-4 bg-zinc-800 rounded text-sm text-left inline-block max-w-lg overflow-auto text-zinc-500",children:(0,c.jsxs)("p",{children:["Debug info: code=",s.get("code")?"present":"missing"]})}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{onClick:()=>e.push("/settings"),className:"text-indigo-400 hover:text-indigo-300 underline",children:"返回設定"})})]}):"success"===l?(0,c.jsxs)("div",{className:"text-center space-y-4 pt-20",children:[(0,c.jsx)("div",{className:"text-green-500 text-xl font-bold",children:"驗證成功！"}),(0,c.jsx)("p",{className:"text-zinc-400",children:"您的電子郵件已成功更新。"}),(0,c.jsx)("p",{className:"text-zinc-500 text-sm",children:"正在跳轉回設定頁面..."})]}):(0,c.jsxs)("div",{className:"text-center space-y-4 pt-20",children:[(0,c.jsx)("div",{className:"w-12 h-12 border-4 border-cyan-500/30 border-t-cyan-500 rounded-full animate-spin mx-auto"}),(0,c.jsx)("p",{className:"text-zinc-400",children:"正在驗證身份並更新資料，請稍候..."})]})}function l(){return(0,c.jsx)("div",{className:"min-h-screen flex flex-col items-center bg-zinc-950 text-white",children:(0,c.jsx)(r.Suspense,{fallback:(0,c.jsx)("div",{className:"text-zinc-500 pt-20",children:"Loading..."}),children:(0,c.jsx)(a,{})})})}}},e=>{e.O(0,[4764,8441,3794,7358],()=>e(e.s=13022)),_N_E=e.O()}]);