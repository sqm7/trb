(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3321],{1610:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(78340).A)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]])},21362:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(78340).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},24371:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(78340).A)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]])},48861:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(95155),l=a(12115),n=a(16385),i=a(73321),c=a(86120),d=a(78340);let r=(0,d.A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var o=a(53961),x=a(84980),p=a(80723),m=a(6296),u=a(66088),h=a(61878),b=a(50049),g=a(21362),v=a(1610);let f=(0,d.A)("drafting-compass",[["path",{d:"m12.99 6.74 1.93 3.44",key:"iwagvd"}],["path",{d:"M19.136 12a10 10 0 0 1-14.271 0",key:"ppmlo4"}],["path",{d:"m21 21-2.16-3.84",key:"vylbct"}],["path",{d:"m3 21 8.02-14.26",key:"1ssaw4"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}]]);var j=a(24371);let y=(0,d.A)("circle-parking",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9 17V7h4a3 3 0 0 1 0 6H9",key:"1dfk2c"}]]);var N=a(55243);let z=[{label:"台北市",code:"a"},{label:"台中市",code:"b"},{label:"基隆市",code:"c"},{label:"台南市",code:"d"},{label:"高雄市",code:"e"},{label:"新北市",code:"f"},{label:"宜蘭縣",code:"g"},{label:"桃園市",code:"h"},{label:"嘉義市",code:"i"},{label:"新竹縣",code:"j"},{label:"苗栗縣",code:"k"},{label:"南投縣",code:"m"},{label:"彰化縣",code:"n"},{label:"新竹市",code:"o"},{label:"雲林縣",code:"p"},{label:"嘉義縣",code:"q"},{label:"屏東縣",code:"t"},{label:"花蓮縣",code:"u"},{label:"台東縣",code:"v"},{label:"金門縣",code:"w"},{label:"澎湖縣",code:"x"},{label:"連江縣",code:"z"}];function w(){let e=(0,i.useRouter)(),{isAdmin:t,isLoading:a}=(0,c.b)(),[d,w]=(0,l.useState)(z[0]),[k,_]=(0,l.useState)([]),[A,C]=(0,l.useState)(!0),[M,S]=(0,l.useState)(""),[q,L]=(0,l.useState)("all"),[$,E]=(0,l.useState)(null),[D,H]=(0,l.useState)(null),[O,V]=(0,l.useState)(!1),{permissions:I}=(0,c.b)();(0,l.useEffect)(()=>{if(!a&&t&&I){let{accessibleCounties:e,isSuperAdmin:t}=I;if(!t&&null!==e&&!e.includes(d.code)){let t=z.find(t=>e.includes(t.code));t&&w(t)}}},[a,t,I,d]),(0,l.useEffect)(()=>{!a&&t&&P()},[a,t,d,q]);let P=async()=>{C(!0);try{let e=`${d.code.toLowerCase()}_projects`,t=n.N.from(e).select("*");"all"!==q&&(t=t.eq("enrichment_status",q));let{data:a,error:s}=await t.order("project_name",{ascending:!0}).limit(200);if(s)throw s;_(a||[])}catch(e){console.error("Error fetching projects:",e)}finally{C(!1)}},R=async e=>{H(e.id);try{let t=`${d.code.toLowerCase()}_projects`,{error:a}=await n.N.from(t).update({...e,last_enriched_at:new Date().toISOString()}).eq("id",e.id);if(a)throw a;_(t=>t.map(t=>t.id===e.id?{...e}:t))}catch(e){alert("儲存失敗："+e.message)}finally{H(null)}},T=async()=>{V(!0);try{let e=`${d.code.toLowerCase()}_projects`,t=k.filter(e=>"pending"===e.enrichment_status).slice(0,10);if(0===t.length)return void alert("當前列表中沒有「待補」的建案。");let a=t.map(e=>e.id),{error:s}=await n.N.from(e).update({enrichment_status:"requested"}).in("id",a);if(s)throw s;_(e=>e.map(e=>a.includes(e.id)?{...e,enrichment_status:"requested"}:e)),alert(`已成功將 ${a.length} 筆建案「委託」給 Agent。現在請在對話框輸入 /batch-enrich，我將會立刻開始處理！`)}catch(e){alert("操作失敗："+e.message)}finally{V(!1)}},W=({status:e})=>{switch(e){case"done":return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-medium bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 rounded-full",children:[(0,s.jsx)(r,{className:"h-3 w-3"})," 完備"]});case"requested":return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-medium bg-amber-500/10 text-amber-400 border border-amber-500/20 rounded-full animate-pulse",children:[(0,s.jsx)(o.A,{className:"h-3 w-3"})," 代辦 (Agent)"]});default:return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-medium bg-zinc-800 text-zinc-400 border border-zinc-700 rounded-full",children:[(0,s.jsx)(x.A,{className:"h-3 w-3"})," 待補 (人工)"]})}},B=k.filter(e=>e.project_name.toLowerCase().includes(M.toLowerCase())||e.developer?.toLowerCase().includes(M.toLowerCase())||e.affiliated_companies?.toLowerCase().includes(M.toLowerCase()));return a?null:t?(0,s.jsx)("div",{className:"min-h-screen bg-[#0f1117] text-gray-100 p-4 md:p-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto font-sans",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-5",children:[(0,s.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"p-2 hover:bg-zinc-800 rounded-full transition-colors text-zinc-500 hover:text-white",children:(0,s.jsx)(p.A,{className:"h-6 w-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h1",{className:"text-3xl font-black text-white tracking-tight",children:"建案數據中控台"}),(0,s.jsx)("span",{className:"px-2 py-0.5 bg-indigo-500/20 text-indigo-400 text-[10px] font-bold rounded uppercase tracking-widest",children:"Admin v2.0"})]}),(0,s.jsx)("p",{className:"text-zinc-500 text-sm mt-1",children:"即時管理全台建案規格與補全狀態"})]})]}),(0,s.jsxs)("button",{onClick:T,disabled:O,className:"flex items-center gap-2 px-5 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/20 transition-all active:scale-95 disabled:opacity-50",children:[O?(0,s.jsx)(m.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(o.A,{className:"h-4 w-4"}),"委託 Agent 補全數據 (下 10 筆)"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 mb-8 bg-zinc-900/50 p-4 rounded-2xl border border-zinc-800/50 backdrop-blur-sm",children:[(0,s.jsxs)("div",{className:"md:col-span-2 relative",children:[(0,s.jsx)("select",{value:d.code,onChange:e=>w(z.find(t=>t.code===e.target.value)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-sm font-bold focus:ring-2 focus:ring-indigo-500/50 outline-none appearance-none cursor-pointer",children:z.map(e=>{let t=I?.isSuperAdmin||I?.accessibleCounties===null||I?.accessibleCounties?.includes(e.code);return(0,s.jsxs)("option",{value:e.code,disabled:!t,className:t?"":"text-zinc-600 bg-zinc-900",children:[e.label," ",t?"":"(無權限)"]},e.code)})}),(0,s.jsx)(u.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-600 pointer-events-none"})]}),(0,s.jsxs)("div",{className:"md:col-span-6 relative",children:[(0,s.jsx)(h.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-600"}),(0,s.jsx)("input",{type:"text",placeholder:"搜尋建案名稱、建設公司、關係企業...",value:M,onChange:e=>S(e.target.value),className:"w-full bg-zinc-950 border border-zinc-800 rounded-xl pl-11 pr-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500/50 outline-none"})]}),(0,s.jsxs)("div",{className:"md:col-span-2 relative",children:[(0,s.jsxs)("select",{value:q,onChange:e=>L(e.target.value),className:"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500/50 outline-none appearance-none cursor-pointer",children:[(0,s.jsx)("option",{value:"all",children:"全部狀態"}),(0,s.jsx)("option",{value:"requested",children:"代辦 (Agent)"}),(0,s.jsx)("option",{value:"pending",children:"待補 (人工)"}),(0,s.jsx)("option",{value:"done",children:"完備"})]}),(0,s.jsx)(u.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-600 pointer-events-none"})]}),(0,s.jsxs)("div",{className:"md:col-span-2 flex items-center justify-center text-zinc-600 text-xs font-mono",children:["Count: ",B.length]})]}),(0,s.jsx)("div",{className:"space-y-4",children:A?(0,s.jsxs)("div",{className:"py-20 flex flex-col items-center gap-4",children:[(0,s.jsx)(m.A,{className:"h-10 w-10 text-indigo-500 animate-spin"}),(0,s.jsx)("span",{className:"text-zinc-500 font-medium",children:"盤點數據中..."})]}):0===B.length?(0,s.jsx)("div",{className:"py-20 text-center text-zinc-500 border-2 border-dashed border-zinc-800 rounded-3xl",children:"尚無符合條件的數據"}):B.map(e=>{let t=$===e.id;return(0,s.jsxs)("div",{className:`group border transition-all duration-300 rounded-2xl overflow-hidden ${t?"bg-zinc-900 border-indigo-500/50 shadow-2xl shadow-indigo-500/10":"bg-zinc-900/40 border-zinc-800 hover:border-zinc-700"}`,children:[(0,s.jsxs)("div",{onClick:()=>E(t?null:e.id),className:"px-6 py-5 cursor-pointer flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,s.jsx)("div",{className:`p-2 rounded-xl transition-colors ${t?"bg-indigo-500 text-white":"bg-zinc-800 text-zinc-400 group-hover:bg-zinc-700"}`,children:(0,s.jsx)(b.A,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-bold text-white group-hover:text-indigo-400 transition-colors",children:e.project_name}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,s.jsx)("span",{className:"text-xs text-zinc-500 font-medium",children:e.developer||"建商未載"}),(0,s.jsx)("span",{className:"w-1 h-1 bg-zinc-700 rounded-full"}),(0,s.jsx)("span",{className:"text-[10px] text-zinc-600 uppercase font-mono tracking-tighter",children:e.id.split("-")[0]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-8",children:[(0,s.jsx)("div",{className:"hidden md:block",children:(0,s.jsx)(W,{status:e.enrichment_status})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-[10px] text-zinc-600 font-bold uppercase tracking-widest leading-none",children:"Last Sync"}),(0,s.jsx)("p",{className:"text-xs text-zinc-400 mt-1",children:e.last_enriched_at?new Date(e.last_enriched_at).toLocaleDateString("zh-TW"):"-"})]}),(0,s.jsx)(g.A,{className:`h-5 w-5 text-zinc-600 transition-transform duration-300 ${t?"rotate-90 text-indigo-400":""}`})]})]})]}),t&&(0,s.jsx)("div",{className:"px-6 pb-6 pt-2 border-t border-zinc-800 animate-in slide-in-from-top-4 duration-300",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-x-8 gap-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-indigo-400",children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"開發與關係企業"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"投資建設"}),(0,s.jsx)("input",{type:"text",value:e.developer||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,developer:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 focus:border-indigo-500 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"關係企業"}),(0,s.jsx)("input",{type:"text",value:e.affiliated_companies||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,affiliated_companies:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 focus:border-indigo-500 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"工程營造"}),(0,s.jsx)("input",{type:"text",value:e.contractor||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,contractor:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 focus:border-indigo-500 outline-none"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-indigo-400",children:[(0,s.jsx)(f,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"規劃與案名"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"建築設計"}),(0,s.jsx)("input",{type:"text",value:e.architect||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,architect:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 focus:border-indigo-500 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"代銷企劃"}),(0,s.jsx)("input",{type:"text",value:e.sales_agent||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,sales_agent:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 focus:border-indigo-500 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"建造執照"}),(0,s.jsx)("input",{type:"text",value:e.construction_license||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,construction_license:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 focus:border-indigo-500 outline-none"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-indigo-400",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"基地與規格"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"基地規模(坪)"}),(0,s.jsx)("input",{type:"text",value:e.site_area||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,site_area:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"公設比"}),(0,s.jsx)("input",{type:"text",value:e.public_ratio||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,public_ratio:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"地上層"}),(0,s.jsx)("input",{type:"text",value:e.total_floors||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,total_floors:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"地下層"}),(0,s.jsx)("input",{type:"text",value:e.basement_floors||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,basement_floors:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"土地使用分區 (新)"}),(0,s.jsx)("input",{type:"text",value:e.land_use_zoning||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,land_use_zoning:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"地號"}),(0,s.jsx)("input",{type:"text",value:e.land_plot_number||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,land_plot_number:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"社區戶數"}),(0,s.jsx)("input",{type:"number",value:e.community_unit_count||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,community_unit_count:parseInt(t.target.value)||0}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"結構類型"}),(0,s.jsx)("input",{type:"text",value:e.structure||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,structure:t.target.value}:a)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-indigo-400",children:[(0,s.jsx)(y,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"車位與狀態"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"車位/數量"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"型態",value:e.parking_type||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,parking_type:t.target.value}:a)),className:"w-2/3 bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"}),(0,s.jsx)("input",{type:"text",placeholder:"數",value:e.parking_count||"",onChange:t=>_(a=>a.map(a=>a.id===e.id?{...a,parking_count:t.target.value}:a)),className:"w-1/3 bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"標記狀態"}),(0,s.jsx)("div",{className:"flex gap-1",children:[{val:"requested",label:"代辦"},{val:"pending",label:"待補"},{val:"done",label:"完備"}].map(t=>(0,s.jsx)("button",{onClick:()=>_(a=>a.map(a=>a.id===e.id?{...a,enrichment_status:t.val}:a)),className:`flex-1 py-1 rounded text-[9px] font-bold border transition-colors ${e.enrichment_status===t.val?"bg-indigo-500 border-indigo-400 text-white":"bg-zinc-950 border-zinc-800 text-zinc-600 hover:text-zinc-400"}`,children:t.label},t.val))})]}),(0,s.jsxs)("button",{onClick:()=>R(e),disabled:D===e.id,className:"w-full mt-4 flex items-center justify-center gap-2 py-3 bg-white text-black hover:bg-zinc-200 rounded-xl font-black text-xs uppercase transition-all shadow-xl shadow-white/5 active:scale-95 disabled:opacity-50",children:[D===e.id?(0,s.jsx)(m.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(N.A,{className:"h-4 w-4"}),"確認並儲存變更"]})]})]})]})})]},e.id)})})]})}):(0,s.jsx)("div",{className:"p-8 text-center text-white",children:"權限不足"})}},50049:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(78340).A)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]])},50665:(e,t,a)=>{Promise.resolve().then(a.bind(a,48861))},53961:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(78340).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},66088:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(78340).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},84980:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(78340).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])}},e=>{e.O(0,[4764,5969,280,8441,3794,7358],()=>e(e.s=50665)),_N_E=e.O()}]);