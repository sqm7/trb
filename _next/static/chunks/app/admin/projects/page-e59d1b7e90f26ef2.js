(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3321],{42401:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var l=s(95155),n=s(12115),a=s(16385),i=s(73321),c=s(86120),r=s(12651),d=s(53961),o=s(84980),x=s(80723),p=s(6296),m=s(66088),u=s(61878),b=s(50049),h=s(21362),g=s(1610),j=s(23250),f=s(24371),v=s(33247),N=s(55243),z=s(95057),w=s(33210),y=s(13545),_=s(8875);let k=[{label:"台北市",code:"a"},{label:"台中市",code:"b"},{label:"基隆市",code:"c"},{label:"台南市",code:"d"},{label:"高雄市",code:"e"},{label:"新北市",code:"f"},{label:"宜蘭縣",code:"g"},{label:"桃園市",code:"h"},{label:"嘉義市",code:"i"},{label:"新竹縣",code:"j"},{label:"苗栗縣",code:"k"},{label:"南投縣",code:"m"},{label:"彰化縣",code:"n"},{label:"新竹市",code:"o"},{label:"雲林縣",code:"p"},{label:"嘉義縣",code:"q"},{label:"屏東縣",code:"t"},{label:"花蓮縣",code:"u"},{label:"台東縣",code:"v"},{label:"金門縣",code:"w"},{label:"澎湖縣",code:"x"},{label:"連江縣",code:"z"}];function C(){let e=(0,i.useRouter)(),{isAdmin:t,isLoading:s}=(0,c.b)(),[C,A]=(0,n.useState)(k[0]),[S,L]=(0,n.useState)([]),[$,q]=(0,n.useState)(!0),[E,O]=(0,n.useState)(""),[D,I]=(0,n.useState)("all"),[B,M]=(0,n.useState)(null),[P,R]=(0,n.useState)(null),[T,W]=(0,n.useState)(!1),[F,G]=(0,n.useState)(null),[H,J]=(0,n.useState)([]),[K,Q]=(0,n.useState)(!1),{permissions:U}=(0,c.b)();(0,n.useEffect)(()=>{if(!s&&t&&U){let{accessibleCounties:e,isSuperAdmin:t}=U;if(!t&&null!==e&&!e.includes(C.code)){let t=k.find(t=>e.includes(t.code));t&&A(t)}}},[s,t,U,C]),(0,n.useEffect)(()=>{!s&&t&&V()},[s,t,C,D]);let V=async()=>{q(!0);try{let e=`${C.code.toLowerCase()}_projects`,t=a.N.from(e).select("*");"all"!==D&&(t=t.eq("enrichment_status",D));let{data:s,error:l}=await t.order("project_name",{ascending:!0}).limit(200);if(l)throw l;L(s||[])}catch(e){console.error("Error fetching projects:",e)}finally{q(!1)}},X=async e=>{R(e.id);try{let t=`${C.code.toLowerCase()}_projects`,{error:s}=await a.N.from(t).update({...e,last_enriched_at:new Date().toISOString()}).eq("id",e.id);if(s)throw s;L(t=>t.map(t=>t.id===e.id?{...e}:t))}catch(e){alert("儲存失敗："+e.message)}finally{R(null)}},Y=async()=>{W(!0);try{let e=`${C.code.toLowerCase()}_projects`,t=S.filter(e=>"pending"===e.enrichment_status).slice(0,10);if(0===t.length)return void alert("當前列表中沒有「待補」的建案。");let s=t.map(e=>e.id),{error:l}=await a.N.from(e).update({enrichment_status:"requested"}).in("id",s);if(l)throw l;L(e=>e.map(e=>s.includes(e.id)?{...e,enrichment_status:"requested"}:e)),alert(`已成功將 ${s.length} 筆建案「委託」給 Agent。現在請在對話框輸入 /batch-enrich，我將會立刻開始處理！`)}catch(e){alert("操作失敗："+e.message)}finally{W(!1)}},Z=async e=>{G(e),Q(!0);try{let t=C.code.toLowerCase(),s=`${t}_lvr_land_a`,{data:l,error:n}=await a.N.from(s).select("*").eq("建案名稱",e.project_name);if(n)throw n;J(l||[])}catch(e){console.error("Error fetching transactions:",e),alert("無法讀取實價登錄資料："+e.message),G(null)}finally{Q(!1)}},ee=({status:e})=>{switch(e){case"done":return(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-medium bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 rounded-full",children:[(0,l.jsx)(r.A,{className:"h-3 w-3"})," 完備"]});case"requested":return(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-medium bg-amber-500/10 text-amber-400 border border-amber-500/20 rounded-full animate-pulse",children:[(0,l.jsx)(d.A,{className:"h-3 w-3"})," 代辦 (Agent)"]});default:return(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-medium bg-zinc-800 text-zinc-400 border border-zinc-700 rounded-full",children:[(0,l.jsx)(o.A,{className:"h-3 w-3"})," 待補 (人工)"]})}},et=S.filter(e=>e.project_name.toLowerCase().includes(E.toLowerCase())||e.developer?.toLowerCase().includes(E.toLowerCase())||e.affiliated_companies?.toLowerCase().includes(E.toLowerCase()));return s?null:t?(0,l.jsxs)("div",{className:"min-h-screen bg-[#0f1117] text-gray-100 p-4 md:p-8",children:[(0,l.jsxs)("div",{className:"max-w-7xl mx-auto font-sans",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-10",children:[(0,l.jsxs)("div",{className:"flex items-center gap-5",children:[(0,l.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"p-2 hover:bg-zinc-800 rounded-full transition-colors text-zinc-500 hover:text-white",children:(0,l.jsx)(x.A,{className:"h-6 w-6"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("h1",{className:"text-3xl font-black text-white tracking-tight",children:"建案數據中控台"}),(0,l.jsx)("span",{className:"px-2 py-0.5 bg-indigo-500/20 text-indigo-400 text-[10px] font-bold rounded uppercase tracking-widest",children:"Admin v2.0"})]}),(0,l.jsx)("p",{className:"text-zinc-500 text-sm mt-1",children:"即時管理全台建案規格與補全狀態"})]})]}),(0,l.jsxs)("button",{onClick:Y,disabled:T,className:"flex items-center gap-2 px-5 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/20 transition-all active:scale-95 disabled:opacity-50",children:[T?(0,l.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,l.jsx)(d.A,{className:"h-4 w-4"}),"委託 Agent 補全數據 (下 10 筆)"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 mb-8 bg-zinc-900/50 p-4 rounded-2xl border border-zinc-800/50 backdrop-blur-sm",children:[(0,l.jsxs)("div",{className:"md:col-span-2 relative",children:[(0,l.jsx)("select",{value:C.code,onChange:e=>A(k.find(t=>t.code===e.target.value)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-sm font-bold focus:ring-2 focus:ring-indigo-500/50 outline-none appearance-none cursor-pointer",children:k.map(e=>{let t=U?.isSuperAdmin||U?.accessibleCounties===null||U?.accessibleCounties?.includes(e.code);return(0,l.jsxs)("option",{value:e.code,disabled:!t,className:t?"":"text-zinc-600 bg-zinc-900",children:[e.label," ",t?"":"(無權限)"]},e.code)})}),(0,l.jsx)(m.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-600 pointer-events-none"})]}),(0,l.jsxs)("div",{className:"md:col-span-6 relative",children:[(0,l.jsx)(u.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-600"}),(0,l.jsx)("input",{type:"text",placeholder:"搜尋建案名稱、建設公司、關係企業...",value:E,onChange:e=>O(e.target.value),className:"w-full bg-zinc-950 border border-zinc-800 rounded-xl pl-11 pr-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500/50 outline-none"})]}),(0,l.jsxs)("div",{className:"md:col-span-2 relative",children:[(0,l.jsxs)("select",{value:D,onChange:e=>I(e.target.value),className:"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500/50 outline-none appearance-none cursor-pointer",children:[(0,l.jsx)("option",{value:"all",children:"全部狀態"}),(0,l.jsx)("option",{value:"requested",children:"代辦 (Agent)"}),(0,l.jsx)("option",{value:"pending",children:"待補 (人工)"}),(0,l.jsx)("option",{value:"done",children:"完備"})]}),(0,l.jsx)(m.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-600 pointer-events-none"})]}),(0,l.jsxs)("div",{className:"md:col-span-2 flex items-center justify-center text-zinc-600 text-xs font-mono",children:["Count: ",et.length]})]}),(0,l.jsx)("div",{className:"space-y-4",children:$?(0,l.jsxs)("div",{className:"py-20 flex flex-col items-center gap-4",children:[(0,l.jsx)(p.A,{className:"h-10 w-10 text-indigo-500 animate-spin"}),(0,l.jsx)("span",{className:"text-zinc-500 font-medium",children:"盤點數據中..."})]}):0===et.length?(0,l.jsx)("div",{className:"py-20 text-center text-zinc-500 border-2 border-dashed border-zinc-800 rounded-3xl",children:"尚無符合條件的數據"}):et.map(e=>{let t=B===e.id;return(0,l.jsxs)("div",{className:`group border transition-all duration-300 rounded-2xl overflow-hidden ${t?"bg-zinc-900 border-indigo-500/50 shadow-2xl shadow-indigo-500/10":"bg-zinc-900/40 border-zinc-800 hover:border-zinc-700"}`,children:[(0,l.jsxs)("div",{onClick:()=>M(t?null:e.id),className:"px-6 py-5 cursor-pointer flex items-center justify-between gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,l.jsx)("div",{className:`p-2 rounded-xl transition-colors ${t?"bg-indigo-500 text-white":"bg-zinc-800 text-zinc-400 group-hover:bg-zinc-700"}`,children:(0,l.jsx)(b.A,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-base font-bold text-white group-hover:text-indigo-400 transition-colors",children:e.project_name}),(0,l.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,l.jsx)("span",{className:"text-xs text-zinc-500 font-medium",children:e.developer||"建商未載"}),(0,l.jsx)("span",{className:"w-1 h-1 bg-zinc-700 rounded-full"}),(0,l.jsx)("span",{className:"text-[10px] text-zinc-600 uppercase font-mono tracking-tighter",children:e.id.split("-")[0]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-8",children:[(0,l.jsx)("div",{className:"hidden md:block",children:(0,l.jsx)(ee,{status:e.enrichment_status})}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("p",{className:"text-[10px] text-zinc-600 font-bold uppercase tracking-widest leading-none",children:"Last Sync"}),(0,l.jsx)("p",{className:"text-xs text-zinc-400 mt-1",children:e.last_enriched_at?new Date(e.last_enriched_at).toLocaleDateString("zh-TW"):"-"})]}),(0,l.jsx)(h.A,{className:`h-5 w-5 text-zinc-600 transition-transform duration-300 ${t?"rotate-90 text-indigo-400":""}`})]})]})]}),t&&(0,l.jsx)("div",{className:"px-6 pb-6 pt-2 border-t border-zinc-800 animate-in slide-in-from-top-4 duration-300",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-x-8 gap-y-6",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-indigo-400",children:[(0,l.jsx)(g.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"開發與關係企業"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"投資建設"}),(0,l.jsx)("input",{type:"text",value:e.developer||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,developer:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 focus:border-indigo-500 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"關係企業"}),(0,l.jsx)("input",{type:"text",value:e.affiliated_companies||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,affiliated_companies:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 focus:border-indigo-500 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"工程營造"}),(0,l.jsx)("input",{type:"text",value:e.contractor||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,contractor:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 focus:border-indigo-500 outline-none"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-indigo-400",children:[(0,l.jsx)(j.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"規劃與案名"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"建築設計"}),(0,l.jsx)("input",{type:"text",value:e.architect||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,architect:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 focus:border-indigo-500 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"代銷企劃"}),(0,l.jsx)("input",{type:"text",value:e.sales_agent||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,sales_agent:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 focus:border-indigo-500 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"建造執照"}),(0,l.jsx)("input",{type:"text",value:e.construction_license||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,construction_license:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 focus:border-indigo-500 outline-none"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-indigo-400",children:[(0,l.jsx)(f.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"基地與規格"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"基地規模(坪)"}),(0,l.jsx)("input",{type:"text",value:e.site_area||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,site_area:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"公設比"}),(0,l.jsx)("input",{type:"text",value:e.public_ratio||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,public_ratio:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"地上層"}),(0,l.jsx)("input",{type:"text",value:e.total_floors||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,total_floors:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"地下層"}),(0,l.jsx)("input",{type:"text",value:e.basement_floors||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,basement_floors:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"土地使用分區 (新)"}),(0,l.jsx)("input",{type:"text",value:e.land_use_zoning||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,land_use_zoning:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"地號"}),(0,l.jsx)("input",{type:"text",value:e.land_plot_number||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,land_plot_number:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"社區戶數"}),(0,l.jsx)("input",{type:"number",value:e.community_unit_count||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,community_unit_count:parseInt(t.target.value)||0}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]}),(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"結構類型"}),(0,l.jsx)("input",{type:"text",value:e.structure||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,structure:t.target.value}:s)),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-indigo-400",children:[(0,l.jsx)(v.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"車位與狀態"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"車位/數量"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"text",placeholder:"型態",value:e.parking_type||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,parking_type:t.target.value}:s)),className:"w-2/3 bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"}),(0,l.jsx)("input",{type:"text",placeholder:"數",value:e.parking_count||"",onChange:t=>L(s=>s.map(s=>s.id===e.id?{...s,parking_count:t.target.value}:s)),className:"w-1/3 bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-1.5 text-xs text-zinc-300 outline-none"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-[10px] text-zinc-600 font-bold block mb-1",children:"標記狀態"}),(0,l.jsx)("div",{className:"flex gap-1",children:[{val:"requested",label:"代辦"},{val:"pending",label:"待補"},{val:"done",label:"完備"}].map(t=>(0,l.jsx)("button",{onClick:()=>L(s=>s.map(s=>s.id===e.id?{...s,enrichment_status:t.val}:s)),className:`flex-1 py-1 rounded text-[9px] font-bold border transition-colors ${e.enrichment_status===t.val?"bg-indigo-500 border-indigo-400 text-white":"bg-zinc-950 border-zinc-800 text-zinc-600 hover:text-zinc-400"}`,children:t.label},t.val))})]}),(0,l.jsxs)("button",{onClick:()=>X(e),disabled:P===e.id,className:"w-full mt-4 flex items-center justify-center gap-2 py-3 bg-white text-black hover:bg-zinc-200 rounded-xl font-black text-xs uppercase transition-all shadow-xl shadow-white/5 active:scale-95 disabled:opacity-50",children:[P===e.id?(0,l.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,l.jsx)(N.A,{className:"h-4 w-4"}),"確認並儲存變更"]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-indigo-400",children:[(0,l.jsx)(z.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"平面圖配置"})]}),(0,l.jsxs)("div",{className:"p-4 bg-zinc-950/50 rounded-xl border border-zinc-800/50",children:[(0,l.jsx)("p",{className:"text-xs text-zinc-400 mb-3",children:"您可以直接在此設定樓層戶型配置。設定完成並發布後，將同步更新至前台報表。"}),(0,l.jsxs)("button",{onClick:()=>Z(e),className:"flex items-center gap-2 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg text-xs font-bold transition-colors border border-zinc-700 hover:border-zinc-600",children:[(0,l.jsx)(z.A,{className:"h-4 w-4"}),"開啟配置編輯器"]})]})]})]})})]},e.id)})})]}),F&&(0,l.jsx)("div",{className:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-[#18181b] w-full max-w-6xl h-[90vh] rounded-2xl border border-zinc-700 shadow-2xl flex flex-col overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-zinc-700 bg-zinc-900",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(z.A,{className:"h-5 w-5 text-indigo-400"}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-sm font-bold text-white",children:["配置編輯器：",F.project_name]}),(0,l.jsx)("p",{className:"text-xs text-zinc-500",children:"Admin Mode"})]})]}),(0,l.jsx)("button",{onClick:()=>G(null),className:"p-2 hover:bg-zinc-800 rounded-lg text-zinc-400 hover:text-white transition-colors",children:(0,l.jsx)(w.A,{className:"h-5 w-5"})})]}),(0,l.jsx)("div",{className:"flex-1 overflow-auto bg-[#0f1117] relative",children:K?(0,l.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4 text-zinc-400",children:[(0,l.jsx)(p.A,{className:"h-8 w-8 animate-spin text-indigo-500"}),(0,l.jsx)("span",{className:"text-xs font-mono",children:"載入交易資料中..."})]}):H.length>0?(0,l.jsx)("div",{className:"p-6",children:(0,l.jsx)(_.sB,{transactions:H,project:F.project_name,configOnly:!0,title:`平面配置設定 - ${F.project_name}`})}):(0,l.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4 text-zinc-500",children:[(0,l.jsx)(y.A,{className:"h-10 w-10 opacity-50"}),(0,l.jsx)("p",{children:"此建案尚無實價登錄資料，無法進行配置。"}),(0,l.jsx)("button",{onClick:()=>G(null),className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg text-xs font-bold transition-colors",children:"關閉"})]})})]})})]}):(0,l.jsx)("div",{className:"p-8 text-center text-white",children:"權限不足"})}},75942:(e,t,s)=>{Promise.resolve().then(s.bind(s,42401))}},e=>{e.O(0,[4764,5969,3848,1413,8875,6120,8441,3794,7358],()=>e(e.s=75942)),_N_E=e.O()}]);