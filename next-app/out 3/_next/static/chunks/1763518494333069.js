(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78885,94407,e=>{"use strict";var t=e.i(68524);let r=e=>{let t,r=new Set,n=(e,n)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,a={setState:n,getState:i,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(n,i,a);return a},n=e=>{let n=e?r(e):r,i=e=>(function(e,r=e=>e){let n=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>r(e.getState()),[e,r]),t.default.useCallback(()=>r(e.getInitialState()),[e,r]));return t.default.useDebugValue(n),n})(n,e);return Object.assign(i,n),i},i=e=>e?n(e):n;e.s(["create",()=>i],94407);let a={counties:[],districts:[],transactionType:"預售交易",buildingType:"",projectNames:[],dateRange:"1y",startDate:"",endDate:"",excludeCommercial:!1,floorPremium:.3,rankingCurrentPage:1,rankingPageSize:10,currentSort:{key:"saleAmountSum",order:"desc"},currentAverageType:"arithmetic",velocityView:"monthly",velocityMetric:"count",activeTab:"ranking",analysisData:null},o=i(e=>({...a,setCounties:t=>e({counties:t,districts:[]}),setDistricts:t=>e({districts:t}),setTransactionType:t=>e({transactionType:t}),setBuildingType:t=>e({buildingType:t}),setProjectNames:t=>e({projectNames:t}),setDateRange:(t,r,n)=>e(e=>({dateRange:t,startDate:r||e.startDate,endDate:n||e.endDate})),setCustomDate:(t,r)=>e({startDate:t,endDate:r,dateRange:"custom"}),setExcludeCommercial:t=>e({excludeCommercial:t}),setFloorPremium:t=>e({floorPremium:t}),setRankingCurrentPage:t=>e({rankingCurrentPage:t}),setRankingPageSize:t=>e({rankingPageSize:t}),setCurrentSort:t=>e({currentSort:t}),setCurrentAverageType:t=>e({currentAverageType:t}),setVelocityView:t=>e({velocityView:t}),setVelocityMetric:t=>e({velocityMetric:t}),setActiveTab:t=>e({activeTab:t}),setAnalysisData:t=>e({analysisData:t}),resetFilters:()=>e(a)}));e.s(["useFilterStore",0,o],78885)},42217,e=>{"use strict";var t=e.i(25191),r=e.i(68524),n=e.i(74614);let i=r.forwardRef(({className:e,type:r,...i},a)=>(0,t.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-zinc-950/50 px-3 py-2 text-sm text-zinc-100 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...i}));i.displayName="Input",e.s(["Input",()=>i])},59725,e=>{"use strict";e.s(["getDateRangeDates",0,e=>{let t=new Date,r=new Date;switch(e){case"1q":r.setMonth(t.getMonth()-3);break;case"2q":r.setMonth(t.getMonth()-6);break;case"3q":r.setMonth(t.getMonth()-9);break;case"1y":r.setFullYear(t.getFullYear()-1);break;case"this_year":r=new Date(t.getFullYear(),0,1);break;case"last_2_years":r=new Date(t.getFullYear()-1,0,1);break;case"last_3_years":r=new Date(t.getFullYear()-2,0,1);break;default:return{startDate:"",endDate:""}}return{startDate:r.toISOString().split("T")[0],endDate:t.toISOString().split("T")[0]}}])},50183,36441,34029,e=>{"use strict";var t=e.i(25191),r=e.i(68524),n=e.i(67123),i=e.i(74614);let a=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("div",{ref:n,className:(0,i.cn)("glass-panel rounded-xl text-card-foreground",e),...r}));a.displayName="Card";let o=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("div",{ref:n,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));o.displayName="CardHeader";let s=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("h3",{ref:n,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight text-white",e),...r}));s.displayName="CardTitle";let l=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("p",{ref:n,className:(0,i.cn)("text-sm text-zinc-400",e),...r}));l.displayName="CardDescription";let c=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("div",{ref:n,className:(0,i.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent",r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("div",{ref:n,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter",e.s(["Card",()=>a,"CardContent",()=>c,"CardDescription",()=>l,"CardHeader",()=>o,"CardTitle",()=>s],36441);let d=(0,n.default)(()=>e.A(31593),{loadableGenerated:{modules:[94861]},ssr:!1});function u({type:e,series:r,options:n,height:i=350,title:o,description:s,className:l,loading:c}){let u={chart:{background:"transparent",toolbar:{show:!1}},theme:{mode:"dark",palette:"palette1"},dataLabels:{enabled:!1},grid:{borderColor:"#374151",strokeDashArray:4},xaxis:{labels:{style:{colors:"#9ca3af"}},axisBorder:{color:"#4b5563"},axisTicks:{color:"#4b5563"}},yaxis:{labels:{style:{colors:"#9ca3af"}}},tooltip:{theme:"dark",style:{fontSize:"12px"},x:{show:!0}}},m={...u,...n,chart:{...u.chart,...n.chart}};return(0,t.jsxs)(a,{className:`p-4 ${l}`,children:[(o||s)&&(0,t.jsxs)("div",{className:"mb-4",children:[o&&(0,t.jsx)("h3",{className:"text-lg font-bold text-white mb-1",children:o}),s&&(0,t.jsx)("p",{className:"text-sm text-gray-400",children:s})]}),c?(0,t.jsx)("div",{className:"flex items-center justify-center",style:{height:i},children:(0,t.jsx)("div",{className:"loader"})}):(0,t.jsx)(d,{options:m,series:r,type:e,height:i,width:"100%"})]})}function m({data:e,sortKey:n,limit:i=30,chartType:a="auto",height:o}){let s=(0,r.useMemo)(()=>a&&"auto"!==a?a:["averagePrice","minPrice","maxPrice","medianPrice","avgParkingPrice"].includes(n)?"bar":"treemap",[n,a]),l=(0,r.useMemo)(()=>({averagePrice:{title:"建案平均單價排行",unit:"萬/坪"},minPrice:{title:"建案最低單價排行",unit:"萬/坪"},maxPrice:{title:"建案最高單價排行",unit:"萬/坪"},medianPrice:{title:"建案單價中位數排行",unit:"萬/坪"},avgParkingPrice:{title:"車位平均單價排行",unit:"萬"},saleAmountSum:{title:"建案銷售總額佔比",unit:"萬",yLabel:"銷售總額"},houseAreaSum:{title:"建案房屋面積佔比",unit:"坪",yLabel:"房屋面積"},transactionCount:{title:"建案交易筆數佔比",unit:"筆",yLabel:"資料筆數"}})[n]||{title:"建案分析圖表",unit:"",yLabel:"數值"},[n]),c=(0,r.useMemo)(()=>{if(!e||0===e.length)return[];if("bar"!==s)return e.reduce((e,t)=>e+(t[n]||0),0),[{name:l.yLabel||l.unit,data:e.map(e=>({x:e.projectName,y:parseFloat((e[n]||0).toFixed(2))}))}];{let t=[...e].filter(e=>e[n]>0).sort((e,t)=>t[n]-e[n]).slice(0,i);return[{name:l.unit,data:t.map(e=>parseFloat((e[n]||0).toFixed(2)))}]}},[e,n,s,l,i]),d=(0,r.useMemo)(()=>{let t={title:{text:l.title,align:"center",style:{fontSize:"16px",fontWeight:600,color:"#e5e7eb"}}};if("bar"===s){let r=[...e].filter(e=>e[n]>0).sort((e,t)=>t[n]-e[n]).slice(0,i).map(e=>e.projectName);return{...t,chart:{type:"bar",toolbar:{show:!0},animations:{enabled:!1}},tooltip:{theme:"dark",y:{formatter:e=>`${e.toLocaleString()} ${l.unit}`,title:{formatter:(e,t)=>{let n=r[t?.dataPointIndex];return n?`${n}:`:`${e}:`}}},x:{show:!0,formatter:(e,t)=>r[t?.dataPointIndex]||e}},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:4,distributed:!1}},colors:["#8b5cf6"],fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",shadeIntensity:.5,gradientToColors:["#a78bfa"],inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,100]}},dataLabels:{enabled:!1},xaxis:{categories:r,labels:{style:{colors:"#9ca3af"},rotate:-45,trim:!0,maxHeight:100}},yaxis:{title:{text:l.unit,style:{color:"#6b7280"}},labels:{style:{colors:"#e5e7eb",fontSize:"12px",fontWeight:500}}},legend:{show:!1}}}{let r=e.reduce((e,t)=>e+(t[n]||0),0);return{...t,tooltip:{theme:"dark",y:{formatter:e=>`${e.toLocaleString()} ${l.unit}`}},chart:{type:"treemap",height:450,toolbar:{show:!0}},plotOptions:{treemap:{distributed:!0,enableShades:!1,colorScale:{ranges:[{from:0,to:.1*r,color:"#06b6d4"},{from:.1*r,to:.3*r,color:"#3b82f6"},{from:.3*r,to:.6*r,color:"#8b5cf6"},{from:.6*r,to:1/0,color:"#d946ef"}]}}},dataLabels:{enabled:!0,style:{fontSize:"11px",fontWeight:500,colors:["#fff"]},formatter:e=>e,offsetY:-2}}}},[s,c,l,e,n,i]);if(!e||0===e.length)return(0,t.jsx)("div",{className:"text-zinc-500 text-center p-8",children:"無排名資料可顯示"});let m="bar"===s&&c[0]?.data?c[0].data.length:0,f="bar"===s?{width:"100%",minWidth:`${45*m}px`}:{width:"100%"};return(0,t.jsx)("div",{className:`w-full ${"bar"===s?"overflow-x-auto pb-4":""}`,children:(0,t.jsx)("div",{style:f,children:(0,t.jsx)(u,{type:"bar"===s?"bar":"treemap",series:c,options:d,height:o||450,className:"w-full"})})})}e.s(["default",()=>u],34029),e.s(["RankingChart",()=>m],50183)},67690,115,50294,e=>{"use strict";var t=e.i(91568);let r=(0,t.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>r],67690);let n=(0,t.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["default",()=>n],115),e.s(["ChevronRight",()=>n],50294)},2953,e=>{"use strict";let t=(0,e.i(91568).default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>t],2953)},8563,e=>{"use strict";let t,r;var n=e.i(94407);let i=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>i(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>i(t)(e)}}},a={"ranking-chart":{width:400,height:300},"ranking-table":{width:600,height:400},"ranking-metrics":{width:600,height:200},"price-band-chart":{width:450,height:280},"price-band-table":{width:600,height:400},"price-band-location-table":{width:600,height:400},"price-band-location-chart":{width:600,height:400},"unit-price-bubble":{width:380,height:320},"unit-price-stats":{width:1e3,height:400},"type-comparison-table":{width:600,height:350},"sales-velocity-chart":{width:420,height:260},"sales-velocity-table":{width:600,height:400},"sales-heatmap":{width:450,height:350},"sales-heatmap-detail":{width:800,height:400},"parking-pie":{width:300,height:300},"parking-price":{width:400,height:300},"parking-scatter":{width:450,height:350},"parking-floor":{width:400,height:400},heatmap:{width:500,height:350},"heatmap-grid":{width:800,height:500},"heatmap-stats":{width:800,height:120},"heatmap-comparison":{width:800,height:300},"data-list":{width:600,height:400}},o=e=>({id:`page-${Date.now()}`,name:`第 ${e+1} 頁`,items:[]}),s=(0,n.create)()((t=(e,t)=>({pages:[o(0)],currentPageIndex:0,canvasRatio:"16:9",selectedIds:[],get items(){let e=t();return e.pages[e.currentPageIndex]?.items||[]},addPage:()=>{e(e=>{let t=o(e.pages.length);return{pages:[...e.pages,t],currentPageIndex:e.pages.length,selectedIds:[]}})},deletePage:t=>{e(e=>{if(e.pages.length<=1||-1===e.pages.findIndex(e=>e.id===t))return e;let r=e.pages.filter(e=>e.id!==t).map((e,t)=>({...e,name:`第 ${t+1} 頁`})),n=Math.min(e.currentPageIndex,r.length-1);return{pages:r,currentPageIndex:n,selectedIds:[]}})},setCurrentPage:t=>{e(e=>({currentPageIndex:Math.max(0,Math.min(t,e.pages.length-1)),selectedIds:[]}))},renamePage:(t,r)=>{e(e=>({pages:e.pages.map(e=>e.id===t?{...e,name:r}:e)}))},reorderPages:(t,r)=>{e(e=>{if(t===r)return e;let n=[...e.pages],[i]=n.splice(t,1);n.splice(r,0,i);let a=n.map((e,t)=>({...e,name:`第 ${t+1} 頁`})),o=e.currentPageIndex;return e.currentPageIndex===t?o=r:t<e.currentPageIndex&&r>=e.currentPageIndex?o=e.currentPageIndex-1:t>e.currentPageIndex&&r<=e.currentPageIndex&&(o=e.currentPageIndex+1),{pages:a,currentPageIndex:o}})},addItem:(t,r)=>{let n=a[t]||{width:400,height:300};e(e=>{let i=e.pages[e.currentPageIndex];if(!i)return e;let a=20*i.items.length,o={id:`item-${Date.now()}`,type:t,x:50+a,y:50+a,width:n.width,height:n.height,scaleMode:"crop",panOffset:{x:0,y:0},contentScale:1,data:r};return{pages:e.pages.map((t,r)=>r===e.currentPageIndex?{...t,items:[...t.items,o]}:t),selectedIds:[o.id]}})},updateItem:(t,r)=>{e(e=>({pages:e.pages.map((n,i)=>i===e.currentPageIndex?{...n,items:n.items.map(e=>e.id===t?{...e,...r}:e)}:n)}))},removeItem:t=>{e(e=>({pages:e.pages.map((r,n)=>n===e.currentPageIndex?{...r,items:r.items.filter(e=>e.id!==t)}:r),selectedIds:e.selectedIds.filter(e=>e!==t)}))},moveItemToPage:(t,r)=>{e(e=>{let n=e.pages[e.currentPageIndex],i=n?.items.find(e=>e.id===t);return!i||r===e.currentPageIndex||r<0||r>=e.pages.length?e:{pages:e.pages.map((n,a)=>a===e.currentPageIndex?{...n,items:n.items.filter(e=>e.id!==t)}:a===r?{...n,items:[...n.items,{...i,x:50,y:50}]}:n),selectedIds:[]}})},clearCanvas:()=>{e(e=>({pages:e.pages.map((t,r)=>r===e.currentPageIndex?{...t,items:[]}:t),selectedIds:[]}))},batchUpdateItems:t=>{e(e=>({pages:e.pages.map((r,n)=>n===e.currentPageIndex?{...r,items:r.items.map(e=>t[e.id]?{...e,...t[e.id]}:e)}:r)}))},setCanvasRatio:t=>e({canvasRatio:t}),setSelectedIds:t=>e({selectedIds:t}),toggleSelection:t=>{e(e=>({selectedIds:e.selectedIds.includes(t)?e.selectedIds.filter(e=>e!==t):[...e.selectedIds,t]}))},addToSelection:t=>{e(e=>({selectedIds:e.selectedIds.includes(t)?e.selectedIds:[...e.selectedIds,t]}))},clearSelection:()=>e({selectedIds:[]}),removeSelectedItems:()=>{e(e=>e.pages[e.currentPageIndex]?{pages:e.pages.map((t,r)=>r===e.currentPageIndex?{...t,items:t.items.filter(t=>!e.selectedIds.includes(t.id))}:t),selectedIds:[]}:e)},moveSelectedItemsToPage:t=>{e(e=>{if(t===e.currentPageIndex||t<0||t>=e.pages.length)return e;let r=e.pages[e.currentPageIndex].items.filter(t=>e.selectedIds.includes(t.id));return 0===r.length?e:{pages:e.pages.map((n,i)=>i===e.currentPageIndex?{...n,items:n.items.filter(t=>!e.selectedIds.includes(t.id))}:i===t?{...n,items:[...n.items,...r.map((e,t)=>({...e,x:50+20*t,y:50+20*t}))]}:n),selectedIds:[]}})}}),r={name:"report-builder-storage"},(e,n,a)=>{let o,s={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let n=e=>null===e?null:JSON.parse(e,void 0),i=null!=(t=r.getItem(e))?t:null;return i instanceof Promise?i.then(n):n(i)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...r},l=!1,c=0,d=new Set,u=new Set,m=s.storage;if(!m)return t((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),e(...t)},n,a);let f=()=>{let e=s.partialize({...n()});return m.setItem(s.name,{state:e,version:s.version})},p=a.setState;a.setState=(e,t)=>(p(e,t),f());let h=t((...t)=>(e(...t),f()),n,a);a.getInitialState=()=>h;let x=()=>{var t,r;if(!m)return;let a=++c;l=!1,d.forEach(e=>{var t;return e(null!=(t=n())?t:h)});let p=(null==(r=s.onRehydrateStorage)?void 0:r.call(s,null!=(t=n())?t:h))||void 0;return i(m.getItem.bind(m))(s.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];else{if(s.migrate){let t=s.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(t=>{var r;if(a!==c)return;let[i,l]=t;if(e(o=s.merge(l,null!=(r=n())?r:h),!0),i)return f()}).then(()=>{a===c&&(null==p||p(o,void 0),o=n(),l=!0,u.forEach(e=>e(o)))}).catch(e=>{a===c&&(null==p||p(void 0,e))})};return a.persist={setOptions:e=>{s={...s,...e},e.storage&&(m=e.storage)},clearStorage:()=>{null==m||m.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>x(),hasHydrated:()=>l,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},s.skipHydration||x(),o||h}));e.s(["useReportBuilderStore",0,s],8563)},12112,33209,93814,16482,55751,86790,1998,54079,67892,48179,40058,e=>{"use strict";let t;var r,n=e.i(25191),i=e.i(68524);function a(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}"u">typeof window&&window.document&&window.document.createElement,e.s(["composeEventHandlers",()=>a],33209);var o=e.i(33142);function s(e,t=[]){let r=[],a=()=>{let t=r.map(e=>i.createContext(e));return function(r){let n=r?.[e]||t;return i.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return a.scopeName=e,[function(t,a){let o=i.createContext(a),s=r.length;r=[...r,a];let l=t=>{let{scope:r,children:a,...l}=t,c=r?.[e]?.[s]||o,d=i.useMemo(()=>l,Object.values(l));return(0,n.jsx)(c.Provider,{value:d,children:a})};return l.displayName=t+"Provider",[l,function(r,n){let l=n?.[e]?.[s]||o,c=i.useContext(l);if(c)return c;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:n})=>{let i=r(e)[`__scope${n}`];return{...t,...i}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(a,...t)]}e.s(["createContextScope",()=>s],93814);var l=e.i(1801),c=Symbol("radix.slottable");function d(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}var u=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{var r,a;let s,l,c,u=(a=r=`Primitive.${t}`,(s=i.forwardRef((e,t)=>{let{children:r,...n}=e;if(i.isValidElement(r)){var a;let e,s,l=(a=r,(s=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(s=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),c=function(e,t){let r={...t};for(let n in t){let i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...e)=>{let t=a(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...a}:"className"===n&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==i.Fragment&&(c.ref=t?(0,o.composeRefs)(t,l):l),i.cloneElement(r,c)}return i.Children.count(r)>1?i.Children.only(null):null})).displayName=`${a}.SlotClone`,l=s,(c=i.forwardRef((e,t)=>{let{children:r,...a}=e,o=i.Children.toArray(r),s=o.find(d);if(s){let e=s.props.children,r=o.map(t=>t!==s?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,n.jsx)(l,{...a,ref:t,children:i.isValidElement(e)?i.cloneElement(e,void 0,r):null})}return(0,n.jsx)(l,{...a,ref:t,children:r})})).displayName=`${r}.Slot`,c),m=i.forwardRef((e,r)=>{let{asChild:i,...a}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(i?u:t,{...a,ref:r})});return m.displayName=`Primitive.${t}`,{...e,[t]:m}},{});function m(e,t){e&&l.flushSync(()=>e.dispatchEvent(t))}function f(e){let t=i.useRef(e);return i.useEffect(()=>{t.current=e}),i.useMemo(()=>(...e)=>t.current?.(...e),[])}e.s(["Primitive",()=>u,"dispatchDiscreteCustomEvent",()=>m],16482),e.s(["useCallbackRef",()=>f],55751);var p="dismissableLayer.update",h=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),x=i.forwardRef((e,t)=>{let{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:m,onDismiss:x,...b}=e,v=i.useContext(h),[w,j]=i.useState(null),P=w?.ownerDocument??globalThis?.document,[,N]=i.useState({}),S=(0,o.useComposedRefs)(t,e=>j(e)),C=Array.from(v.layers),[R]=[...v.layersWithOutsidePointerEventsDisabled].slice(-1),k=C.indexOf(R),E=w?C.indexOf(w):-1,T=v.layersWithOutsidePointerEventsDisabled.size>0,A=E>=k,z=function(e,t=globalThis?.document){let r=f(e),n=i.useRef(!1),a=i.useRef(()=>{});return i.useEffect(()=>{let e=e=>{if(e.target&&!n.current){let n=function(){y("dismissableLayer.pointerDownOutside",r,i,{discrete:!0})},i={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",a.current),a.current=n,t.addEventListener("click",a.current,{once:!0})):n()}else t.removeEventListener("click",a.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",e),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{let t=e.target,r=[...v.branches].some(e=>e.contains(t));A&&!r&&(c?.(e),m?.(e),e.defaultPrevented||x?.())},P),D=function(e,t=globalThis?.document){let r=f(e),n=i.useRef(!1);return i.useEffect(()=>{let e=e=>{e.target&&!n.current&&y("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{let t=e.target;![...v.branches].some(e=>e.contains(t))&&(d?.(e),m?.(e),e.defaultPrevented||x?.())},P);return!function(e,t=globalThis?.document){let r=f(e);i.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{E===v.layers.size-1&&(l?.(e),!e.defaultPrevented&&x&&(e.preventDefault(),x()))},P),i.useEffect(()=>{if(w)return s&&(0===v.layersWithOutsidePointerEventsDisabled.size&&(r=P.body.style.pointerEvents,P.body.style.pointerEvents="none"),v.layersWithOutsidePointerEventsDisabled.add(w)),v.layers.add(w),g(),()=>{s&&1===v.layersWithOutsidePointerEventsDisabled.size&&(P.body.style.pointerEvents=r)}},[w,P,s,v]),i.useEffect(()=>()=>{w&&(v.layers.delete(w),v.layersWithOutsidePointerEventsDisabled.delete(w),g())},[w,v]),i.useEffect(()=>{let e=()=>N({});return document.addEventListener(p,e),()=>document.removeEventListener(p,e)},[]),(0,n.jsx)(u.div,{...b,ref:S,style:{pointerEvents:T?A?"auto":"none":void 0,...e.style},onFocusCapture:a(e.onFocusCapture,D.onFocusCapture),onBlurCapture:a(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:a(e.onPointerDownCapture,z.onPointerDownCapture)})});function g(){let e=new CustomEvent(p);document.dispatchEvent(e)}function y(e,t,r,{discrete:n}){let i=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?m(i,a):i.dispatchEvent(a)}x.displayName="DismissableLayer",i.forwardRef((e,t)=>{let r=i.useContext(h),a=i.useRef(null),s=(0,o.useComposedRefs)(t,a);return i.useEffect(()=>{let e=a.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,n.jsx)(u.div,{...e,ref:s})}).displayName="DismissableLayerBranch",e.s(["DismissableLayer",()=>x],86790);var b=globalThis?.document?i.useLayoutEffect:()=>{},v=i[" useId ".trim().toString()]||(()=>void 0),w=0;function j(e){let[t,r]=i.useState(v());return b(()=>{e||r(e=>e??String(w++))},[e]),e||(t?`radix-${t}`:"")}e.s(["useId",()=>j],1998);let P=["top","right","bottom","left"],N=Math.min,S=Math.max,C=Math.round,R=Math.floor,k=e=>({x:e,y:e}),E={left:"right",right:"left",bottom:"top",top:"bottom"},T={start:"end",end:"start"};function A(e,t){return"function"==typeof e?e(t):e}function z(e){return e.split("-")[0]}function D(e){return e.split("-")[1]}function M(e){return"x"===e?"y":"x"}function I(e){return"y"===e?"height":"width"}let L=new Set(["top","bottom"]);function O(e){return L.has(z(e))?"y":"x"}function F(e){return e.replace(/start|end/g,e=>T[e])}let $=["left","right"],B=["right","left"],H=["top","bottom"],V=["bottom","top"];function W(e){return e.replace(/left|right|bottom|top/g,e=>E[e])}function _(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function U(e){let{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function q(e,t,r){let n,{reference:i,floating:a}=e,o=O(t),s=M(O(t)),l=I(s),c=z(t),d="y"===o,u=i.x+i.width/2-a.width/2,m=i.y+i.height/2-a.height/2,f=i[l]/2-a[l]/2;switch(c){case"top":n={x:u,y:i.y-a.height};break;case"bottom":n={x:u,y:i.y+i.height};break;case"right":n={x:i.x+i.width,y:m};break;case"left":n={x:i.x-a.width,y:m};break;default:n={x:i.x,y:i.y}}switch(D(t)){case"start":n[s]-=f*(r&&d?-1:1);break;case"end":n[s]+=f*(r&&d?-1:1)}return n}let Y=async(e,t,r)=>{let{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=r,s=a.filter(Boolean),l=await (null==o.isRTL?void 0:o.isRTL(t)),c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:u}=q(c,n,l),m=n,f={},p=0;for(let r=0;r<s.length;r++){let{name:a,fn:h}=s[r],{x:x,y:g,data:y,reset:b}=await h({x:d,y:u,initialPlacement:n,placement:m,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:e,floating:t}});d=null!=x?x:d,u=null!=g?g:u,f={...f,[a]:{...f[a],...y}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(m=b.placement),b.rects&&(c=!0===b.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):b.rects),{x:d,y:u}=q(c,m,l)),r=-1)}return{x:d,y:u,placement:m,strategy:i,middlewareData:f}};async function X(e,t){var r;void 0===t&&(t={});let{x:n,y:i,platform:a,rects:o,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:m=!1,padding:f=0}=A(t,e),p=_(f),h=s[m?"floating"===u?"reference":"floating":u],x=U(await a.getClippingRect({element:null==(r=await (null==a.isElement?void 0:a.isElement(h)))||r?h:h.contextElement||await (null==a.getDocumentElement?void 0:a.getDocumentElement(s.floating)),boundary:c,rootBoundary:d,strategy:l})),g="floating"===u?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,y=await (null==a.getOffsetParent?void 0:a.getOffsetParent(s.floating)),b=await (null==a.isElement?void 0:a.isElement(y))&&await (null==a.getScale?void 0:a.getScale(y))||{x:1,y:1},v=U(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:g,offsetParent:y,strategy:l}):g);return{top:(x.top-v.top+p.top)/b.y,bottom:(v.bottom-x.bottom+p.bottom)/b.y,left:(x.left-v.left+p.left)/b.x,right:(v.right-x.right+p.right)/b.x}}function G(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function J(e){return P.some(t=>e[t]>=0)}let K=new Set(["left","top"]);async function Z(e,t){let{placement:r,platform:n,elements:i}=e,a=await (null==n.isRTL?void 0:n.isRTL(i.floating)),o=z(r),s=D(r),l="y"===O(r),c=K.has(o)?-1:1,d=a&&l?-1:1,u=A(t,e),{mainAxis:m,crossAxis:f,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return s&&"number"==typeof p&&(f="end"===s?-1*p:p),l?{x:f*d,y:m*c}:{x:m*c,y:f*d}}function Q(){return"u">typeof window}function ee(e){return en(e)?(e.nodeName||"").toLowerCase():"#document"}function et(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function er(e){var t;return null==(t=(en(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function en(e){return!!Q()&&(e instanceof Node||e instanceof et(e).Node)}function ei(e){return!!Q()&&(e instanceof Element||e instanceof et(e).Element)}function ea(e){return!!Q()&&(e instanceof HTMLElement||e instanceof et(e).HTMLElement)}function eo(e){return!(!Q()||"u"<typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof et(e).ShadowRoot)}let es=new Set(["inline","contents"]);function el(e){let{overflow:t,overflowX:r,overflowY:n,display:i}=eb(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!es.has(i)}let ec=new Set(["table","td","th"]),ed=[":popover-open",":modal"];function eu(e){return ed.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let em=["transform","translate","scale","rotate","perspective"],ef=["transform","translate","scale","rotate","perspective","filter"],ep=["paint","layout","strict","content"];function eh(e){let t=ex(),r=ei(e)?eb(e):e;return em.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||ef.some(e=>(r.willChange||"").includes(e))||ep.some(e=>(r.contain||"").includes(e))}function ex(){return!("u"<typeof CSS)&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let eg=new Set(["html","body","#document"]);function ey(e){return eg.has(ee(e))}function eb(e){return et(e).getComputedStyle(e)}function ev(e){return ei(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ew(e){if("html"===ee(e))return e;let t=e.assignedSlot||e.parentNode||eo(e)&&e.host||er(e);return eo(t)?t.host:t}function ej(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);let i=function e(t){let r=ew(t);return ey(r)?t.ownerDocument?t.ownerDocument.body:t.body:ea(r)&&el(r)?r:e(r)}(e),a=i===(null==(n=e.ownerDocument)?void 0:n.body),o=et(i);if(a){let e=eP(o);return t.concat(o,o.visualViewport||[],el(i)?i:[],e&&r?ej(e):[])}return t.concat(i,ej(i,[],r))}function eP(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function eN(e){let t=eb(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,i=ea(e),a=i?e.offsetWidth:r,o=i?e.offsetHeight:n,s=C(r)!==a||C(n)!==o;return s&&(r=a,n=o),{width:r,height:n,$:s}}function eS(e){return ei(e)?e:e.contextElement}function eC(e){let t=eS(e);if(!ea(t))return k(1);let r=t.getBoundingClientRect(),{width:n,height:i,$:a}=eN(t),o=(a?C(r.width):r.width)/n,s=(a?C(r.height):r.height)/i;return o&&Number.isFinite(o)||(o=1),s&&Number.isFinite(s)||(s=1),{x:o,y:s}}let eR=k(0);function ek(e){let t=et(e);return ex()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:eR}function eE(e,t,r,n){var i;void 0===t&&(t=!1),void 0===r&&(r=!1);let a=e.getBoundingClientRect(),o=eS(e),s=k(1);t&&(n?ei(n)&&(s=eC(n)):s=eC(e));let l=(void 0===(i=r)&&(i=!1),n&&(!i||n===et(o))&&i)?ek(o):k(0),c=(a.left+l.x)/s.x,d=(a.top+l.y)/s.y,u=a.width/s.x,m=a.height/s.y;if(o){let e=et(o),t=n&&ei(n)?et(n):n,r=e,i=eP(r);for(;i&&n&&t!==r;){let e=eC(i),t=i.getBoundingClientRect(),n=eb(i),a=t.left+(i.clientLeft+parseFloat(n.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(n.paddingTop))*e.y;c*=e.x,d*=e.y,u*=e.x,m*=e.y,c+=a,d+=o,i=eP(r=et(i))}}return U({width:u,height:m,x:c,y:d})}function eT(e,t){let r=ev(e).scrollLeft;return t?t.left+r:eE(er(e)).left+r}function eA(e,t){let r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-eT(e,r),y:r.top+t.scrollTop}}let ez=new Set(["absolute","fixed"]);function eD(e,t,r){var n;let i;if("viewport"===t)i=function(e,t){let r=et(e),n=er(e),i=r.visualViewport,a=n.clientWidth,o=n.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;let e=ex();(!e||e&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}let c=eT(n);if(c<=0){let e=n.ownerDocument,t=e.body,r=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(r.marginLeft)+parseFloat(r.marginRight)||0,o=Math.abs(n.clientWidth-t.clientWidth-i);o<=25&&(a-=o)}else c<=25&&(a+=c);return{width:a,height:o,x:s,y:l}}(e,r);else if("document"===t){let t,r,a,o,s,l,c;n=er(e),t=er(n),r=ev(n),a=n.ownerDocument.body,o=S(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),s=S(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight),l=-r.scrollLeft+eT(n),c=-r.scrollTop,"rtl"===eb(a).direction&&(l+=S(t.clientWidth,a.clientWidth)-o),i={width:o,height:s,x:l,y:c}}else if(ei(t)){let e,n,a,o,s,l;n=(e=eE(t,!0,"fixed"===r)).top+t.clientTop,a=e.left+t.clientLeft,o=ea(t)?eC(t):k(1),s=t.clientWidth*o.x,l=t.clientHeight*o.y,i={width:s,height:l,x:a*o.x,y:n*o.y}}else{let r=ek(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return U(i)}function eM(e){return"static"===eb(e).position}function eI(e,t){if(!ea(e)||"fixed"===eb(e).position)return null;if(t)return t(e);let r=e.offsetParent;return er(e)===r&&(r=r.ownerDocument.body),r}function eL(e,t){var r;let n=et(e);if(eu(e))return n;if(!ea(e)){let t=ew(e);for(;t&&!ey(t);){if(ei(t)&&!eM(t))return t;t=ew(t)}return n}let i=eI(e,t);for(;i&&(r=i,ec.has(ee(r)))&&eM(i);)i=eI(i,t);return i&&ey(i)&&eM(i)&&!eh(i)?n:i||function(e){let t=ew(e);for(;ea(t)&&!ey(t);){if(eh(t))return t;if(eu(t))break;t=ew(t)}return null}(e)||n}let eO=async function(e){let t=this.getOffsetParent||eL,r=this.getDimensions,n=await r(e.floating);return{reference:function(e,t,r){let n=ea(t),i=er(t),a="fixed"===r,o=eE(e,!0,a,t),s={scrollLeft:0,scrollTop:0},l=k(0);if(n||!n&&!a)if(("body"!==ee(t)||el(i))&&(s=ev(t)),n){let e=eE(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=eT(i));a&&!n&&i&&(l.x=eT(i));let c=!i||n||a?k(0):eA(i,s);return{x:o.left+s.scrollLeft-l.x-c.x,y:o.top+s.scrollTop-l.y-c.y,width:o.width,height:o.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},eF={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e,a="fixed"===i,o=er(n),s=!!t&&eu(t.floating);if(n===o||s&&a)return r;let l={scrollLeft:0,scrollTop:0},c=k(1),d=k(0),u=ea(n);if((u||!u&&!a)&&(("body"!==ee(n)||el(o))&&(l=ev(n)),ea(n))){let e=eE(n);c=eC(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}let m=!o||u||a?k(0):eA(o,l);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x+m.x,y:r.y*c.y-l.scrollTop*c.y+d.y+m.y}},getDocumentElement:er,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e,a=[..."clippingAncestors"===r?eu(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let n=ej(e,[],!1).filter(e=>ei(e)&&"body"!==ee(e)),i=null,a="fixed"===eb(e).position,o=a?ew(e):e;for(;ei(o)&&!ey(o);){let t=eb(o),r=eh(o);r||"fixed"!==t.position||(i=null),(a?!r&&!i:!r&&"static"===t.position&&!!i&&ez.has(i.position)||el(o)&&!r&&function e(t,r){let n=ew(t);return!(n===r||!ei(n)||ey(n))&&("fixed"===eb(n).position||e(n,r))}(e,o))?n=n.filter(e=>e!==o):i=t,o=ew(o)}return t.set(e,n),n}(t,this._c):[].concat(r),n],o=a[0],s=a.reduce((e,r)=>{let n=eD(t,r,i);return e.top=S(n.top,e.top),e.right=N(n.right,e.right),e.bottom=N(n.bottom,e.bottom),e.left=S(n.left,e.left),e},eD(t,o,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:eL,getElementRects:eO,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=eN(e);return{width:t,height:r}},getScale:eC,isElement:ei,isRTL:function(e){return"rtl"===eb(e).direction}};function e$(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let eB=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:i,rects:a,platform:o,elements:s,middlewareData:l}=t,{element:c,padding:d=0}=A(e,t)||{};if(null==c)return{};let u=_(d),m={x:r,y:n},f=M(O(i)),p=I(f),h=await o.getDimensions(c),x="y"===f,g=x?"clientHeight":"clientWidth",y=a.reference[p]+a.reference[f]-m[f]-a.floating[p],b=m[f]-a.reference[f],v=await (null==o.getOffsetParent?void 0:o.getOffsetParent(c)),w=v?v[g]:0;w&&await (null==o.isElement?void 0:o.isElement(v))||(w=s.floating[g]||a.floating[p]);let j=w/2-h[p]/2-1,P=N(u[x?"top":"left"],j),C=N(u[x?"bottom":"right"],j),R=w-h[p]-C,k=w/2-h[p]/2+(y/2-b/2),E=S(P,N(k,R)),T=!l.arrow&&null!=D(i)&&k!==E&&a.reference[p]/2-(k<P?P:C)-h[p]/2<0,z=T?k<P?k-P:k-R:0;return{[f]:m[f]+z,data:{[f]:E,centerOffset:k-E-z,...T&&{alignmentOffset:z}},reset:T}}});var eH="u">typeof document?i.useLayoutEffect:function(){};function eV(e,t){let r,n,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!eV(e[n],t[n]))return!1;return!0}if((r=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!({}).hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!=n--;){let r=i[n];if(("_owner"!==r||!e.$$typeof)&&!eV(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function eW(e){return"u"<typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function e_(e,t){let r=eW(e);return Math.round(t*r)/r}function eU(e){let t=i.useRef(e);return eH(()=>{t.current=e}),t}var eq=i.forwardRef((e,t)=>{let{children:r,width:i=10,height:a=5,...o}=e;return(0,n.jsx)(u.svg,{...o,ref:t,width:i,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,n.jsx)("polygon",{points:"0,0 30,0 15,10"})})});eq.displayName="Arrow";var eY="Popper",[eX,eG]=s(eY),[eJ,eK]=eX(eY),eZ=e=>{let{__scopePopper:t,children:r}=e,[a,o]=i.useState(null);return(0,n.jsx)(eJ,{scope:t,anchor:a,onAnchorChange:o,children:r})};eZ.displayName=eY;var eQ="PopperAnchor",e0=i.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:a,...s}=e,l=eK(eQ,r),c=i.useRef(null),d=(0,o.useComposedRefs)(t,c),m=i.useRef(null);return i.useEffect(()=>{let e=m.current;m.current=a?.current||c.current,e!==m.current&&l.onAnchorChange(m.current)}),a?null:(0,n.jsx)(u.div,{...s,ref:d})});e0.displayName=eQ;var e1="PopperContent",[e2,e5]=eX(e1),e4=i.forwardRef((e,t)=>{var r,a,s,c,d,m,p,h,x,g,y,v,w;let{__scopePopper:j,side:P="bottom",sideOffset:C=0,align:k="center",alignOffset:E=0,arrowPadding:T=0,avoidCollisions:L=!0,collisionBoundary:_=[],collisionPadding:U=0,sticky:q="partial",hideWhenDetached:Q=!1,updatePositionStrategy:ee="optimized",onPlaced:et,...en}=e,ei=eK(e1,j),[ea,eo]=i.useState(null),es=(0,o.useComposedRefs)(t,e=>eo(e)),[el,ec]=i.useState(null),ed=function(e){let[t,r]=i.useState(void 0);return b(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,i;if(!Array.isArray(t)||!t.length)return;let a=t[0];if("borderBoxSize"in a){let e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,i=t.blockSize}else n=e.offsetWidth,i=e.offsetHeight;r({width:n,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(el),eu=ed?.width??0,em=ed?.height??0,ef="number"==typeof U?U:{top:0,right:0,bottom:0,left:0,...U},ep=Array.isArray(_)?_:[_],eh=ep.length>0,ex={padding:ef,boundary:ep.filter(e8),altBoundary:eh},{refs:eg,floatingStyles:ey,placement:eb,isPositioned:ev,middlewareData:ew}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:o,floating:s}={},transform:c=!0,whileElementsMounted:d,open:u}=e,[m,f]=i.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=i.useState(n);eV(p,n)||h(n);let[x,g]=i.useState(null),[y,b]=i.useState(null),v=i.useCallback(e=>{e!==N.current&&(N.current=e,g(e))},[]),w=i.useCallback(e=>{e!==S.current&&(S.current=e,b(e))},[]),j=o||x,P=s||y,N=i.useRef(null),S=i.useRef(null),C=i.useRef(m),R=null!=d,k=eU(d),E=eU(a),T=eU(u),A=i.useCallback(()=>{var e,n;let i,a,o;if(!N.current||!S.current)return;let s={placement:t,strategy:r,middleware:p};E.current&&(s.platform=E.current),(e=N.current,n=S.current,i=new Map,o={...(a={platform:eF,...s}).platform,_c:i},Y(e,n,{...a,platform:o})).then(e=>{let t={...e,isPositioned:!1!==T.current};z.current&&!eV(C.current,t)&&(C.current=t,l.flushSync(()=>{f(t)}))})},[p,t,r,E,T]);eH(()=>{!1===u&&C.current.isPositioned&&(C.current.isPositioned=!1,f(e=>({...e,isPositioned:!1})))},[u]);let z=i.useRef(!1);eH(()=>(z.current=!0,()=>{z.current=!1}),[]),eH(()=>{if(j&&(N.current=j),P&&(S.current=P),j&&P){if(k.current)return k.current(j,P,A);A()}},[j,P,A,k,R]);let D=i.useMemo(()=>({reference:N,floating:S,setReference:v,setFloating:w}),[v,w]),M=i.useMemo(()=>({reference:j,floating:P}),[j,P]),I=i.useMemo(()=>{let e={position:r,left:0,top:0};if(!M.floating)return e;let t=e_(M.floating,m.x),n=e_(M.floating,m.y);return c?{...e,transform:"translate("+t+"px, "+n+"px)",...eW(M.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,c,M.floating,m.x,m.y]);return i.useMemo(()=>({...m,update:A,refs:D,elements:M,floatingStyles:I}),[m,A,D,M,I])}({strategy:"fixed",placement:P+("center"!==k?"-"+k:""),whileElementsMounted:(...e)=>(function(e,t,r,n){let i;void 0===n&&(n={});let{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:c=!1}=n,d=eS(e),u=a||o?[...d?ej(d):[],...ej(t)]:[];u.forEach(e=>{a&&e.addEventListener("scroll",r,{passive:!0}),o&&e.addEventListener("resize",r)});let m=d&&l?function(e,t){let r,n=null,i=er(e);function a(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return!function o(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),a();let c=e.getBoundingClientRect(),{left:d,top:u,width:m,height:f}=c;if(s||t(),!m||!f)return;let p={rootMargin:-R(u)+"px "+-R(i.clientWidth-(d+m))+"px "+-R(i.clientHeight-(u+f))+"px "+-R(d)+"px",threshold:S(0,N(1,l))||1},h=!0;function x(t){let n=t[0].intersectionRatio;if(n!==l){if(!h)return o();n?o(!1,n):r=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==n||e$(c,e.getBoundingClientRect())||o(),h=!1}try{n=new IntersectionObserver(x,{...p,root:i.ownerDocument})}catch(e){n=new IntersectionObserver(x,p)}n.observe(e)}(!0),a}(d,r):null,f=-1,p=null;s&&(p=new ResizeObserver(e=>{let[n]=e;n&&n.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let h=c?eE(e):null;return c&&function t(){let n=eE(e);h&&!e$(h,n)&&r(),h=n,i=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach(e=>{a&&e.removeEventListener("scroll",r),o&&e.removeEventListener("resize",r)}),null==m||m(),null==(e=p)||e.disconnect(),p=null,c&&cancelAnimationFrame(i)}})(...e,{animationFrame:"always"===ee}),elements:{reference:ei.anchor},middleware:[{...{name:"offset",options:a=r={mainAxis:C+em,alignmentAxis:E},async fn(e){var t,r;let{x:n,y:i,placement:o,middlewareData:s}=e,l=await Z(e,a);return o===(null==(t=s.offset)?void 0:t.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:n+l.x,y:i+l.y,data:{...l,placement:o}}}},options:[r,void 0]},L&&{...{name:"shift",options:d=c={mainAxis:!0,crossAxis:!1,limiter:"partial"===q?{...(s=void 0,{options:s={},fn(e){let{x:t,y:r,placement:n,rects:i,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=A(s,e),d={x:t,y:r},u=O(n),m=M(u),f=d[m],p=d[u],h=A(o,e),x="number"==typeof h?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(l){let e="y"===m?"height":"width",t=i.reference[m]-i.floating[e]+x.mainAxis,r=i.reference[m]+i.reference[e]-x.mainAxis;f<t?f=t:f>r&&(f=r)}if(c){var g,y;let e="y"===m?"width":"height",t=K.has(z(n)),r=i.reference[u]-i.floating[e]+(t&&(null==(g=a.offset)?void 0:g[u])||0)+(t?0:x.crossAxis),o=i.reference[u]+i.reference[e]+(t?0:(null==(y=a.offset)?void 0:y[u])||0)-(t?x.crossAxis:0);p<r?p=r:p>o&&(p=o)}return{[m]:f,[u]:p}}}),options:[void 0,void 0]}:void 0,...ex},async fn(e){let{x:t,y:r,placement:n}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:o={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...s}=A(d,e),l={x:t,y:r},c=await X(e,s),u=O(z(n)),m=M(u),f=l[m],p=l[u];if(i){let e="y"===m?"top":"left",t="y"===m?"bottom":"right",r=f+c[e],n=f-c[t];f=S(r,N(f,n))}if(a){let e="y"===u?"top":"left",t="y"===u?"bottom":"right",r=p+c[e],n=p-c[t];p=S(r,N(p,n))}let h=o.fn({...e,[m]:f,[u]:p});return{...h,data:{x:h.x-t,y:h.y-r,enabled:{[m]:i,[u]:a}}}}},options:[c,void 0]},L&&{...{name:"flip",options:p=m={...ex},async fn(e){var t,r,n,i,a,o,s,l;let c,d,u,{placement:m,middlewareData:f,rects:h,initialPlacement:x,platform:g,elements:y}=e,{mainAxis:b=!0,crossAxis:v=!0,fallbackPlacements:w,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:P="none",flipAlignment:N=!0,...S}=A(p,e);if(null!=(t=f.arrow)&&t.alignmentOffset)return{};let C=z(m),R=O(x),k=z(x)===x,E=await (null==g.isRTL?void 0:g.isRTL(y.floating)),T=w||(k||!N?[W(x)]:(c=W(x),[F(x),c,F(c)])),L="none"!==P;!w&&L&&T.push(...(d=D(x),u=function(e,t,r){switch(e){case"top":case"bottom":if(r)return t?B:$;return t?$:B;case"left":case"right":return t?H:V;default:return[]}}(z(x),"start"===P,E),d&&(u=u.map(e=>e+"-"+d),N&&(u=u.concat(u.map(F)))),u));let _=[x,...T],U=await X(e,S),q=[],Y=(null==(r=f.flip)?void 0:r.overflows)||[];if(b&&q.push(U[C]),v){let e,t,r,n,i=(o=m,s=h,void 0===(l=E)&&(l=!1),e=D(o),r=I(t=M(O(o))),n="x"===t?e===(l?"end":"start")?"right":"left":"start"===e?"bottom":"top",s.reference[r]>s.floating[r]&&(n=W(n)),[n,W(n)]);q.push(U[i[0]],U[i[1]])}if(Y=[...Y,{placement:m,overflows:q}],!q.every(e=>e<=0)){let e=((null==(n=f.flip)?void 0:n.index)||0)+1,t=_[e];if(t&&("alignment"!==v||R===O(t)||Y.every(e=>O(e.placement)!==R||e.overflows[0]>0)))return{data:{index:e,overflows:Y},reset:{placement:t}};let r=null==(i=Y.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:i.placement;if(!r)switch(j){case"bestFit":{let e=null==(a=Y.filter(e=>{if(L){let t=O(e.placement);return t===R||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:a[0];e&&(r=e);break}case"initialPlacement":r=x}if(m!==r)return{reset:{placement:r}}}return{}}},options:[m,void 0]},{...{name:"size",options:x=h={...ex,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{let{width:i,height:a}=t.reference,o=e.floating.style;o.setProperty("--radix-popper-available-width",`${r}px`),o.setProperty("--radix-popper-available-height",`${n}px`),o.setProperty("--radix-popper-anchor-width",`${i}px`),o.setProperty("--radix-popper-anchor-height",`${a}px`)}},async fn(e){var t,r;let n,i,{placement:a,rects:o,platform:s,elements:l}=e,{apply:c=()=>{},...d}=A(x,e),u=await X(e,d),m=z(a),f=D(a),p="y"===O(a),{width:h,height:g}=o.floating;"top"===m||"bottom"===m?(n=m,i=f===(await (null==s.isRTL?void 0:s.isRTL(l.floating))?"start":"end")?"left":"right"):(i=m,n="end"===f?"top":"bottom");let y=g-u.top-u.bottom,b=h-u.left-u.right,v=N(g-u[n],y),w=N(h-u[i],b),j=!e.middlewareData.shift,P=v,C=w;if(null!=(t=e.middlewareData.shift)&&t.enabled.x&&(C=b),null!=(r=e.middlewareData.shift)&&r.enabled.y&&(P=y),j&&!f){let e=S(u.left,0),t=S(u.right,0),r=S(u.top,0),n=S(u.bottom,0);p?C=h-2*(0!==e||0!==t?e+t:S(u.left,u.right)):P=g-2*(0!==r||0!==n?r+n:S(u.top,u.bottom))}await c({...e,availableWidth:C,availableHeight:P});let R=await s.getDimensions(l.floating);return h!==R.width||g!==R.height?{reset:{rects:!0}}:{}}},options:[h,void 0]},el&&{...{name:"arrow",options:y=g={element:el,padding:T},fn(e){let{element:t,padding:r}="function"==typeof y?y(e):y;return t&&({}).hasOwnProperty.call(t,"current")?null!=t.current?eB({element:t.current,padding:r}).fn(e):{}:t?eB({element:t,padding:r}).fn(e):{}}},options:[g,void 0]},e7({arrowWidth:eu,arrowHeight:em}),Q&&{...{name:"hide",options:w=v={strategy:"referenceHidden",...ex},async fn(e){let{rects:t}=e,{strategy:r="referenceHidden",...n}=A(w,e);switch(r){case"referenceHidden":{let r=G(await X(e,{...n,elementContext:"reference"}),t.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:J(r)}}}case"escaped":{let r=G(await X(e,{...n,altBoundary:!0}),t.floating);return{data:{escapedOffsets:r,escaped:J(r)}}}default:return{}}}},options:[v,void 0]}]}),[eP,eN]=te(eb),eC=f(et);b(()=>{ev&&eC?.()},[ev,eC]);let eR=ew.arrow?.x,ek=ew.arrow?.y,eT=ew.arrow?.centerOffset!==0,[eA,ez]=i.useState();return b(()=>{ea&&ez(window.getComputedStyle(ea).zIndex)},[ea]),(0,n.jsx)("div",{ref:eg.setFloating,"data-radix-popper-content-wrapper":"",style:{...ey,transform:ev?ey.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:eA,"--radix-popper-transform-origin":[ew.transformOrigin?.x,ew.transformOrigin?.y].join(" "),...ew.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,n.jsx)(e2,{scope:j,placedSide:eP,onArrowChange:ec,arrowX:eR,arrowY:ek,shouldHideArrow:eT,children:(0,n.jsx)(u.div,{"data-side":eP,"data-align":eN,...en,ref:es,style:{...en.style,animation:ev?void 0:"none"}})})})});e4.displayName=e1;var e3="PopperArrow",e9={top:"bottom",right:"left",bottom:"top",left:"right"},e6=i.forwardRef(function(e,t){let{__scopePopper:r,...i}=e,a=e5(e3,r),o=e9[a.placedSide];return(0,n.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,n.jsx)(eq,{...i,ref:t,style:{...i.style,display:"block"}})})});function e8(e){return null!==e}e6.displayName=e3;var e7=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:n,middlewareData:i}=t,a=i.arrow?.centerOffset!==0,o=a?0:e.arrowWidth,s=a?0:e.arrowHeight,[l,c]=te(r),d={start:"0%",center:"50%",end:"100%"}[c],u=(i.arrow?.x??0)+o/2,m=(i.arrow?.y??0)+s/2,f="",p="";return"bottom"===l?(f=a?d:`${u}px`,p=`${-s}px`):"top"===l?(f=a?d:`${u}px`,p=`${n.floating.height+s}px`):"right"===l?(f=`${-s}px`,p=a?d:`${m}px`):"left"===l&&(f=`${n.floating.width+s}px`,p=a?d:`${m}px`),{data:{x:f,y:p}}}});function te(e){let[t,r="center"]=e.split("-");return[t,r]}e.s(["Anchor",()=>e0,"Arrow",()=>e6,"Content",()=>e4,"Root",()=>eZ,"createPopperScope",()=>eG],54079);var tt=i.forwardRef((e,t)=>{let{container:r,...a}=e,[o,s]=i.useState(!1);b(()=>s(!0),[]);let c=r||o&&globalThis?.document?.body;return c?l.default.createPortal((0,n.jsx)(u.div,{...a,ref:t}),c):null});tt.displayName="Portal",e.s(["Portal",()=>tt],67892);var tr=e=>{var t;let r,n,{present:a,children:s}=e,l=function(e){var t,r;let[n,a]=i.useState(),o=i.useRef(null),s=i.useRef(e),l=i.useRef("none"),[c,d]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},i.useReducer((e,t)=>r[e][t]??e,t));return i.useEffect(()=>{let e=tn(o.current);l.current="mounted"===c?e:"none"},[c]),b(()=>{let t=o.current,r=s.current;if(r!==e){let n=l.current,i=tn(t);e?d("MOUNT"):"none"===i||t?.display==="none"?d("UNMOUNT"):r&&n!==i?d("ANIMATION_OUT"):d("UNMOUNT"),s.current=e}},[e,d]),b(()=>{if(n){let e,t=n.ownerDocument.defaultView??window,r=r=>{let i=tn(o.current).includes(CSS.escape(r.animationName));if(r.target===n&&i&&(d("ANIMATION_END"),!s.current)){let r=n.style.animationFillMode;n.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=r)})}},i=e=>{e.target===n&&(l.current=tn(o.current))};return n.addEventListener("animationstart",i),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{t.clearTimeout(e),n.removeEventListener("animationstart",i),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}d("ANIMATION_END")},[n,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:i.useCallback(e=>{o.current=e?getComputedStyle(e):null,a(e)},[])}}(a),c="function"==typeof s?s({present:l.isPresent}):i.Children.only(s),d=(0,o.useComposedRefs)(l.ref,(t=c,(n=(r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.ref:(n=(r=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof s||l.isPresent?i.cloneElement(c,{ref:d}):null};function tn(e){return e?.animationName||"none"}tr.displayName="Presence",e.s(["Presence",()=>tr],48179);var ti=Symbol("radix.slottable");i[" useEffectEvent ".trim().toString()],i[" useInsertionEffect ".trim().toString()];var ta=i[" useInsertionEffect ".trim().toString()]||b;function to({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){let[a,o,s]=function({defaultProp:e,onChange:t}){let[r,n]=i.useState(e),a=i.useRef(r),o=i.useRef(t);return ta(()=>{o.current=t},[t]),i.useEffect(()=>{a.current!==r&&(o.current?.(r),a.current=r)},[r,a]),[r,n,o]}({defaultProp:t,onChange:r}),l=void 0!==e,c=l?e:a;{let t=i.useRef(void 0!==e);i.useEffect(()=>{let e=t.current;if(e!==l){let t=l?"controlled":"uncontrolled";console.warn(`${n} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=l},[l,n])}return[c,i.useCallback(t=>{if(l){let r="function"==typeof t?t(e):t;r!==e&&s.current?.(r)}else o(t)},[l,e,o,s])]}Symbol("RADIX:SYNC_STATE"),e.s(["useControllableState",()=>to],40058);var ts=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),tl=i.forwardRef((e,t)=>(0,n.jsx)(u.span,{...e,ref:t,style:{...ts,...e.style}}));tl.displayName="VisuallyHidden";var[tc,td]=s("Tooltip",[eG]),tu=eG(),tm="TooltipProvider",tf="tooltip.open",[tp,th]=tc(tm),tx=e=>{let{__scopeTooltip:t,delayDuration:r=700,skipDelayDuration:a=300,disableHoverableContent:o=!1,children:s}=e,l=i.useRef(!0),c=i.useRef(!1),d=i.useRef(0);return i.useEffect(()=>{let e=d.current;return()=>window.clearTimeout(e)},[]),(0,n.jsx)(tp,{scope:t,isOpenDelayedRef:l,delayDuration:r,onOpen:i.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:i.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,a)},[a]),isPointerInTransitRef:c,onPointerInTransitChange:i.useCallback(e=>{c.current=e},[]),disableHoverableContent:o,children:s})};tx.displayName=tm;var tg="Tooltip",[ty,tb]=tc(tg),tv=e=>{let{__scopeTooltip:t,children:r,open:a,defaultOpen:o,onOpenChange:s,disableHoverableContent:l,delayDuration:c}=e,d=th(tg,e.__scopeTooltip),u=tu(t),[m,f]=i.useState(null),p=j(),h=i.useRef(0),x=l??d.disableHoverableContent,g=c??d.delayDuration,y=i.useRef(!1),[b,v]=to({prop:a,defaultProp:o??!1,onChange:e=>{e?(d.onOpen(),document.dispatchEvent(new CustomEvent(tf))):d.onClose(),s?.(e)},caller:tg}),w=i.useMemo(()=>b?y.current?"delayed-open":"instant-open":"closed",[b]),P=i.useCallback(()=>{window.clearTimeout(h.current),h.current=0,y.current=!1,v(!0)},[v]),N=i.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v(!1)},[v]),S=i.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{y.current=!0,v(!0),h.current=0},g)},[g,v]);return i.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),(0,n.jsx)(eZ,{...u,children:(0,n.jsx)(ty,{scope:t,contentId:p,open:b,stateAttribute:w,trigger:m,onTriggerChange:f,onTriggerEnter:i.useCallback(()=>{d.isOpenDelayedRef.current?S():P()},[d.isOpenDelayedRef,S,P]),onTriggerLeave:i.useCallback(()=>{x?N():(window.clearTimeout(h.current),h.current=0)},[N,x]),onOpen:P,onClose:N,disableHoverableContent:x,children:r})})};tv.displayName=tg;var tw="TooltipTrigger",tj=i.forwardRef((e,t)=>{let{__scopeTooltip:r,...s}=e,l=tb(tw,r),c=th(tw,r),d=tu(r),m=i.useRef(null),f=(0,o.useComposedRefs)(t,m,l.onTriggerChange),p=i.useRef(!1),h=i.useRef(!1),x=i.useCallback(()=>p.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),(0,n.jsx)(e0,{asChild:!0,...d,children:(0,n.jsx)(u.button,{"aria-describedby":l.open?l.contentId:void 0,"data-state":l.stateAttribute,...s,ref:f,onPointerMove:a(e.onPointerMove,e=>{"touch"!==e.pointerType&&(h.current||c.isPointerInTransitRef.current||(l.onTriggerEnter(),h.current=!0))}),onPointerLeave:a(e.onPointerLeave,()=>{l.onTriggerLeave(),h.current=!1}),onPointerDown:a(e.onPointerDown,()=>{l.open&&l.onClose(),p.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:a(e.onFocus,()=>{p.current||l.onOpen()}),onBlur:a(e.onBlur,l.onClose),onClick:a(e.onClick,l.onClose)})})});tj.displayName=tw;var[tP,tN]=tc("TooltipPortal",{forceMount:void 0}),tS="TooltipContent",tC=i.forwardRef((e,t)=>{let r=tN(tS,e.__scopeTooltip),{forceMount:i=r.forceMount,side:a="top",...o}=e,s=tb(tS,e.__scopeTooltip);return(0,n.jsx)(tr,{present:i||s.open,children:s.disableHoverableContent?(0,n.jsx)(tA,{side:a,...o,ref:t}):(0,n.jsx)(tR,{side:a,...o,ref:t})})}),tR=i.forwardRef((e,t)=>{let r=tb(tS,e.__scopeTooltip),a=th(tS,e.__scopeTooltip),s=i.useRef(null),l=(0,o.useComposedRefs)(t,s),[c,d]=i.useState(null),{trigger:u,onClose:m}=r,f=s.current,{onPointerInTransitChange:p}=a,h=i.useCallback(()=>{d(null),p(!1)},[p]),x=i.useCallback((e,t)=>{let r,n=e.currentTarget,i={x:e.clientX,y:e.clientY},a=function(e,t){let r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,n,i,a)){case a:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw Error("unreachable")}}(i,n.getBoundingClientRect());d(((r=[...function(e,t,r=5){let n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(i,a),...function(e){let{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let n=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x))t.pop();else break}t.push(n)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let n=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(n.y-t.y)>=(e.y-t.y)*(n.x-t.x))r.pop();else break}r.push(n)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(r))),p(!0)},[p]);return i.useEffect(()=>()=>h(),[h]),i.useEffect(()=>{if(u&&f){let e=e=>x(e,f),t=e=>x(e,u);return u.addEventListener("pointerleave",e),f.addEventListener("pointerleave",t),()=>{u.removeEventListener("pointerleave",e),f.removeEventListener("pointerleave",t)}}},[u,f,x,h]),i.useEffect(()=>{if(c){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},n=u?.contains(t)||f?.contains(t),i=!function(e,t){let{x:r,y:n}=e,i=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let o=t[e],s=t[a],l=o.x,c=o.y,d=s.x,u=s.y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(i=!i)}return i}(r,c);n?h():i&&(h(),m())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[u,f,c,m,h]),(0,n.jsx)(tA,{...e,ref:l})}),[tk,tE]=tc(tg,{isInside:!1}),tT=((t=({children:e})=>(0,n.jsx)(n.Fragment,{children:e})).displayName="TooltipContent.Slottable",t.__radixId=ti,t),tA=i.forwardRef((e,t)=>{let{__scopeTooltip:r,children:a,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:l,...c}=e,d=tb(tS,r),u=tu(r),{onClose:m}=d;return i.useEffect(()=>(document.addEventListener(tf,m),()=>document.removeEventListener(tf,m)),[m]),i.useEffect(()=>{if(d.trigger){let e=e=>{let t=e.target;t?.contains(d.trigger)&&m()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[d.trigger,m]),(0,n.jsx)(x,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:m,children:(0,n.jsxs)(e4,{"data-state":d.stateAttribute,...u,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,n.jsx)(tT,{children:a}),(0,n.jsx)(tk,{scope:r,isInside:!0,children:(0,n.jsx)(tl,{id:d.contentId,role:"tooltip",children:o||a})})]})})});tC.displayName=tS;var tz="TooltipArrow";i.forwardRef((e,t)=>{let{__scopeTooltip:r,...i}=e,a=tu(r);return tE(tz,r).isInside?null:(0,n.jsx)(e6,{...a,...i,ref:t})}).displayName=tz;var tD=e.i(74614);let tM=i.forwardRef(({className:e,sideOffset:t=4,...r},i)=>(0,n.jsx)(tC,{ref:i,sideOffset:t,className:(0,tD.cn)("z-50 overflow-hidden rounded-md border border-zinc-800 bg-zinc-950 px-3 py-1.5 text-sm text-zinc-100 shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));tM.displayName=tC.displayName,e.s(["Tooltip",()=>tv,"TooltipContent",()=>tM,"TooltipProvider",()=>tx,"TooltipTrigger",()=>tj],12112)},843,e=>{"use strict";var t=e.i(25191),r=e.i(68524),n=e.i(34029);function i({data:e}){let i=(0,r.useMemo)(()=>e&&0!==e.length?[{name:"總價分佈",type:"boxPlot",data:e.map(e=>{let t=[e.minPrice,e.q1Price,e.medianPrice,e.q3Price,e.maxPrice];return t.some(e=>"number"!=typeof e||isNaN(e))?null:{x:null!==e.bathrooms?`${e.roomType}-${e.bathrooms}衛`:e.roomType,y:t.map(e=>Math.round(e))}}).filter(Boolean)}]:[],[e]),a=(0,r.useMemo)(()=>{if(0===i.length||0===i[0].data.length)return{};let e=i[0].data.flatMap(e=>e.y),t=Math.min(...e),r=Math.max(...e),n=r-t,a=0===n?Math.max(.1*t,100):.1*n;return{chart:{type:"boxPlot",height:450,background:"transparent",toolbar:{show:!0},foreColor:"#e5e7eb"},plotOptions:{boxPlot:{colors:{upper:"#06b6d4",lower:"#8b5cf6"},stroke:{colors:["#e5e7eb"]}}},xaxis:{type:"category",labels:{style:{colors:"#9ca3af"},rotate:-45,offsetY:5}},yaxis:{min:Math.max(0,t-a),max:r+a,title:{text:"房屋總價 (萬)",style:{color:"#9ca3af"}},labels:{formatter:e=>`${Math.round(e).toLocaleString()} 萬`,style:{colors:"#9ca3af"}}},tooltip:{custom:function({seriesIndex:e,dataPointIndex:t,w:r}){let n=r.globals.initialSeries[e].data[t].y;if(Array.isArray(n)&&5===n.length){let[e,t,r,i,a]=n;return`
                    <div class="apexcharts-tooltip-box" style="background: #18181b; border: 1px solid #27272a; padding: 8px 12px; border-radius: 8px; color: #fff;">
                        <div><strong>最高總價:</strong> ${a.toLocaleString()} 萬</div>
                        <div><strong>3/4位總價:</strong> ${i.toLocaleString()} 萬</div>
                        <div><strong>中位數總價:</strong> ${r.toLocaleString()} 萬</div>
                        <div><strong>1/4位總價:</strong> ${t.toLocaleString()} 萬</div>
                        <div><strong>最低總價:</strong> ${e.toLocaleString()} 萬</div>
                    </div>
                `}return""}}}},[i]);return e&&0!==e.length&&0!==i.length?(0,t.jsx)(n.default,{type:"boxPlot",series:i,options:a,height:450,className:"w-full"}):(0,t.jsx)("div",{className:"text-zinc-500 text-center p-8",children:"無總價帶資料可顯示"})}e.s(["PriceBandChart",()=>i])},71925,e=>{"use strict";var t=e.i(25191),r=e.i(68524),n=e.i(34029);function i({data:e,selectedRooms:i,metric:a}){let o=(0,r.useMemo)(()=>({count:{label:"交易筆數",unit:"筆",decimals:0},priceSum:{label:"產權總價",unit:"萬",decimals:0},areaSum:{label:"房屋坪數",unit:"坪",decimals:2}})[a],[a]),s=(0,r.useMemo)(()=>{if(!e||0===i.length)return[];let t=Object.keys(e).sort();return 0===t.length?[]:i.map(r=>({name:r,data:t.map(t=>e[t]?.[r]?.[a]||0)}))},[e,i,a]),l=(0,r.useMemo)(()=>({chart:{type:"line",height:350,background:"transparent",toolbar:{show:!0},zoom:{enabled:!1},foreColor:"#e5e7eb"},stroke:{curve:"smooth",width:2},dataLabels:{enabled:!1},xaxis:{categories:e?Object.keys(e).sort():[],labels:{style:{colors:"#9ca3af"}}},yaxis:{title:{text:o.label,style:{color:"#9ca3af"}},labels:{style:{colors:"#9ca3af"},formatter:e=>e.toLocaleString("zh-TW",{minimumFractionDigits:0,maximumFractionDigits:0})}},legend:{position:"top",horizontalAlign:"right"},tooltip:{theme:"dark",y:{formatter:e=>`${e.toLocaleString("zh-TW",{minimumFractionDigits:o.decimals,maximumFractionDigits:o.decimals})} ${o.unit}`}},grid:{borderColor:"#374151"}}),[e,o]);return e&&0!==Object.keys(e).length&&0!==i.length?(0,t.jsx)(n.default,{type:"line",series:s,options:l,height:350,className:"w-full"}):(0,t.jsx)("div",{className:"text-zinc-500 text-center p-8",children:"請選擇房型以顯示銷售趨勢"})}e.s(["SalesVelocityChart",()=>i])},30286,e=>{"use strict";var t=e.i(25191),r=e.i(68524),n=e.i(34029);function i({data:e,selectedRooms:i,minArea:a,maxArea:o,interval:s,onDataPointClick:l}){let c=(0,r.useMemo)(()=>[{from:0,to:0,color:"#27272a",name:"0 戶"},{from:1,to:5,color:"#facc15",name:"1-5 戶"},{from:6,to:20,color:"#fbbf24",name:"6-20 戶"},{from:21,to:50,color:"#f97316",name:"21-50 戶"},{from:51,to:1e4,color:"#dc2626",name:"> 50 戶"}],[]),{series:d,maxValue:u}=(0,r.useMemo)(()=>{if(!e||0===i.length)return{series:[],maxValue:0};let t=[];for(let e=a;e<o;e+=s)t.push(`${e.toFixed(1)}-${(e+s).toFixed(1)}`);let r=0;return{series:t.map(t=>{let[n,s]=t.split("-").map(parseFloat);return{name:t,data:i.map(t=>{let i=(e[t]||[]).filter(e=>e>=n&&e<s&&e>=a&&e<=o).length;return i>r&&(r=i),i})}}),maxValue:r}},[e,i,a,o,s]),m=(0,r.useMemo)(()=>({chart:{type:"heatmap",height:Math.max(400,22*d.length),background:"transparent",toolbar:{show:!0},foreColor:"#e5e7eb",events:{dataPointSelection:(e,t,r)=>{if(l){let{seriesIndex:e,dataPointIndex:t}=r,n=r.w.globals.seriesNames[e];l(i[t],n)}}}},plotOptions:{heatmap:{radius:0,useFillColorAsStroke:!0,enableShades:!1,colorScale:{ranges:c}}},dataLabels:{enabled:!0,style:{colors:[({value:e})=>0===e?"transparent":"#e5e7eb"]}},xaxis:{type:"category",categories:i},title:{text:"房型面積分佈熱力圖",align:"center",style:{color:"#e5e7eb",fontSize:"16px"}},grid:{borderColor:"#374151"},tooltip:{theme:"dark",y:{formatter:e=>0===e?"無成交紀錄":`${e} 戶`}}}),[d,i,c,l]);return e&&0!==d.length?(0,t.jsx)(n.default,{type:"heatmap",series:d,options:m,height:m.chart?.height||400,className:"w-full"}):(0,t.jsx)("div",{className:"text-zinc-500 text-center p-8",children:"無面積分佈資料"})}e.s(["AreaHeatmapChart",()=>i])},19542,e=>{"use strict";var t=e.i(25191),r=e.i(68524),n=e.i(1801),i=e.i(74614),a=e.i(42217);let o=({children:e,x:i,y:a,visible:o})=>{let[s,l]=(0,r.useState)(!1);return((0,r.useEffect)(()=>(l(!0),()=>l(!1)),[]),s&&o&&!("u"<typeof document))?(0,n.createPortal)((0,t.jsx)("div",{className:"fixed pointer-events-none z-[9999]",style:{left:i,top:a,transform:"translate(-50%, -100%) translateY(-12px)"},children:e}),document.body):null};function s({data:e,minPrice:n,maxPrice:s,interval:l,sizeMetric:c,onMinPriceChange:d,onMaxPriceChange:u,onIntervalChange:m,onSizeMetricChange:f}){let[p,h]=(0,r.useState)("natural"),[x,g]=(0,r.useState)(null),[y,b]=(0,r.useState)({x:0,y:0}),v=(0,r.useRef)(null),[w,j]=(0,r.useState)({width:0,height:0});(0,r.useEffect)(()=>{if(!v.current)return;let e=()=>{v.current&&j({width:v.current.clientWidth,height:v.current.clientHeight})};e(),window.addEventListener("resize",e);let t=setTimeout(e,200);return()=>{window.removeEventListener("resize",e),clearTimeout(t)}},[]);let P=(e,t)=>{let r=e.currentTarget.getBoundingClientRect();b({x:r.left+r.width/2,y:r.top}),g(t)},{buckets:N,validBuckets:S,maxValue:C}=(0,r.useMemo)(()=>{if(!e||0===e.length)return{buckets:[],validBuckets:[],maxValue:0};let t=[];for(let e=n;e<s;e+=l)t.push({min:e,max:Math.min(e+l,s),label:`${e}-${Math.min(e+l,s)}`,count:0,totalArea:0,avgPrice:0,transactions:[]});e.forEach(e=>{let r=e["房屋單價(萬)"],i=e["房屋面積(坪)"]||0;if("number"!=typeof r||r<n||r>=s)return;let a=Math.floor((r-n)/l);a>=0&&a<t.length&&(t[a].count++,t[a].totalArea+=i,t[a].transactions.push(e))});let r=t.filter(e=>e.count>0),i=Math.max(...r.map(e=>"count"===c?e.count:e.totalArea));return{buckets:t,validBuckets:r,maxValue:i}},[e,n,s,l,c]),{nodes:R,onMouseDown:k,dragId:E}=((e,t,n,i,a,o)=>{let[s,l]=(0,r.useState)([]),c=(0,r.useRef)(null),d=(0,r.useRef)(null),u=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!e.length||!t||!n)return;let r=t/2,o=n/2,s=e.map((e,t)=>{let r="count"===i?e.count:e.totalArea,n=a>0?30+r/a*80:30;return{id:e.label,value:r,radius:n/2,x:0,y:0,vx:0,vy:0,origIndex:t}});s.sort((e,t)=>e.value-t.value),s=s.map((e,t)=>{let n=2.39996*t,i=10*Math.sqrt(t)*2.5;return{...e,x:r+Math.cos(n)*i,y:o+Math.sin(n)*i}});for(let e=0;e<120;e++)for(let e=0;e<s.length;e++)for(let t=e+1;t<s.length;t++){let r=s[e],n=s[t],i=n.x-r.x,a=n.y-r.y,o=i*i+a*a,l=r.radius+n.radius+5;if(o<l*l&&o>0){let e=Math.sqrt(o),t=l-e,s=i/e,c=a/e,d=.5*t;r.x-=s*d,r.y-=c*d,n.x+=s*d,n.y+=c*d}}l(s)},[e,t,n,i,a]),(0,r.useEffect)(()=>{if(!o)return;let e=e=>{u.current={x:e.clientX,y:e.clientY}},t=()=>{d.current=null,u.current=null};return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[o]),(0,r.useEffect)(()=>{if(!o||0===s.length||!t)return;let e=t/2,r=n/2,i=()=>{l(t=>{let n=t.map(e=>({...e})),i=0,a=0,o=0,s=0;d.current&&u.current&&(i=u.current.x-d.current.startX,a=u.current.y-d.current.startY,o=d.current.nodeOrigX+i,s=d.current.nodeOrigY+a),n.forEach(t=>{if(d.current?.id===t.id)t.x=o,t.y=s,t.vx=0,t.vy=0;else{let n=e-t.x,i=r-t.y;t.vx+=.05*n*.05,t.vy+=.05*i*.05,t.vx+=(Math.random()-.5)*.003,t.vy+=(Math.random()-.5)*.003,t.x+=t.vx,t.y+=t.vy,t.vx*=.94,t.vy*=.94}});for(let e=0;e<6;e++)for(let e=0;e<n.length;e++)for(let t=e+1;t<n.length;t++){let r=n[e],i=n[t],a=d.current?.id===r.id,o=d.current?.id===i.id,s=i.x-r.x,l=i.y-r.y,c=s*s+l*l,u=r.radius+i.radius+5;if(c<u*u&&c>0){let e=Math.sqrt(c),t=u-e,n=s/e,d=l/e,m=.5*t;a?(i.x+=n*t,i.y+=d*t):o?(r.x-=n*t,r.y-=d*t):(r.x-=n*m,r.y-=d*m,i.x+=n*m,i.y+=d*m)}}return n}),c.current=requestAnimationFrame(i)};return c.current=requestAnimationFrame(i),()=>{null!==c.current&&cancelAnimationFrame(c.current)}},[o,t,n,s.length]),{nodes:s,onMouseDown:(e,t,r,n)=>{e.preventDefault(),d.current={id:t,startX:e.clientX,startY:e.clientY,nodeOrigX:r,nodeOrigY:n},u.current={x:e.clientX,y:e.clientY}},dragId:d.current?.id}})(S,w.width,w.height,c,C,"natural"===p);if(!e||0===e.length)return(0,t.jsx)("div",{className:"text-zinc-500 text-center p-8",children:"無交易資料可顯示"});let T=(e,t)=>{let r,n,i=e/(t-1||1);return i<.33?(r="radial-gradient(circle at 30% 30%, rgb(167, 139, 250), rgb(124, 58, 237))",n="rgba(124, 58, 237, 0.4)"):i<.66?(r="radial-gradient(circle at 30% 30%, rgb(34, 211, 238), rgb(8, 145, 178))",n="rgba(8, 145, 178, 0.4)"):(r="radial-gradient(circle at 30% 30%, rgb(52, 211, 153), rgb(5, 150, 105))",n="rgba(5, 150, 105, 0.4)"),{background:r,shadowColor:n}},A=null!==x?S[x]:null;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(o,{x:y.x,y:y.y,visible:null!==x&&!!A&&!E,children:A&&(0,t.jsxs)("div",{className:"px-4 py-3 bg-zinc-900/90 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl min-w-[160px] animate-in fade-in zoom-in-95 duration-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-zinc-400",children:"成交單價"}),(0,t.jsx)("span",{className:"text-sm font-bold text-white",children:A.label})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"成交筆數"}),(0,t.jsxs)("span",{className:"font-medium text-violet-300",children:[A.count," 筆"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"總銷坪數"}),(0,t.jsxs)("span",{className:"font-medium text-cyan-300",children:[Math.round(A.totalArea)," 坪"]})]})]}),(0,t.jsx)("div",{className:"absolute left-1/2 bottom-0 -mb-1 w-2 h-2 bg-zinc-900/90 border-r border-b border-white/10 rotate-45 -translate-x-1/2"})]})}),(0,t.jsxs)("div",{className:"flex flex-col xl:flex-row items-start xl:items-center justify-between gap-4 p-4 bg-zinc-900/30 border border-white/5 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-zinc-400 text-xs",children:"單價範圍"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(a.Input,{type:"number",value:n,onChange:e=>d(Number(e.target.value)),className:"w-16 h-7 text-xs bg-zinc-950/50 border-white/10 px-2"}),(0,t.jsx)("span",{className:"text-zinc-600",children:"-"}),(0,t.jsx)(a.Input,{type:"number",value:s,onChange:e=>u(Number(e.target.value)),className:"w-16 h-7 text-xs bg-zinc-950/50 border-white/10 px-2"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-zinc-400 text-xs",children:"級距"}),(0,t.jsx)(a.Input,{type:"number",value:l,onChange:e=>m(Number(e.target.value)),className:"w-14 h-7 text-xs bg-zinc-950/50 border-white/10 px-2"})]}),(0,t.jsxs)("div",{className:"flex bg-zinc-950/50 rounded-md p-0.5 border border-white/10",children:[(0,t.jsx)("button",{onClick:()=>f("count"),className:(0,i.cn)("px-2.5 py-1 text-[10px] rounded transition-colors","count"===c?"bg-violet-500 text-white shadow-sm":"text-zinc-400 hover:text-white"),children:"成交筆數"}),(0,t.jsx)("button",{onClick:()=>f("area"),className:(0,i.cn)("px-2.5 py-1 text-[10px] rounded transition-colors","area"===c?"bg-violet-500 text-white shadow-sm":"text-zinc-400 hover:text-white"),children:"總銷坪數"})]})]}),(0,t.jsxs)("div",{className:"bg-zinc-950/50 p-1 rounded-lg border border-white/5 flex gap-1 self-end xl:self-auto",children:[(0,t.jsx)("button",{onClick:()=>h("natural"),className:(0,i.cn)("px-3 py-1.5 text-xs font-medium rounded-md transition-all duration-300","natural"===p?"bg-gradient-to-r from-violet-600 to-indigo-600 text-white shadow-lg shadow-violet-500/20":"text-zinc-500 hover:text-zinc-300"),children:(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,t.jsx)("span",{className:(0,i.cn)("absolute inline-flex h-full w-full rounded-full bg-violet-400 opacity-75","natural"===p&&"animate-ping")}),(0,t.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-violet-500"})]}),"無重力模式"]})}),(0,t.jsx)("button",{onClick:()=>h("coordinate"),className:(0,i.cn)("px-3 py-1.5 text-xs font-medium rounded-md transition-all duration-300","coordinate"===p?"bg-gradient-to-r from-violet-600 to-indigo-600 text-white shadow-lg shadow-violet-500/20":"text-zinc-500 hover:text-zinc-300"),children:(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsxs)("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M3 3v18h18"}),(0,t.jsx)("path",{d:"M18 17V9"}),(0,t.jsx)("path",{d:"M13 17V5"}),(0,t.jsx)("path",{d:"M8 17v-3"})]}),"座標模式"]})})]})]}),(0,t.jsxs)("div",{ref:v,className:(0,i.cn)("relative rounded-3xl overflow-hidden border border-white/5 transition-all duration-500","bg-gradient-to-b from-zinc-900 via-zinc-900 to-zinc-950","h-full min-h-[300px]"),children:[(0,t.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),(0,t.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-violet-500/10 rounded-full blur-[100px]"}),(0,t.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-cyan-500/10 rounded-full blur-[100px]"})]}),(0,t.jsxs)("div",{className:"relative w-full h-full min-h-[300px]",children:["natural"===p&&(0,t.jsxs)("div",{className:"absolute inset-0",children:[R.map((e,r)=>{let n=x===e.origIndex,a=E===e.id,o=T(e.origIndex,S.length),s=2*e.radius;return(0,t.jsxs)("div",{className:(0,i.cn)("absolute block rounded-full select-none cursor-grab active:cursor-grabbing will-change-transform",a?"z-[100] scale-110 shadow-2xl":"transition-[transform,box-shadow] duration-75 ease-linear"),style:{width:s,height:s,left:0,top:0,transform:`translate(${e.x-e.radius}px, ${e.y-e.radius}px) scale(${n||a?1.1:1})`,background:o.background,boxShadow:a?`0 25px 50px -12px ${o.shadowColor}, inset 0 2px 20px rgba(255,255,255,0.6)`:n?`0 20px 40px -10px ${o.shadowColor}, inset 0 2px 20px rgba(255,255,255,0.4)`:`0 10px 30px -10px ${o.shadowColor}, inset 0 2px 10px rgba(255,255,255,0.2)`,zIndex:a?100:n?50:10},onMouseEnter:t=>P(t,e.origIndex),onMouseLeave:()=>g(null),onMouseDown:t=>k(t,e.id,e.x,e.y),children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-tr from-white/0 via-white/0 to-white/30 opacity-50 pointer-events-none"}),(0,t.jsx)("div",{className:"absolute top-[15%] left-[15%] w-[25%] h-[15%] rounded-[100%] bg-white blur-[2px] opacity-40 transform -rotate-45 pointer-events-none"}),(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center z-20 pointer-events-none",children:[(0,t.jsx)("div",{className:(0,i.cn)("font-bold text-white drop-shadow-md leading-none",s>80?"text-2xl":s>60?"text-lg":"text-sm","mix-blend-overlay opacity-90"),children:e.value>=1?Math.round(e.value):e.value.toFixed(1)}),s>80&&(0,t.jsx)("div",{className:"text-[10px] text-white/70 mt-1 font-medium tracking-wide",children:"count"===c?"筆":"坪"})]})]},e.id)}),(0,t.jsx)("div",{className:"absolute bottom-4 left-0 right-0 text-center text-xs text-zinc-500 font-medium tracking-widest uppercase opacity-50 pointer-events-none",children:"Zero Gravity • Force Layout • Draggable"})]}),"coordinate"===p&&(0,t.jsxs)("div",{className:"absolute inset-0 p-8",children:[(0,t.jsx)("div",{className:"flex flex-col justify-between py-6 pr-6 text-right w-[60px] border-r border-white/5 relative z-10 h-full float-left",children:[...Array(6)].map((e,r)=>(0,t.jsx)("span",{className:"text-xs font-mono text-zinc-600 block",children:Math.round(s-(s-n)/5*r)},r))}),(0,t.jsxs)("div",{className:"relative ml-[76px] h-full",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none",children:[...Array(6)].map((e,r)=>(0,t.jsx)("div",{className:"w-full h-px border-t border-dashed border-zinc-800"},r))}),(0,t.jsx)("div",{className:"absolute inset-0",children:S.map((e,r)=>{var a;let o=(a="count"===c?e.count:e.totalArea,0===C?40:40+a/C*100),l=(e.min+e.max)/2,d=r/(S.length-1||1)*90+5,u=100-(l-n)/(s-n)*100,m=x===r,f=T(r,S.length);return(0,t.jsx)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 transition-all duration-500",style:{left:`${d}%`,top:`${u}%`,zIndex:m?50:20},onMouseEnter:e=>P(e,r),onMouseLeave:()=>g(null),children:(0,t.jsx)("div",{className:(0,i.cn)("relative rounded-full flex items-center justify-center cursor-pointer shadow-lg transition-transform duration-300",m?"scale-110":"scale-100"),style:{width:o,height:o,background:f.background,boxShadow:m?`0 10px 20px -5px ${f.shadowColor}, inset 0 2px 10px rgba(255,255,255,0.3)`:`0 5px 15px -5px ${f.shadowColor}, inset 0 2px 5px rgba(255,255,255,0.2)`},children:(0,t.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-tr from-transparent to-white/30 opacity-60"})})},e.label)})}),(0,t.jsxs)("div",{className:"absolute bottom-0 inset-x-0 flex justify-between text-xs text-zinc-600 font-mono translate-y-full pt-2",children:[(0,t.jsx)("span",{children:"Low Price"}),(0,t.jsx)("span",{children:"High Price"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-2 text-xs text-zinc-500",children:[(0,t.jsxs)("div",{children:["* Bubble size represents ","count"===c?"Transaction Count":"Total Area"]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-violet-500"}),(0,t.jsx)("span",{children:"Low"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-cyan-500"}),(0,t.jsx)("span",{children:"Mid"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),(0,t.jsx)("span",{children:"High"})]})]})]})]})}e.s(["BubbleChart",()=>s])},99432,78956,e=>{"use strict";var t=e.i(25191),r=e.i(74614);function n({title:e,stats:n,noDataMessage:i="無資料",className:a,averageType:o="weighted"}){if(!n||0===n.count)return(0,t.jsxs)("div",{className:(0,r.cn)("p-6 border border-white/5 rounded-lg bg-zinc-900/30",a),children:[(0,t.jsx)("h3",{className:"text-zinc-400 font-medium mb-4",children:e}),(0,t.jsx)("p",{className:"text-zinc-500 text-center py-4",children:i})]});let s="weighted"===o&&n.weightedAvgPrice?n.weightedAvgPrice:n.avgPrice;return(0,t.jsxs)("div",{className:(0,r.cn)("p-6 border border-white/5 rounded-lg bg-zinc-900/30",a),children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:e}),(0,t.jsxs)("span",{className:"text-xs text-zinc-500 bg-zinc-800 px-2 py-1 rounded",children:["樣本數: ",n.count]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsx)("table",{className:"w-full text-sm",children:(0,t.jsxs)("tbody",{className:"divide-y divide-white/5",children:[(0,t.jsxs)("tr",{className:"group",children:[(0,t.jsx)("td",{className:"py-2 text-zinc-400",children:"weighted"===o?"加權平均單價":"算術平均單價"}),(0,t.jsxs)("td",{className:"py-2 text-right font-mono text-white group-hover:text-cyan-400 transition-colors",children:[(0,r.formatNumber)(s)," 萬/坪"]})]}),(0,t.jsxs)("tr",{className:"group",children:[(0,t.jsx)("td",{className:"py-2 text-zinc-400",children:"最低單價"}),(0,t.jsx)("td",{className:"py-2 text-right font-mono text-zinc-300 group-hover:text-white transition-colors",children:(0,r.formatNumber)(n.minPrice)})]}),(0,t.jsxs)("tr",{className:"group",children:[(0,t.jsx)("td",{className:"py-2 text-zinc-400",children:"1/4分位數"}),(0,t.jsx)("td",{className:"py-2 text-right font-mono text-zinc-300 group-hover:text-white transition-colors",children:(0,r.formatNumber)(n.q1Price)})]}),(0,t.jsxs)("tr",{className:"group",children:[(0,t.jsx)("td",{className:"py-2 text-violet-400 font-medium",children:"中位數單價"}),(0,t.jsx)("td",{className:"py-2 text-right font-mono text-violet-400 font-bold",children:(0,r.formatNumber)(n.medianPrice)})]}),(0,t.jsxs)("tr",{className:"group",children:[(0,t.jsx)("td",{className:"py-2 text-zinc-400",children:"3/4分位數"}),(0,t.jsx)("td",{className:"py-2 text-right font-mono text-zinc-300 group-hover:text-white transition-colors",children:(0,r.formatNumber)(n.q3Price)})]}),(0,t.jsxs)("tr",{className:"group",children:[(0,t.jsx)("td",{className:"py-2 text-zinc-400",children:"最高單價"}),(0,t.jsx)("td",{className:"py-2 text-right font-mono text-zinc-300 group-hover:text-white transition-colors",children:(0,r.formatNumber)(n.maxPrice)})]})]})})}),(0,t.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,t.jsxs)("div",{className:"p-3 bg-zinc-950/50 rounded border border-white/5",children:[(0,t.jsx)("div",{className:"text-cyan-500 font-medium mb-1 text-xs uppercase tracking-wider",children:"最高價建案"}),(0,t.jsx)("div",{className:"text-white font-bold text-lg mb-1",children:n.maxPriceProject||"N/A"}),(0,t.jsxs)("div",{className:"flex gap-4 text-zinc-400 text-xs",children:[(0,t.jsxs)("span",{children:["戶型: ",n.maxPriceUnit||"-"]}),(0,t.jsxs)("span",{children:["樓層: ",n.maxPriceFloor||"-"]})]})]}),(0,t.jsxs)("div",{className:"p-3 bg-zinc-950/50 rounded border border-white/5",children:[(0,t.jsx)("div",{className:"text-green-500 font-medium mb-1 text-xs uppercase tracking-wider",children:"最低價建案"}),(0,t.jsx)("div",{className:"text-white font-bold text-lg mb-1",children:n.minPriceProject||"N/A"}),(0,t.jsxs)("div",{className:"flex gap-4 text-zinc-400 text-xs",children:[(0,t.jsxs)("span",{children:["戶型: ",n.minPriceUnit||"-"]}),(0,t.jsxs)("span",{children:["樓層: ",n.minPriceFloor||"-"]})]})]})]})]})]})}e.s(["UnitPriceStatsBlock",()=>n],99432);var i=e.i(68524),a=e.i(1801),o=e.i(91568);let s=(0,o.default)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]),l=(0,o.default)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),c=(0,o.default)("sprout",[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var d=e.i(52973);let u=(e,t=0)=>e?.toLocaleString(void 0,{maximumFractionDigits:t}),m=({children:e,triggerRect:r,isTopRow:n})=>{if(!r)return null;let i={position:"fixed",left:r.left+r.width/2,transform:"translateX(-50%)",zIndex:9999};return n?i.top=r.bottom+8:i.bottom=window.innerHeight-r.top+8,(0,a.createPortal)((0,t.jsx)("div",{style:i,className:"pointer-events-none",children:e}),document.body)};function f({data:e,floorPremium:n=.3,showGrid:a=!0,showSummary:o=!0,showComparison:f=!0}){let{horizontalGrid:p,sortedFloors:h,sortedUnits:x,unitColorMap:g,summary:y,horizontalComparison:b}=e,[v,w]=(0,i.useState)(null),j=()=>{w(null)};return p&&h&&x?(0,t.jsxs)("div",{className:"space-y-8 overflow-x-auto relative",children:[v&&(0,t.jsx)(m,{triggerRect:v.rect,isTopRow:v.isTopRow,children:(0,t.jsx)("div",{className:"w-48 bg-zinc-900 border border-zinc-700 rounded-lg p-3 shadow-xl animate-in fade-in zoom-in-95 duration-200",children:(0,t.jsxs)("div",{className:"space-y-1",children:[0===v.data.premium&&(0,t.jsx)("div",{className:"text-cyan-400 font-bold mb-1",children:"★ 基準戶"}),null!==v.data.premium&&(0,t.jsxs)("div",{className:"text-zinc-300",children:["調價: ",(0,t.jsxs)("span",{className:(0,r.cn)(v.data.premium>0?"text-red-400":v.data.premium<0?"text-violet-400":"text-zinc-400"),children:[v.data.premium>0?"+":"",v.data.premium.toFixed(2),"%"]})]}),(0,t.jsx)("div",{className:"h-px bg-zinc-700 my-2"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1 text-xs text-zinc-400",children:[(0,t.jsx)("span",{children:"成交總價:"})," ",(0,t.jsxs)("span",{className:"text-white text-right",children:[u(v.data.tooltipInfo.totalPrice),"萬"]}),(0,t.jsx)("span",{children:"房屋總價:"})," ",(0,t.jsxs)("span",{className:"text-white text-right",children:[u(v.data.tooltipInfo.housePrice),"萬"]}),(0,t.jsx)("span",{children:"車位總價:"})," ",(0,t.jsxs)("span",{className:"text-white text-right",children:[u(v.data.tooltipInfo.parkingPrice),"萬"]}),(0,t.jsx)("span",{children:"房屋面積:"})," ",(0,t.jsxs)("span",{className:"text-white text-right",children:[u(v.data.tooltipInfo.houseArea,2),"坪"]})]})]})})}),a&&(0,t.jsx)("div",{className:"min-w-max pb-32",children:(0,t.jsxs)("table",{className:"divide-y divide-zinc-800 border-collapse w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"sticky left-0 bg-dark-card z-20 p-2 text-zinc-400 border-r border-zinc-800",children:"樓層 \\ 戶別"}),x.map(e=>(0,t.jsx)("th",{className:"p-2 text-zinc-300 font-medium border-l border-zinc-800/50 bg-zinc-900/50",children:e},e))]})}),(0,t.jsx)("tbody",{className:"divide-y divide-zinc-800/50",children:h.map((e,n)=>(0,t.jsxs)("tr",{className:"hover:bg-zinc-800/30 transition-colors",children:[(0,t.jsx)("td",{className:"sticky left-0 bg-dark-card z-10 p-2 font-bold text-zinc-300 border-r border-zinc-800 text-center",children:e}),x.map(i=>{let a=p[e]?.[i];return a&&0!==a.length?(0,t.jsx)("td",{className:"p-1 border-l border-zinc-800/50 align-top",children:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:a.map((e,i)=>{var a;let o=(a=e.premium,e.isStorefront?"rgba(217, 119, 6, 0.4)":e.isOffice?"rgba(37, 99, 235, 0.4)":null===a?"#1f2937":a<0?"rgba(139, 92, 246, 0.4)":0===a?"#06b6d4":a>5?"rgba(244, 63, 94, 0.5)":a>2?"rgba(234, 179, 8, 0.4)":"rgba(34, 197, 94, 0.3)"),u=e.isStorefront?{icon:(0,t.jsx)(s,{className:"w-3 h-3"}),label:"店舖"}:e.isOffice?{icon:(0,t.jsx)(l,{className:"w-3 h-3"}),label:"辦公"}:e.remark?.includes("露台")?{icon:(0,t.jsx)(c,{className:"w-3 h-3"}),label:"露台"}:e.remark?.includes("親友")||e.remark?.includes("員工")?{icon:(0,t.jsx)(d.Users,{className:"w-3 h-3"}),label:"親友"}:null,m=0===e.premium,f=n<3;return(0,t.jsxs)("div",{className:(0,r.cn)("p-1.5 rounded text-xs transition-transform hover:scale-105 cursor-default relative group",m&&"ring-1 ring-cyan-500"),style:{backgroundColor:o},onMouseEnter:t=>{w({rect:t.currentTarget.getBoundingClientRect(),data:e,isTopRow:f})},onMouseLeave:j,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,t.jsxs)("span",{className:"font-semibold text-white flex items-center gap-1",children:[u&&(0,t.jsx)("span",{className:"text-zinc-200",title:u.label,children:u.icon}),e.unitPrice.toFixed(1),"萬"]}),e.hasParking&&(0,t.jsx)("span",{className:"flex items-center justify-center w-3.5 h-3.5 bg-blue-500 text-white text-[9px] font-bold rounded-sm ml-0.5",title:"含車位",children:"P"})]}),(0,t.jsx)("div",{className:"text-[10px] text-zinc-300 mt-0.5 font-mono tracking-tight opacity-90",children:e.transactionDate||"-"})]},i)})})},`${e}-${i}`):(0,t.jsx)("td",{className:"p-2 border-l border-zinc-800/50 bg-zinc-900/20 text-center text-zinc-600",children:"-"},`${e}-${i}`)})]},e))})]})}),o&&y&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-zinc-200",children:"調價幅度統計摘要 (排除店舖/辦公室)"}),(0,t.jsx)("div",{className:"overflow-x-auto rounded-lg border border-zinc-800",children:(0,t.jsxs)("table",{className:"w-full text-sm text-left text-zinc-300",children:[(0,t.jsx)("thead",{className:"text-xs text-zinc-400 uppercase bg-zinc-900/50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3",children:"基準房屋總價"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"調價幅度總額"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"總溢價率"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"已售房屋坪數"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"平均單價調價"})]})}),(0,t.jsx)("tbody",{children:(0,t.jsxs)("tr",{className:"bg-zinc-900/20 border-b border-zinc-800",children:[(0,t.jsxs)("td",{className:"px-6 py-4",children:[u(y.totalBaselineHousePrice)," 萬"]}),(0,t.jsxs)("td",{className:(0,r.cn)("px-6 py-4 font-bold",y.totalPricePremiumValue>0?"text-red-400":"text-violet-400"),children:[y.totalPricePremiumValue>0?"+":"",u(y.totalPricePremiumValue)," 萬"]}),(0,t.jsxs)("td",{className:"px-6 py-4",children:[(y.totalPricePremiumValue/y.totalBaselineHousePrice*100).toFixed(2)," %"]}),(0,t.jsxs)("td",{className:"px-6 py-4",children:[u(y.totalSoldArea)," 坪"]}),(0,t.jsxs)("td",{className:(0,r.cn)("px-6 py-4",y.totalPricePremiumValue>0?"text-red-400":"text-violet-400"),children:[(y.totalPricePremiumValue/y.totalSoldArea).toFixed(2)," 萬/坪"]})]})})]})})]}),f&&b&&b.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-zinc-200",children:"戶型水平價差與溢價貢獻"}),(0,t.jsx)("div",{className:"overflow-x-auto rounded-lg border border-zinc-800",children:(0,t.jsxs)("table",{className:"w-full text-sm text-left text-zinc-300",children:[(0,t.jsx)("thead",{className:"text-xs text-zinc-400 uppercase bg-zinc-900/50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3",children:"戶型"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"基準戶 (樓/價)"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"水平價差(萬/坪)"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"去化戶數"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"溢價貢獻"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"貢獻佔比"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"基準房屋總價"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"平均單價調價"})]})}),(0,t.jsx)("tbody",{children:b.map((e,n)=>(0,t.jsxs)("tr",{className:"bg-zinc-900/20 border-b border-zinc-800 hover:bg-zinc-800/20",children:[(0,t.jsx)("td",{className:"px-4 py-3 font-medium text-white",children:e.unitType}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.anchorInfo}),(0,t.jsx)("td",{className:(0,r.cn)("px-4 py-3",(e.horizontalPriceDiff||0)>0?"text-red-400":"text-zinc-400"),children:"number"==typeof e.horizontalPriceDiff?`${e.horizontalPriceDiff>0?"+":""}${e.horizontalPriceDiff.toFixed(2)} 萬/坪`:"-"}),(0,t.jsxs)("td",{className:"px-4 py-3",children:[e.unitsSold," 戶"]}),(0,t.jsxs)("td",{className:(0,r.cn)("px-4 py-3 font-bold",e.timePremiumContribution>0?"text-red-400":"text-violet-400"),children:[e.timePremiumContribution>0?"+":"",u(e.timePremiumContribution)," 萬"]}),(0,t.jsxs)("td",{className:"px-4 py-3",children:["number"==typeof e.contributionPercentage?e.contributionPercentage.toFixed(2):"0.00","%"]}),(0,t.jsxs)("td",{className:"px-4 py-3",children:[u(e.baselineHousePrice)," 萬"]}),(0,t.jsxs)("td",{className:"px-4 py-3",children:["number"==typeof e.avgPriceAdjustment?e.avgPriceAdjustment.toFixed(2):"-"," 萬/坪"]})]},n))})]})})]})]}):(0,t.jsx)("div",{className:"text-zinc-500 text-center p-8",children:"無有效熱力圖資料"})}e.s(["PricingHeatmap",()=>f],78956)},67874,e=>{"use strict";let t=(0,e.i(91568).default)("table-2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);e.s(["Table2",()=>t],67874)},14302,e=>{"use strict";var t=e.i(68524),r=e.i(68609),n=e.i(78885),i=e.i(72448),a=e.i(59725);function o(e,t){let r=(e.length-1)*t,n=Math.floor(r);return void 0!==e[n+1]?parseFloat((e[n]+(r-n)*(e[n+1]-e[n])).toFixed(2)):parseFloat(e[n].toFixed(2))}function s(){let e=(0,n.useFilterStore)(),[s,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null),u=(0,t.useCallback)(async()=>{l(!0),d(null),e.setAnalysisData(null);try{let c=e.counties.map(e=>i.COUNTY_CODE_MAP[e]||e);if(0===c.length){d("請至少選擇一個縣市"),l(!1);return}let{dateRange:u,startDate:m,endDate:f}=e;if("custom"!==u&&(!m||!f)){let e=(0,a.getDateRangeDates)(u);e.startDate&&e.endDate&&(m=e.startDate,f=e.endDate)}let p={districts:e.districts,transactionType:e.transactionType,type:e.transactionType,projectNames:e.projectNames,buildingType:e.buildingType,excludeCommercial:e.excludeCommercial,floorPremium:e.floorPremium,dateRange:u,dateStart:m,dateEnd:f};console.log("[useAnalysisData] Analyzing with counties:",c);let h=c.map(e=>{let t={...p,countyCode:e,counties:[e]};return r.api.analyzeProjectRanking(t).catch(t=>(console.error(`Failed to fetch data for ${e}:`,t),null))}),x=await Promise.all(h),g=null,y=0;for(let e of x)if(e&&e.projectRanking&&e.coreMetrics){var t,n,s;console.log("Merging result for county:",e.projectRanking?.[0]?.county),t=g,g=e?t?(e.transactionDetails&&Array.isArray(e.transactionDetails)&&(t.transactionDetails||(t.transactionDetails=[]),t.transactionDetails=[...t.transactionDetails,...e.transactionDetails]),t.coreMetrics=function(e,t){if(!t)return e;if(!e)return t;let r=(e.totalSaleAmount||0)+(t.totalSaleAmount||0),n=(e.totalHouseArea||0)+(t.totalHouseArea||0),i=(e.transactionCount||0)+(t.transactionCount||0);return{totalSaleAmount:r,totalHouseArea:n,overallAveragePrice:n>0?r/n:0,transactionCount:i,medianPrice:0,q1Price:0,q3Price:0,minPrice:Math.min(e.minPrice||1/0,t.minPrice||1/0),maxPrice:Math.max(e.maxPrice||0,t.maxPrice||0)}}(t.coreMetrics,e.coreMetrics),e.projectRanking&&Array.isArray(e.projectRanking)&&(t.projectRanking=[...t.projectRanking,...e.projectRanking]),t.priceBandAnalysis=function(e,t){if(!t)return e;let r=Array.isArray(e)?e:e?.details||[],n=Array.isArray(t)?t:t?.details||[],i=e?.locationCrossTable||{},a=t?.locationCrossTable||{},o=e?.allDistricts||[],s=t?.allDistricts||[],l=e?.allRoomTypes||[],c=t?.allRoomTypes||[],d=new Map,u=e=>{let t=null!==e.bathrooms&&void 0!==e.bathrooms?String(e.bathrooms):"null",r=(e.roomType||"").replace(/\s+/g,""),n=`${r}-${t}`,i=Number(e.count)||0,a=Number(e.avgPrice)||0,o=Number(e.minPrice)||0,s=Number(e.maxPrice)||0;if(d.has(n)){let t=d.get(n),r=Number(t.count)||0,l=Number(t.avgPrice)||0,c=a*i,u=r+i,m=u>0?(l*r+c)/u:0;if(t.count=u,t.avgPrice=parseFloat(m.toFixed(2)),t.minPrice=Math.min(t.minPrice,o),t.maxPrice=Math.max(t.maxPrice,s),e.projectNames){let r=new Set([...t.projectNames,...e.projectNames]);t.projectNames=Array.from(r)}e.byDistrict&&Object.entries(e.byDistrict).forEach(([e,r])=>{t.byDistrict[e]=(t.byDistrict[e]||0)+r})}else d.set(n,{...e,roomType:r,count:i,avgPrice:a,minPrice:o,maxPrice:s,projectNames:e.projectNames?[...e.projectNames]:[],byDistrict:e.byDistrict?{...e.byDistrict}:{}})};r.forEach(u),n.forEach(u);let m={...i};Object.entries(a).forEach(([e,t])=>{m[e]?Object.entries(t).forEach(([t,r])=>{m[e][t]=(m[e][t]||0)+r}):m[e]={...t}});let f=Array.from(new Set([...o,...s])).sort(),p=Array.from(new Set([...l,...c])).sort();return{details:Array.from(d.values()),locationCrossTable:m,allDistricts:f,allRoomTypes:p}}(t.priceBandAnalysis,e.priceBandAnalysis),t.unitPriceAnalysis=function(e,t){if(!t)return e;let r=(e,t)=>{if(!t)return e;if(!e)return t;let r=(e.count||0)+(t.count||0);if(0===r)return e;let n={arithmetic:0,weighted:0},i=(e,t)=>"number"==typeof e.avgPrice?e.weightedAvgPrice||e.avgPrice:e.avgPrice?.[t]||0;["arithmetic","weighted"].forEach(a=>{let o=i(e,a),s=i(t,a);n[a]=(o*(e.count||0)+s*(t.count||0))/r});let a=Math.min(e.minPrice,t.minPrice),o=Math.max(e.maxPrice,t.maxPrice),s=e.minPrice<t.minPrice?e.minPriceProject:t.minPriceProject;return{count:r,avgPrice:n,minPrice:a,maxPrice:o,minPriceProject:s,maxPriceProject:e.maxPrice>t.maxPrice?e.maxPriceProject:t.maxPriceProject,medianPrice:0,q1Price:0,q3Price:0}},n=r(e.residentialStats,t.residentialStats),i=r(e.officeStats,t.officeStats),a=r(e.storeStats,t.storeStats),o=[...e.typeComparison||[]];return t.typeComparison&&(o=[...o,...t.typeComparison]),{residentialStats:n,officeStats:i,storeStats:a,typeComparison:o}}(t.unitPriceAnalysis,e.unitPriceAnalysis),t.transactionDetails&&t.transactionDetails.length>0&&function(e,t){if(!e||!t||0===t.length)return;let r=[],n={price:0,area:0,count:0},i=[],a={price:0,area:0,count:0},s=[],l={price:0,area:0,count:0},c=()=>({minPrice:1/0,maxPrice:-1/0,minRecord:null,maxRecord:null}),d=c(),u=c(),m=c();t.forEach(e=>{let t=e["建物型態"],o=e["主要用途"],c=e["房屋單價(萬)"],f=e["房屋總價(萬)"]||0,p=e["建物移轉總面積"]||0;if("number"!=typeof c||c<=0)return;let h=r,x=n,g=d;t?.includes("店")||"商業用"===o||e["備註"]?.includes("店")?(h=s,x=l,g=m):(t?.includes("辦公")||t?.includes("廠辦")||t?.includes("事務所")||o?.includes("辦公"))&&(h=i,x=a,g=u),h.push(c),x.price+=f,x.area+=p,x.count+=1,c>g.maxPrice&&(g.maxPrice=c,g.maxRecord=e),c<g.minPrice&&(g.minPrice=c,g.minRecord=e)});let f=(e,t,r,n)=>{e&&(function(e,t){if(!t||0===t.length){e.medianPrice=0,e.q1Price=0,e.q3Price=0;return}t.sort((e,t)=>e-t),e.medianPrice=o(t,.5),e.q1Price=o(t,.25),e.q3Price=o(t,.75)}(e,t),e.count=r.count,e.avgPrice=r.count>0?t.reduce((e,t)=>e+t,0)/r.count:0,e.weightedAvgPrice=r.area>0?r.price/r.area:0,n.maxRecord&&(e.maxPrice=n.maxPrice,e.maxPriceProject=n.maxRecord["建案名稱"],e.maxPriceUnit=n.maxRecord["戶型"]||n.maxRecord["戶別"],e.maxPriceFloor=n.maxRecord["樓層"]),n.minRecord&&(e.minPrice=n.minPrice,e.minPriceProject=n.minRecord["建案名稱"],e.minPriceUnit=n.minRecord["戶型"]||n.minRecord["戶別"],e.minPriceFloor=n.minRecord["樓層"]))};e.residentialStats&&f(e.residentialStats,r,n,d),e.officeStats&&f(e.officeStats,i,a,u),e.storeStats&&f(e.storeStats,s,l,m);let p=new Map;t.forEach(e=>{let t=e["建案名稱"];if(!t)return;p.has(t)||p.set(t,{resSum:{price:0,area:0,count:0},shopSum:{price:0,area:0,count:0},officeSum:{price:0,area:0,count:0},county:e["縣市"],district:e["行政區"]});let r=p.get(t),n=e["建物型態"],i=e["主要用途"],a=e["房屋單價(萬)"],o=e["房屋總價(萬)"]||0,s=e["建物移轉總面積"]||0;"number"!=typeof a||a<=0||(n?.includes("店")||"商業用"===i||e["備註"]?.includes("店")?(r.shopSum.price+=o,r.shopSum.area+=s,r.shopSum.count+=1):n?.includes("辦公")||n?.includes("廠辦")||n?.includes("事務所")||i?.includes("辦公")?(r.officeSum.price+=o,r.officeSum.area+=s,r.officeSum.count+=1):(r.resSum.price+=o,r.resSum.area+=s,r.resSum.count+=1))});let h=[];p.forEach((e,t)=>{let r=e.resSum.area>0?e.resSum.price/e.resSum.area:0,n=e.shopSum.area>0?e.shopSum.price/e.shopSum.area:0,i=e.officeSum.area>0?e.officeSum.price/e.officeSum.area:0;r>0&&(n>0||i>0)&&h.push({projectName:t,county:e.county,district:e.district,residentialAvg:r,shopAvg:n,officeAvg:i,shopMultiple:r>0?n/r:0,officeMultiple:r>0?i/r:0})}),h.sort((e,t)=>e.projectName.localeCompare(t.projectName)),e.typeComparison=h}(t.unitPriceAnalysis,t.transactionDetails),t.parkingAnalysis=function(e,t){if(!t)return e;let r=e.parkingRatio,n=t.parkingRatio,i=null;if(r&&n){let e=r.withParking.count,t=r.withoutParking.count,a=n.withParking.count,o=n.withoutParking.count,s=e+a,l=t+o,c=s+l;i={withParking:{count:s,percentage:c>0?s/c*100:0},withoutParking:{count:l,percentage:c>0?l/c*100:0}}}else i=r||n;let a=new Map,o=e=>{if(a.has(e.type)){let t=a.get(e.type),r=t.count+e.count,n=t.transactionCount+e.transactionCount,i=t.avgPrice,o=e.avgPrice,s=n>0?(i*t.transactionCount+o*e.transactionCount)/n:0;t.count=r,t.transactionCount=n,t.avgPrice=s}else a.set(e.type,{...e})};(e.avgPriceByType||[]).forEach(o),(t.avgPriceByType||[]).forEach(o);let s=Array.from(a.values()),l=new Map,c=e=>{if(l.has(e.floor)){let t=l.get(e.floor),r=t.count+e.count;e.rawRecords&&(t.rawRecords=[...t.rawRecords||[],...e.rawRecords]);let n=r>0?(t.avgPrice*t.count+e.avgPrice*e.count)/r:0;t.count=r,t.avgPrice=n,t.minPrice=Math.min(t.minPrice,e.minPrice),t.maxPrice=Math.max(t.maxPrice,e.maxPrice),e.maxPrice>t.maxPrice&&(t.maxPriceProject=e.maxPriceProject,t.maxPriceUnit=e.maxPriceUnit,t.maxPriceFloor=e.maxPriceFloor),e.minPrice<t.minPrice&&(t.minPriceProject=e.minPriceProject,t.minPriceUnit=e.minPriceUnit,t.minPriceFloor=e.minPriceFloor)}else l.set(e.floor,{...e,rawRecords:e.rawRecords?[...e.rawRecords]:[]})};return(e.rampPlanePriceByFloor||[]).forEach(c),(t.rampPlanePriceByFloor||[]).forEach(c),{parkingRatio:i,avgPriceByType:s,rampPlanePriceByFloor:Array.from(l.values())}}(t.parkingAnalysis,e.parkingAnalysis),t.salesVelocityAnalysis=function(e,t){if(!t)return e;let r=e.overall||{},n=t.overall||{},i=r.transactionCount||0,a=n.transactionCount||0,o=i+a,s={avgDaysToSell:0,medianDaysToSell:0,fastestSale:0,transactionCount:o};if(o>0){s.avgDaysToSell=((r.avgDaysToSell||0)*i+(n.avgDaysToSell||0)*a)/o;let e=void 0!==r.fastestSale?r.fastestSale:1/0;s.fastestSale=Math.min(e,void 0!==n.fastestSale?n.fastestSale:1/0),s.fastestSale===1/0&&(s.fastestSale=0),s.medianDaysToSell=((r.medianDaysToSell||0)*i+(n.medianDaysToSell||0)*a)/o}let l=new Map,c=e=>{if(!e)return;let t=e.roomType;if(l.has(t)){let r=l.get(t),n=r.count+e.count,i=r.avgDays||0,a=e.avgDays||0;r.avgDays=n>0?(i*r.count+a*e.count)/n:0,r.count=n}else l.set(t,{...e})};(e.byRoomType||[]).forEach(c),(t.byRoomType||[]).forEach(c);let d=Array.from(l.values()),u=Array.from(new Set([...e.allRoomTypes||[],...t.allRoomTypes||[]])),m={};return["monthly","quarterly","yearly","weekly"].forEach(r=>{let n=e[r]||{},i=t[r]||{},a={};new Set([...Object.keys(n),...Object.keys(i)]).forEach(e=>{let t=n[e]||{},r=i[e]||{},o=new Set([...Object.keys(t),...Object.keys(r)]),s={};o.forEach(e=>{let n=t[e],i=r[e];if(n&&i){let t=n.count+i.count,r=n.priceSum+i.priceSum,a=n.areaSum+i.areaSum;s[e]={count:t,priceSum:r,areaSum:a,avgPrice:a>0?r/a:0}}else n?s[e]={...n}:i&&(s[e]={...i})}),a[e]=s}),m[r]=a}),{overall:s,byRoomType:d,allRoomTypes:u,...m}}(t.salesVelocityAnalysis,e.salesVelocityAnalysis),n=t.priceGridAnalysis,t.priceGridAnalysis=(s=e.priceGridAnalysis)?{projectNames:[...n.projectNames||[],...s.projectNames||[]],byProject:{...n.byProject||{},...s.byProject||{}}}:n,t.areaDistributionAnalysis=function(e,t){if(!t)return e;if(!e)return t;let r={...e};return Object.keys(t).forEach(e=>{r[e]?r[e]=[...r[e],...t[e]]:r[e]=[...t[e]]}),r}(t.areaDistributionAnalysis,e.areaDistributionAnalysis),t):JSON.parse(JSON.stringify(e)):t,y++}if(console.log("Aggregation complete. Total Transaction Details:",g?.transactionDetails?.length),0===y){if(e.projectNames.length>0)throw Error("這段時間 這個建案查詢不到資料");throw Error("無法取得任何縣市的分析數據")}if(y<c.length){let e=c.length-y;d(`注意：有 ${e} 個縣市的資料載入失敗，分析結果可能不完整。`)}e.setAnalysisData(g)}catch(e){console.error("Analysis failed:",e),d(e.message||"無法取得分析數據，請稍後再試。")}finally{l(!1)}},[e]);return{loading:s,error:c,analysisData:e.analysisData,handleAnalyze:u,setError:d,setLoading:l,setAnalysisData:e.setAnalysisData}}e.s(["useAnalysisData",()=>s],14302)}]);