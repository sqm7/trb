# Behavior Guidelines

## Version Control Reporting
- When listing git commits, restore points, or history, **ALWAYS** include the Date and Time.
- Preferred format: `Hash | Date Time | Message` (e.g., `git log --pretty=format:'%h | %cd | %s' --date=format:'%Y-%m-%d %H:%M:%S'`)

## Memory & Documentation
- Follow the user-defined memory rules in <MEMORY[user_global]>.
- Keep SPEC.md, PLAN.md, and ARCHITECTURE.md updated.

## 部署平台規則 ⚠️
- **目前使用 GitHub Pages**，不可擅自更改為 Vercel 或其他平台。
- 若需要 API Routes、SSR 等功能需遷移到 Vercel，**必須先詢問用戶並取得同意**。
- 部署流程：`npm run build` → 複製 `out/` 到根目錄 → `git push`。

## 腳本使用規則 ⚠️
- **禁止重複創建已存在的腳本**，先查閱 ARCHITECTURE.md 第 6、7 章節。
- 常用腳本：
  - 備份 Schema: `bash scripts/backup_supabase.sh`
  - 部署正式版: `bash scripts/deploy_next_prod.sh`
  - 部署測試版: `bash scripts/deploy_next_trb.sh`
  - 部署 Edge Functions: `supabase functions deploy <name>`

## Tech Stack Constraints & Pitfalls ⚠️
- **Tailwind CSS v4 Usage**: 
  - 本專案使用 **Tailwind CSS v4** (`@tailwindcss/postcss`)，**不存在** `tailwind.config.ts` 或 `tailwind.config.js`。
  - 當使用 Agent Skills (如 `/react-components`) 或生成代碼時，若遇到讀取 config 的步驟，請**直接忽略**或假設使用標準設定。
  - 樣式配置請查閱 CSS 變數或全域 CSS 檔案，勿嘗試讀取或創建 config 檔案。
- **Remotion Video Generation**:
  - **Tailwind Integration**: 必須建立 `remotion.config.ts` 並配置 `postcss-loader` 才能讀取 Tailwind CSS v4 樣式。否則影片會失去所有樣式。
  - **Animation Smoothness**: 
    - **禁止使用 Framer Motion** (`framer-motion`) 進行影片渲染。時間軸不同步會導致嚴重頓挫 (Stuttering)。
    - **必須使用 Remotion Native Hooks** (`spring`, `interpolate`, `useCurrentFrame`) 進行所有動畫計算，確保 Frame-Perfect 的 60FPS 流暢度。
  - **Static Assets**: 必須使用 `staticFile("path/to/asset.png")` 來引用 `public/` 資料夾內的圖片，直接寫 `src="/icon.png"` 會導致 Render 失敗。
- **Z-Index & Stacking Context**:
  - 當在 Dashboard 實作 `fixed` 或 `sticky` 元素時，必須注意與 `Header (z-50)` 的層級關係。
  - 當 `FilterBar` 處於精簡模式時，其容器應設置 `z-[100]` 以上，且元素本身設置 `z-[70]`，以確保正確出現在 Header 最上方。
