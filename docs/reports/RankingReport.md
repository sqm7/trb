# Ranking Report (區域建案排行)

## 1. 概述
`RankingReport` 提供建案層級的績效排行。使用者可以根據銷售總額、成交單價、去化速度等多種指標對建案進行排序，快速識別市場中的熱銷案或高價案。

## 2. 功能特點
- **核心指標卡片**: 
  - 展示市場整體的關鍵數據：總銷金額、總坪數、平均單價、交易總筆數。
  - 展示價格極值：最高/最低單價、平均中位數、車位均價。
  - 點擊卡片可直接以該指標對下方圖表與列表進行排序。
- **建案分析圖表 (`RankingChart`)**:
  - **多圖表模式**: 支援自動 (Auto)、長條圖 (Bar)、矩形樹圖 (Treemap)。
  - **Top N 篩選**: 快速切換顯示前 10、30、50 或 100 名建案。
  - **指標切換**: 透過按鈕切換排序依據（總價、單價、筆數、市佔率等）。
- **排行列表**: 
  - 詳細列出建案的各項績效數據。
  - 支援分頁瀏覽。
  - 雙向排序功能。

## 3. props 定義
- `data`: 包含 `coreMetrics` (整體指標) 與 `projectRanking` (建案陣列)。
- `visibleSections`: 控制顯示區塊。

## 4. 關鍵邏輯
- **排序與分頁**: 
  - 前端實作即時排序 (`sortedData`) 與分頁 (`pagedData`)，避免頻繁請求後端。
- **衍生指標計算 (`derivedMetrics`)**: 
  - 從建案列表中即時計算全市場的價格極值（Max/Min Price）與平均車位價格。
- **圖表互動**: 
  - 圖表組件與排序狀態連動，確保圖表始終顯示當前排序邏輯下的 Top N 建案。
