# Price Band Report (總價帶分析)

## 1. 概述
`PriceBandReport` 分析不同房型（1房~4房）的總價分佈區間。透過箱型圖 (Box Plot) 與詳細統計表，揭示市場的主流價格帶與極端值。

## 2. 功能特點
- **房型與衛浴篩選**: 
  - 支援切換顯示不同房型。
  - **合併/展開衛浴**: 可選擇是否將相同房型但不同衛浴數（如2房1衛 vs 2房2衛）合併統計。
- **總價帶箱型圖 (`PriceBandChart`)**: 
  - 可視化各房型的最低價、Q1、中位數、Q3、最高價。
  - 快速掌握價格區間與離散程度。
- **詳細數據表**: 
  - 展示各房型的統計數據（均價、中位數、建案數、交易筆數）。
  - 支援展開查看子分類（衛浴數）。
  - 點擊「建案數」可開啟彈窗查看具體建案列表 (`ProjectListModal`)。
- **區域交叉分析 (`Location Cross Table`)**:
  - **熱力分佈表**: 顯示各行政區/縣市在不同房型的成交量分佈。
  - **維度切換**: 支援切換「行政區」或「縣市」視角。
  - **多縣市過濾**: 若數據包含多個縣市，可透過 Tabs 切換檢視特定縣市的行政區。
  - **成交佔比圖表**: 堆疊長條圖顯示區域產品組合佔比。

## 3. props 定義
- `data`: `PriceBandAnalysis` 物件。
- `visibleSections`: 控制顯示哪些區塊（預設顯示全部：圖表、表格、區域分析）。

## 4. 關鍵邏輯
- **數據聚合 (`tableData`)**: 
  - 根據 `mergeBathrooms` 狀態，動態將細分數據（2房1衛、2房2衛）合併為大類（2房），並重新計算加權中位數與均價。
- **區域交叉表生成 (`crossTableData`)**: 
  - 動態遍歷交易明細，建立 `[房型][區域] -> 數量` 的二維矩陣。
  - 支援從原始交易明細 (`transactionDetails`) 或預聚合數據 (`locationCrossTable`) 生成。
- **房型識別**: 
  - 內建邏輯處理房型名稱標準化（如 "2" -> "2房", 去除空白）。
